new function(){var ea=window,da=ea.String,dp=ea.Boolean,cQ=ea.Number,cW=ea.Object,bT=ea.Array,dE=ea.RegExp,dH=ea.Date,Y=ea.Function,aW=ea.Math,cF=ea.Error,du=ea.SyntaxError,d=ea.TypeError,cK=ea.parseInt,bv=ea.parseFloat,a3=ea.NaN,aQ=ea.isNaN,cO=ea.Infinity,b3=ea.isFinite,f=ea.setTimeout,dI=ea.clearTimeout,i=ea.navigator,m=ea.location,aP=ea.document,G=ea.encodeURIComponent,b9=ea.XMLHttpRequest,cM=ea.DOMParser,cL=ea.XMLSerializer,aS=ea.XSLTProcessor,bL=ea.ActiveXObject,dO=ea.JSON,bx=function(){},be=function(){},aL=function(){},bw=1,bI=2,bq=3,dx=4,u=5,aJ=6,cD=7,al=8,dP=9,c=10,I=11,cs=12,P=13,dR=false,bQ=false,W=false,dX=false,dg=0;if(i.userAgent.match(/AppleWebKit\/(\d+\.\d+)/)){dR=true;dg=1*dE.$1}else{if(!!aP.namespaces){bQ=true;dg=1*i.userAgent.match(/MSIE\s(\d+\.\d+)/)[1]}else{if(!!window.controllers){W=true;dg=1*i.userAgent.match(/rv:(\d+\.\d+)/)[1]}else{if(!!window.opera){dX=true;dg=1*i.userAgent.match(/Presto\/(\d+\.\d+)/)[1]}}}}var x=function(){return this}();window.DBG=false;var ad=["toString","hasOwnProperty","toLocaleString","isPrototypeOf","valueOf","constructor","propertyIsEnumerable"];var J=Object.prototype.hasOwnProperty;function bo(eo,el){var em;if(el){for(em in el){if(J.call(el,em)){eo[em]=el[em]}}if(window.ActiveXObject){for(var en=0;en<ad.length;++en){em=ad[en];if(J.call(el,em)){eo[em]=el[em]}}}}return eo}if(!window.b$){window.b$={}}var bc=/\s+/,b4;(function(et,em){var eu,ew,ex=et.b$,er=Array.prototype.push,en=Object.prototype.toString,ey=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ep=function(ez,eA){return new ep.fn.init(ez,eA,eu)},es;ep.fn=ep.prototype={constructor:ep,init:function(ez,eE,eC){var eB,eF,eA,eG;if(!ez){return this}if(ez.nodeType){this.context=this[0]=ez;this.length=1;return this}if(typeof ez==="string"){if(ez.charAt(0)==="<"&&ez.charAt(ez.length-1)===">"&&ez.length>=3){eB=[null,ez,null]}else{eB=ey.exec(ez)}if(eB&&(eB[1]||!eE)){if(eB[1]){eE=eE instanceof ep?eE[0]:eE;eG=(eE&&eE.nodeType?eE.ownerDocument||eE:document);ez=ep.parseHTML(eB[1],eG,true);if(rsingleTag.test(eB[1])&&ep.isPlainObject(eE)){this.attr.call(ez,eE,true)}return ep.merge(this,ez)}else{eF=document.getElementById(eB[2]);if(eF&&eF.parentNode){if(eF.id!==eB[2]){return eC.find(ez)}this.length=1;this[0]=eF}this.context=document;this.selector=ez;return this}}else{if(!eE||eE.jquery){return(eE||eC).find(ez)}else{return this.constructor(eE).find(ez)}}}else{if(ep.isFunction(ez)){return eC.ready(ez)}}if(ez.selector!==em){this.selector=ez.selector;this.context=ez.context}var eD=ep.makeArray(ez,this);return eD},selector:"",version:"5.5",length:0,pushStack:function(eA,eC,ez){var eB=this.constructor();if(ep.isArray(eA)){push.apply(eB,eA)}else{ep.merge(eB,eA)}eB.prevObject=this;eB.context=this.context;if(eC==="find"){eB.selector=this.selector+(this.selector?" ":"")+ez}else{if(eC){eB.selector=this.selector+"."+eC+"("+ez+")"}}return eB},each:function(eA,ez){return ep.each(this,eA,ez)},find:function(ez){var eB=this,eD,eA;if(typeof ez!=="string"){return ep(ez).filter(function(){for(eD=0,eA=eB.length;eD<eA;eD++){if(ep.contains(eB[eD],this)){return true}}})}var eC=this.pushStack("","find",ez),eF,eG,eE;for(eD=0,eA=this.length;eD<eA;eD++){eF=eC.length;ep.find(ez,this[eD],eC);if(eD>0){for(eG=eF;eG<eC.length;eG++){for(eE=0;eE<eF;eE++){if(eC[eE]===eC[eG]){eC.splice(eG--,1);break}}}}}return eC},push:er};bo(ep,{trim:function(ez){return String.prototype.trim.call(ez)},filter:function(eB,ez,eA){if(eA){eB=":not("+eB+")"}return ez.length===1?ep.find.matchesSelector(ez[0],eB)?[ez[0]]:[]:ep.find.matches(eB,ez)},isFunction:function(ez){return ep.type(ez)==="function"},isArray:Array.isArray||function(ez){return ep.type(ez)==="array"},type:function(ez){return ez==null?String(ez):ev[en.call(ez)]||"object"},each:function(eC,eF,eB){var eA,eD=0,eE=eC.length,ez=eE===em||ep.isFunction(eC);if(eB){if(ez){for(eA in eC){if(eF.apply(eC[eA],eB)===false){break}}}else{for(;eD<eE;){if(eF.apply(eC[eD++],eB)===false){break}}}}else{if(ez){for(eA in eC){if(eF.call(eC[eA],eA,eC[eA])===false){break}}}else{for(;eD<eE;){if(eF.call(eC[eD],eD,eC[eD++])===false){break}}}}return eC},makeArray:function(eC,eA){var ez=eA||[];if(eC!=null){var eB=ep.type(eC);if(eC.length==null||eB==="string"||eB==="function"||eB==="regexp"||ep.isWindow(eC)){er.call(ez,eC)}else{ep.merge(ez,eC)}}return ez},merge:function(eD,eB){var eC=eD.length,eA=0;if(typeof eB.length==="number"){for(var ez=eB.length;eA<ez;eA++){eD[eC++]=eB[eA]}}else{while(eB[eA]!==em){eD[eC++]=eB[eA++]}}eD.length=eC;return eD},access:function(ez,eF,eI,eG,eD,eJ,eH){var eB,eE=eI==null,eC=0,eA=ez.length;if(eI&&typeof eI==="object"){for(eC in eI){jQuery.access(ez,eF,eC,eI[eC],1,eJ,eG)}eD=1}else{if(eG!==em){eB=eH===em&&jQuery.isFunction(eG);if(eE){if(eB){eB=eF;eF=function(eL,eK,eM){return eB.call(jQuery(eL),eM)}}else{eF.call(ez,eG);eF=null}}if(eF){for(;eC<eA;eC++){eF(ez[eC],eI,eB?eG.call(ez[eC],eC,eF(ez[eC],eI)):eG,eH)}}eD=1}}return eD?ez:eE?eF.call(ez):eA?eF(ez[0],eI):eJ}});var ev={};ep.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(eA,ez){ev["[object "+ez+"]"]=ez.toLowerCase()});bo(ep.fn,{dispatchCustomEvent:function(eB,ez,eC,eA){return this.each(function(){this.dispatchCustomEvent(eB,ez,eC,eA)})},addEventListener:function(eB,eA,ez){return this.each(function(){this.addEventListener(eB,eA,ez)})}});var ew=false;bo(ep,{isReady:false,readyWait:1,holdReady:function(ez){if(ez){ep.readyWait++}else{ep.ready(true)}},ready:function(ez){if((ez===true&&!--ep.readyWait)||(ez!==true&&!ep.isReady)){if(!document.body){return setTimeout(ep.ready,1)}ep.isReady=true;if(ez!==true&&--ep.readyWait>0){return}dS();ep.dispatchCustomEvent("ready")}},bindReady:function(){if(eB){return}var eB=true;if(document.readyState==="complete"){return setTimeout(ep.ready,1)}if(document.addEventListener){document.addEventListener("DOMContentLoaded",__DOMContentLoaded,false);et.addEventListener("load",ep.ready,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",__DOMContentLoaded);et.attachEvent("onload",ep.ready);var ez=false;try{ez=et.frameElement==null}catch(eA){}if(document.documentElement.doScroll&&ez){eq()}}}}});__DOMContentLoaded=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",__DOMContentLoaded,false);ep.ready()}else{if(document.readyState==="complete"){document.detachEvent("onreadystatechange",__DOMContentLoaded);ep.ready()}}};ep.bindReady();function eq(){if(jQuery.isReady){return}try{document.documentElement.doScroll("left")}catch(ez){setTimeout(eq,1);return}ep.ready()}function el(ez){return typeof ez==="string"?ez.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):ez}function eo(ez){return typeof ez==="string"?ez.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"):ez}ep.escapeXML=el;ep.unescapeXML=eo;ep.fn.init.prototype=ep.fn;eu=ep(document);if(et.b$){ep.portal=et.b$.portal}ep.boot=function(){dS()};ep.getVC=function(ez){while(ez){if(ez.viewController){return ez.viewController}ez=ez.parentNode}};ep._private={};ep.bUAWebKit=dR;ep.bUATrident=bQ;ep.bUAGecko=W;ep.xbUAPresto=dX;ep.nUAVersion=dg;et.b$=ep})(window);b$=window.b$;if(window.OpenAjax){OpenAjax.hub.registerLibrary("b$","http://backbase.com",b$.version)}function dQ(eo,ep,em){for(var en=0,el=eo.length;en<el;en++){ep.apply(eo[en],em||[en,eo[en]])}}var cz={};function ec(em,eo){var en=this;if(!eo&&cz[em]){return cz[em]}else{var el;$.ajax({async:false,url:em,dataType:"html",success:function(ep){cz[em]=ep;el=ep},error:function(ep){cz[em]=ep;el="Error"}})}return el}b$._private.simpleResponseCache_getData=ec;if(!window.console){window.console={log:function(){},dir:function(){},trace:function(){}}}if(!window.console.dir){console.dir=console.log}function az(em,el){for(;em;em=em.parentNode){if(em==el){return true}}return false}function bn(el){return"U+"+("0000"+el.keyCode.toString(16).toUpperCase()).slice(-4)}function c8(em){var el=[];if(em.altKey){el.push("Alt")}if(em.ctrlKey){el.push("Control")}if(em.metaKey){el.push("Meta")}if(em.shiftKey){el.push("Shift")}return el.join(" ")}var ae=null;function R(em){if(ae!=em){var el=ae;if(el&&el!=em){aH(el)}ae=em}}function aH(em){if(ae==em){ae=null;var el=new b$.bdom.events.UIEvent();el.initUIEvent("untrap",false,false,window,null);em.dispatchEvent(el)}}function a5(el){var em={},en;if(el){if(el.getBoundingClientRect){em=el.getBoundingClientRect()}else{for(en=el;en;en=en.offsetParent){em.left+=en.offsetLeft;em.top+=en.offsetTop}for(en=el;en.nodeType==1;en=en.parentNode){em.left-=en.scrollLeft;em.top-=en.scrollTop}em.right=nLeft+el.offsetWidth;em.bottom=nTop+el.offsetHeight}}return em}function cE(em,eo,en,el){if(em.addEventListener){em.addEventListener(eo,en,el)}else{em.attachEvent("on"+eo,en)}}function S(em,eo,en,el){if(em.removeEventListener){em.removeEventListener(eo,en,el)}else{em.detachEvent("on"+eo,en)}}function dY(el){return b$.getVC(el.srcElement||el.target)}function w(em){var el=em.button;if(!bQ){return el}if(el==4){return 1}if(el==2){return 2}return 0}function dc(el,em){if(el.defaultPrevented){if(em.preventDefault){em.preventDefault()}return false}return true}function ck(){return Math.max(!(document.compatMode=="CSS1Compat")?document.body.scrollHeight:document.documentElement.scrollHeight,html.getViewportHeight())}function dn(){return Math.max(!(document.compatMode=="CSS1Compat")?document.body.scrollWidth:document.documentElement.scrollWidth,html.getViewportWidth())}function dw(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function dl(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function s(el){if(!el){el=window.event}el.returnValue=false;if(el.preventDefault){el.preventDefault()}return false}function g(em,eo,en,el){if("addEventListener" in em){g=function(eq,es,er,ep){eq.addEventListener(es,er,ep?true:false)}}else{g=function(eq,et,er,ep){if(!eq.aListeners){eq.aListeners=[]}var es=function(eu){if(!eu){eu=event}if(!eu){if(this.myWindow){eu=this.myWindow.window.event}else{return}}eu.target=eu.srcElement;eu.pageX=eu.clientX;eu.pageY=eu.clientY;return er.call(eq,eu)};eq.aListeners[eq.aListeners.length]={type:et,listener:er,closure:es};eq.attachEvent("on"+et,es)}}return g(em,eo,en,el)}function aA(em,eo,en,el){if("removeEventListener" in em){aA=function(eq,es,er,ep){eq.removeEventListener(es,er,ep?true:false)}}else{aA=function(eq,ev,et,ep){if(!eq.aListeners){eq.detachEvent("on"+ev,et)}else{for(var es=0,er=eq.aListeners.length;es<er;es++){var eu=eq.aListeners[es];if(eu&&et==eu.listener&&ev==eu.type){eq.detachEvent("on"+ev,eu.closure);eq.aListeners[es].closure=null;eq.aListeners[es].listener=null;eq.aListeners[es]=null}}}}}return aA(em,eo,en,el)}b$._private.html={getDocumentHeight:ck,getDocumentWidth:dn,getViewportHeight:dw,getViewportWidth:dl,addEventListener:g,removeEventListener:aA,handlePreventDefault:s};function db(eo){var ep=new aI();if(bL){var em=eo.indexOf("<?xml ");if(em>=0){eo=eo.substr(eo.indexOf("?>",em+1)+2)}}try{var el=ep.parseFromString(eo,"text/xml");return el}catch(en){alert("XMLHelper.parse: "+en.message)}}function af(el){var em=[];for(el=el.firstChild;el;el=el.nextSibling){em.push(el.nodeValue?el.nodeValue:"")}return em.join("")}function aO(el){return el.nodeType==aE?null:el.textContent||el.text||""}function ch(el,em){for(el=el.firstChild;el;el=el.nextSibling){if(!em||el.nodeType==em){return el}}return null}function cw(el,em){for(el=el.lastChild;el;el=el.previousSibling){if(!em||el.nodeType==em){return el}}return null}function bN(em,el){while(em&&em.parentNode){em=em.parentNode}while(el&&el.parentNode){el=el.parentNode}if(el==em){return true}return false}function ed(el,en,ep){var es,eo=0,eq,er=[],et="*"==en,em="*"==ep;if("getElementsByTagNameNS" in el){return Array.prototype.slice.call(el.getElementsByTagNameNS(en,ep))}else{if("getElementsByTagName" in el){}}return er}function a9(eo,et){var eu=[],er,em,ep,es,el,en,eq;for(eq=0,er=et.split(" "),en=er.length;eq<en;eq++){if(er[eq]!=""){em=er[eq].split(":");if(em.length>1){el=em[0];es=em[1]}else{el="";es=em[0]}ep=aj(eo,el);eu.push([ep,es,er[eq]])}}return eu}function aj(em,el){return d3(em,el||null)}function d3(em,el){switch(em.nodeType){case bw:if(em.namespaceURI&&em.prefix==el){return em.namespaceURI}var eo=0,en,ep=em.attributes,eq;while(en=ep[eo++]){if(en.prefix=="xmlns"&&(en.localName||en.baseName)==el){return en.nodeValue?en.nodeValue:null}else{if(en.nodeName=="xmlns"&&!el){return en.nodeValue?en.nodeValue:null}}}if(em.parentNode&&em.parentNode.nodeType==bw){return d3(em.parentNode,el)}return null;case dP:return d3(em.documentElement,el);case aJ:case cs:case c:case I:return null;case bI:if(em.ownerElement){return d3(em.ownerElement,el)}else{return null}default:if(em.parentNode&&em.parentNode.nodeType==bw){return d3(em.parentNode,el)}else{return null}}}function X(el,em){if(el.lookupPrefix){return el.lookupPrefix(em)||null}else{if(!em){return null}switch(el.nodeType){case bw:return ai(el,em);case dP:return ai(el.documentElement,em);case aJ:case cs:case I:case c:return null;case bI:if(el.ownerElement){return ai(el.ownerElement,em)}return null;default:if(el.parentNode){return ai(el.parentNode,em)}return null}}}function ai(el,eq,eo){if(!eo){eo=el}if(el.namespaceURI&&el.namespaceURI==eq&&el.prefix&&aj(eo,el.prefix)==eq){return el.prefix}var en=0,em,ep=el.attributes,er;while(em=ep[en++]){if(em.prefix=="xmlns"&&em.nodeValue==eq&&aj(eo,em.localName||em.baseName||em.nodeName)==eq){return em.localName||em.baseName}}if(el.parentNode&&el.parentNode.nodeType==bw){return ai(el.parentNode,eq,eo)}return null}function M(el,em){if("isDefaultNamespace" in el){return el.isDefaultNamespace(em)}else{switch(el.nodeType){case bw:var en;if(!el.prefix){return el.namespaceURI==em}else{if(el.getAttribute("xmlns")){return el.getAttribute("xmlns")==em}else{if(el.parentNode&&el.parentNode.nodeType==L){return M(el.parentNode,em)}else{if((en=bb.Core_oAttributePd[el.getAttribute(bb.Core_sAttributePdName)])){return M(en,em)}}}}return false;case dP:return M(el.documentElement,em);case aJ:case cs:case c:case I:return false;case bI:if(el.ownerElement){return M(el.ownerElement,em)}return false;default:if(el.parentNode&&el.parentNode.nodeType==bw){return M(el.parentNode,em)}return false}}}function cC(el,em){if("hasAttribute" in el){return el.hasAttribute(em)}else{return el.getAttribute(em)!==null}}function dV(el,en,em){if("hasAttributeNS" in el){return el.hasAttributeNS(en,em)}return el.attributes.getQualifiedItem(em,en||"")?true:false}function cP(el){return el.nodeType==bw&&el.attributes.length>0}function a0(el,en,em){if("getAttributeNS" in el){return el.getAttributeNS(en,em)}else{var eo=el.attributes.getQualifiedItem(em,en||"");return eo?eo.nodeValue:""}}function dh(el,en,em){if("removeAttributeNS" in el){return el.removeAttributeNS(en,em)}else{return el.attributes.removeQualifiedItem(em,en||"")}}function aN(ep,eq,en,et){if("setAttributeNS" in ep){return ep.setAttributeNS(eq,en,et)}else{var eo=0;if(!eq){ep.setAttribute(en,et);return}var em=en.split(":"),er=em.pop(),el=em.pop()||X(ep,eq)||"a"+eo++,es;es=ep.attributes.getQualifiedItem(er,eq);if(!es||es.prefix!=el){es=ep.ownerDocument.createNode(2,(el?el+":"+er:er),eq);ep.setAttributeNode(es)}es.nodeValue=et}}b$._private.xml={parse:db,textContent:aO,getFirst:ch,getLast:cw,inSameDocument:bN,getElementsByTagNameNS:ed,resolveQNames:a9,lookupNamespaceURI:aj,_lookupNamespaceURI:d3,lookupPrefix:X,lookupNamespacePrefix:ai,isDefaultNamespace:M,hasAttribute:cC,hasAttributeNS:dV,hasAttributes:cP,getAttributeNS:a0,removeAttributeNS:dh,setAttributeNS:aN};function ee(en){if(W&&en.button==2){return}var ep=dY(en),em=w(en),eo=false,el=new b$.bdom.events.MouseEvent();if(ae&&!az(ep,ae)){ep=ae;eo=true}if(ep){el.initMouseEvent("click",true,true,window,en.detail||1,en.screenX,en.screenY,en.clientX,en.clientY,en.ctrlKey,en.altKey,en.shiftKey,en.metaKey,em,null);el.htmlTarget=(en.srcElement||en.target);ep.dispatchEvent(el)}if(eo){el.preventDefault()}return dc(el,en)}function d4(en){var eo=dY(en),em=w(en),el=new b$.bdom.events.MouseEvent();if(ae&&!az(eo,ae)){eo=ae}if(eo){el.initMouseEvent("dblclick",true,true,window,en.detail||2,en.screenX,en.screenY,en.clientX,en.clientY,en.ctrlKey,en.altKey,en.shiftKey,en.metaKey,em,null);el.htmlTarget=(en.srcElement||en.target);eo.dispatchEvent(el)}}function bz(en){var ep=dY(en),em=w(en),eo=false,el=new b$.bdom.events.MouseEvent();if(ae&&!az(ep,ae)){ep=ae;eo=true}if(ep){el.initMouseEvent("mousedown",true,true,window,en.detail||1,en.screenX,en.screenY,en.clientX,en.clientY,en.ctrlKey,en.altKey,en.shiftKey,en.metaKey,em,null);el.htmlTarget=(en.srcElement||en.target);ep.dispatchEvent(el);if(eo){el.preventDefault()}}return dc(el,en)}function ax(eo){var ep=dY(eo),em=w(eo),en=false,el=new b$.bdom.events.MouseEvent();if(ae&&!az(ep,ae)){ep=ae}if(ep){el.initMouseEvent("mouseup",true,true,window,eo.detail||1,eo.screenX,eo.screenY,eo.clientX,eo.clientY,eo.ctrlKey,eo.altKey,eo.shiftKey,eo.metaKey,em,null);el.htmlTarget=(eo.srcElement||eo.target);ep.dispatchEvent(el)}return dc(el,eo)}var aC=[];function d6(ep){var eq=dY(ep),eo=w(ep),en=new b$.bdom.events.MouseEvent(),es;if(ae&&!az(eq,ae)){eq=ae}var el=-1;var er=[];if(aC[0]!=eq){for(es=eq;es&&es.nodeType!=9;es=es.parentNode){er.push(es);if(el==-1){el=aC.indexOf(es)}}if(el==-1){el=aC.length}for(var em=0;em<el;em++){es=aC[em];en=new b$.bdom.events.MouseEvent(),en.initMouseEvent("mouseleave",false,false,window,null,ep.screenX,ep.screenY,ep.clientX,ep.clientY,ep.ctrlKey,ep.altKey,ep.shiftKey,ep.metaKey,eo,aC[em+1]||null);es.dispatchEvent(en)}for(var em=el+er.length-aC.length;em>0;em--){es=er[em-1];en=new b$.bdom.events.MouseEvent(),en.initMouseEvent("mouseenter",false,false,window,null,ep.screenX,ep.screenY,ep.clientX,ep.clientY,ep.ctrlKey,ep.altKey,ep.shiftKey,ep.metaKey,eo,er[em]||null);es.dispatchEvent(en)}aC=er}if(eq){en=new b$.bdom.events.MouseEvent(),en.initMouseEvent("mousemove",true,true,window,null,ep.screenX,ep.screenY,ep.clientX,ep.clientY,ep.ctrlKey,ep.altKey,ep.shiftKey,ep.metaKey,eo,null);eq.dispatchEvent(en)}return dc(en,ep)}var bl;function ag(eo){var ep=dY(eo),en=w(eo),em=new b$.bdom.events.MouseEvent();if(ep){if(ae&&!az(ep,ae)){ep=ae}if(ep==bl){return}if(bl){var el=new b$.bdom.events.MouseEvent();el.initMouseEvent("mouseout",true,true,window,null,eo.screenX,eo.screenY,eo.clientX,eo.clientY,eo.ctrlKey,eo.altKey,eo.shiftKey,eo.metaKey,en,null);bl.dispatchEvent(el)}em.initMouseEvent("mouseover",true,true,window,null,eo.screenX,eo.screenY,eo.clientX,eo.clientY,eo.ctrlKey,eo.altKey,eo.shiftKey,eo.metaKey,en,null);ep.dispatchEvent(em);bl=ep}return dc(em,eo)}function dG(en){var eo=dY(en),em=w(en),el=new b$.bdom.events.KeyboardEvent();if(eo){if(ae&&!az(eo,ae)){eo=ae}el.initKeyboardEvent("keydown",true,true,window,bn(en),null,c8(en));eo.dispatchEvent(el);return dc(el,en)}}var bC=null;var dC=null;function k(em){var en=dY(em);var el=(em.srcElement||em.target);if(en){bZ(en,el)}}function bZ(en,el){if(en!=bC){if(bC){dr(bC,dC)}bC=en;dC=el;var em=new b$.bdom.events.FocusEvent();em.initFocusEvent("focus",false,false,window,null,null);em.htmlTarget=el;en.dispatchEvent(em);var em=new b$.bdom.events.FocusEvent();em.initFocusEvent("DOMFocusIn",true,false,window,null,null);em.htmlTarget=el;en.dispatchEvent(em)}}function eg(em){var en=dY(em);var el=(em.srcElement||em.target);if(en){dr(en,el)}}function dr(en,el){if(en==bC){bC=null;dC=null;var em=new b$.bdom.events.FocusEvent();em.initFocusEvent("blur",false,false,window,null,null);em.htmlTarget=el;en.dispatchEvent(em);var em=new b$.bdom.events.FocusEvent();em.initFocusEvent("DOMFocusOut",true,false,window,null,null);em.htmlTarget=el;en.dispatchEvent(em)}}cE(window,"load",function(el){});cE(window,"unload",function(el){if(!b$.getVC){return}C()});var cb=false;function dS(){if(!b$.getVC){return}cR();if(cb){return}cb=true;cE(aP,"click",ee);cE(aP,"dblclick",d4);cE(aP,"mousedown",bz);cE(aP,"mouseup",ax);cE(aP,"mousemove",d6);cE(aP,"mouseover",ag);cE(aP,"activate",k,true);cE(aP,"focus",k,true);cE(aP,"blur",eg,true);cE(aP,"keydown",dG);b$._private.htmlAPI.init();b$._private.resourceManager.addPageHeadResources();b$.bdom.util.startup(document)}function C(){S(aP,"click",ee);S(aP,"dblclick",d4);S(aP,"mousedown",bz);S(aP,"mouseup",ax);var el=b$.bdom.domImplementation.documents;while(el[0]){b$.bdom.domImplementation.destroyDocument(el[0])}}function cR(){if(!window.b$||!window.b$.ua||!window.b$.ua.querySelector){b$.ua={};var el=null;if(window.Sizzle){el=window.Sizzle}else{if(window.jQuery){el=window.jQuery.find}}if(el){b$.ua.querySelector=function(eq,eo){if(b$.ua.matchesSelector(eq,eo)){return eq}var en=eq.firstChild;while(en){var ep=b$.ua.querySelector(en,eo);if(ep){return ep}en=en.nextSibling}return null};b$.ua.querySelectorAll=function(eo,en){return el(en,eo)};b$.ua.queryAncestor=function(eq,en,eo){if(b$.ua.matchesSelector(eq,en)){return eq}var ep=eq.parentNode;while(ep&&ep.nodeType==1){if(b$.ua.matchesSelector(ep,en)){return ep}ep=ep.parentNode;if(ep==eo){break}}return null};b$.bdom.Document.prototype.querySelectorAll=function(eo,en){return el(en,eo)};b$.ua.matchesSelector=el.matchesSelector;b$.ua.matches=el.matches}var em=el;b$.find=em;b$.expr=em.selectors;if(jQuery.expr.pseudos){b$.expr[":"]=jQuery.expr.pseudos}b$.unique=em.uniqueSort;b$.text=em.getText;b$.isXMLDoc=em.isXML;b$.contains=em.contains;b$.ua.dom_isDescendant=az;b$.ua.getBoundingClientRect=a5;b$.ua.setMouseTrap=R;b$.ua.releaseMouseTrap=aH}else{b$.ua=window.b$.ua}}function eh(em,el,en,ep){el=el||function(){em.apply(this,arguments)};bo(el,em);if(ep){bo(el,ep)}var eo=new Function;eo.prototype=em.prototype;el.prototype=bo(new eo,en);el.prototype.constructor=el;el.superClass=em;return el}var ar=function(){};ar.superClass=null;ar.classID=0;var cx=1;ar.extend=function(el,en,eo){var em=eh(this,el,en,eo);em.classID=cx++;return em};ar.getClassID=function(){return this.classID};var cu=ar.extend(function(el){this.message=el},{toString:function(){return this.message}});var aG=ar.extend(function(){},{test:function(el){return true}});var cG=aG.extend(function(el){this.test=el});var dy=aG.extend(function(el){this.type=el},{test:function(el){if(this.type instanceof aG){return this.type.test(el)}return el instanceof this.type}});var a4=dy.extend(function(el){dy.call(this,el)},{test:function(el){return el===null||dy.prototype.test.call(this,el)}});var a7=dy.extend(function(el){dy.call(this,el)},{test:function(el){return el==undefined||dy.prototype.test.call(this,el)}});var b=aG.extend(function(el){this.pattern=el},{test:function(em){if(!em){return false}for(var el in this.pattern){if(!ef(em[el],this.pattern[el])){return false}}return true},extend:function(em){for(var el in this.pattern){if(!(el in em)){em[el]=this.pattern[el]}}return new b(em)},implementedBy:function(el){if(!this.test(el.prototype)){throw new Error("Interface not implemented by class.")}}});function ef(el,em){if(em instanceof aG){return em.test(el)}if(em instanceof Function){return el instanceof em}throw new Error("Wrong type passed to checkType().")}function r(eo,en){for(var em=0,el=en.length;em<el;em++){if(!ef(eo[em],en[em])){throw new t(null,eo,em,en[em])}}}var t=cu.extend(function(el,eo,em,en){this.message=el;this.arguments=eo;this.index=em;this.expected=en},{toString:function(){return"ArgumentException - Wrong argument type for argument "+this.index+" ("+this.arguments[this.index]+") in "+this.arguments.callee+"."+(this.message?" ("+this.message+")":"")}});var bG=ar.extend(function(em,el){this.name=em;this.initializer=el;this.object=null},{create:function(){var el=this.getNamespace();this.initializer.call(el);return el},getNamespace:function(){if(this.object){return this.object}var en=ea;var el=this.name.split(".");if(el.length==1&&el[0]==""){return en}for(var em=0;em<el.length;em++){if(!(en[el[em]])){en=en[el[em]]={}}else{en=en[el[em]]}}bG.namespaces[this.name]=en;return this.object=en}},{namespaces:{"b$":b$}});function d2(en,el){var em=new bG(en,el);return em.create()}function br(ep){var eo=ea;var el=ep.split(".");if(el.length==1&&el[0]==""){return eo}for(var en=0;en<el.length;en++){if(el[en] in eo){eo=eo[el[en]]}else{var er=new Error('Cannot find object "'+ep+'".');if(er.stack){var em=er.stack&&er.stack.split("\n")[2];var eq=em&&em.match(/^[^@]*@(.*):(\d+)$/);if(eq&&eq[1]&&eq[2]){er=new Error(er.message,eq[1],Number(eq[2]))}}throw er}}return eo}function cV(em){for(var eo in bG.namespaces){if(bG.namespaces.hasOwnProperty(eo)){var en=bG.namespaces[eo];for(var el in en){if(em==en[el]){return eo+"."+el}}}}return null}function aY(en){if(!en.constructor){throw new t("Instance object expected.",arguments,0,null)}var ep=en.constructor;var em=null;var es=null;for(var er in bG.namespaces){if(bG.namespaces.hasOwnProperty(er)){var eo=bG.namespaces[er];for(var el in eo){if(eo.hasOwnProperty(el)){var eq=eo[el];if(ep==eq){return er+"."+el}else{if(eq instanceof Function&&en instanceof eq&&(!es||eq.prototype instanceof es)){em=er+"."+el+" (subclass)";es=eq}}}}}}return em}var ay=ar.extend(function(){throw new Error("Must implement.")},{next:function(){throw new Error("Must implement.")},hasNext:function(){throw new Error("Must implement.")},forEach:function(em,el){while(this.hasNext()){em.call(el||this,this.next())}}});var aZ=ay.extend(function(el){this.array=el;this.index=0},{next:function(){return this.array[this.index++]},hasNext:function(){return this.index<this.array.length}});b$.extend=eh;b$.mixin=bo;b$.Class=ar;b$.Exception=cu;b$.Interface=b;b$._private.ArgumentException=t;b$.Module=bG;b$.module=d2;b$.require=br;b$._private.ArrayIterator=aZ;var dq=new cG(function(el){return true});var ac=new cG(function(el){return typeof el=="number"||el instanceof Number});var ak=new cG(function(el){return typeof el=="string"||el instanceof String});var dN=new cG(function(el){return typeof el=="boolean"||el instanceof Boolean});var H=new cG(function(el){return typeof el=="function"});var co=new cG(function(el){if(window.ActiveXObject&&!window.Performance){return !!el&&"nodeType" in el&&"ownerDocument" in el&&"parentNode" in el&&"nodeName" in el&&"nodeValue" in el&&"nextSibling" in el&&"previousSibling" in el}else{return el instanceof Node}});var c0=new cG(function(el){if(window.ActiveXObject&&!window.Performance){if(window.Element&&!(el&&"selectNodes" in el)){return !!el&&el instanceof Element}else{return NODE.test(el)&&el.nodeType==1}}else{return el instanceof Element}});var by=new cG(function(el){if(window.ActiveXObject&&!window.Performance){if(window.HTMLDocument&&!(el&&"selectNodes" in el)){return !!el&&el instanceof HTMLDocument&&el.nodeType==9}else{return NODE.test(el)&&el.nodeType==9}}else{return el instanceof Document}});var dL=new cG(function(el){if(window.ActiveXObject&&!window.Performance){if(window.Element){return !!el&&el instanceof Element&&!!el.ownerDocument&&el.ownerDocument instanceof HTMLDocument}else{return NODE.test(el)&&el.nodeType==1&&!("baseName" in el)}}else{return el instanceof HTMLElement}});var bj=new cG(function(el){if(window.ActiveXObject&&!window.Performance){if(window.Element&&window.HTMLDocument){return !!el&&el instanceof HTMLDocument&&el.nodeType==9}else{return NODE.test(el)&&el.nodeType==9&&!("baseName" in el)}}else{return el instanceof HTMLDocument}});b$._private.types={TypeConstraint:aG,TypeConstraintFn:cG,TypeConstraintObject:dy,TypeConstraintNull:a4,TypeConstraintOptional:a7,checkType:ef,ANY:dq,NUMBER:ac,STRING:ak,BOOLEAN:dN,FUNCTION:H,NODE:co,ELEMENT:c0,DOCUMENT:by,HTMLELEMENT:dL,HTMLDOCUMENT:bj};var a8=ar.extend(function(em){this.array=[];if(em){for(var el=0;el<em.length;++el){this.add(em[el])}}},{insert:function(em,el){this.array.splice(el,0,em)},add:function(el){this.array.push(el)},remove:function(em){var el=b$.ecma5.Array.prototype.indexOf.call(this.array,em);this.array.splice(el,1)},each:function(eo,en){var eq=[].concat(this.array),em=0,el=eq.length,ep;for(;em<el;em++){ep=eq[em];if(eo.call(en||ep,ep,em,el)===false){break}}}});b$._private.ArrayCollection=a8;var h=ar.extend(function(en,el){ar.call(this);this.array=[];this.keys=[];this.map={};if(el){this.keyFn=el}if(en){for(var em=0;em<en.length;++em){this.add(en[em])}}},{keyFn:function(el){return el.name},add:function(en,em){var eo=this,el;if(arguments.length==1){em=eo.keyFn(en)}if(typeof em!="undefined"&&em!==null){el=eo.map[em];if(typeof el!="undefined"){return eo.replace(em,en)}eo.map[em]=en}console.log(eo.array);eo.array.push(en);eo.keys.push(em);return en},addAll:function(eq){var ep=this,eo=0,em,el,en;if(arguments.length>1||$.isArray(eq)){em=arguments.length>1?arguments:eq;for(el=em.length;eo<el;eo++){ep.add(em[eo])}}else{for(en in eq){if(eq.hasOwnProperty(en)){ep.add(eq[en],en)}}}},insertAt:function(el,em,en){var eo=this;if(arguments.length==2){en=em;em=eo.keyFn(en)}if(typeof eo.map[em]!="undefined"){eo.suspendEvents();eo.removeByKey(em);eo.resumeEvents()}if(el>=eo.array.length){return eo.add(en,em)}eo.array.splice(el,0,en);if(typeof em!="undefined"&&em!==null){eo.map[em]=en}eo.keys.splice(el,0,em);return en},remove:function(el){return this.removeAt(this.array.indexOf(el))},removeByKey:function(el){return this.removeAt(this.keys.indexOf(el))},removeAll:function(el){},removeAt:function(el){var eo=this,en,em;if(el<eo.array.length&&el>=0){en=eo.array[el];eo.array.splice(el,1);em=eo.keys[el];if(typeof em!="undefined"){delete eo.map[em]}eo.keys.splice(el,1);return en}return false},replace:function(en,eo){var el,em;if(arguments.length==1){eo=arguments[0];en=this.keyFn(el)}el=this.map[en];if(typeof en=="undefined"||en===null||typeof el=="undefined"){return this.add(eo,en)}em=this.indexOfKey(en);this.array[em]=eo;this.map[en]=eo;return eo},get:function(el){var em=this.map[el],em=em!==undefined?em:(typeof el=="number")?this.array[el]:undefined;return em},getAt:function(el){return this.array[el]},indexOf:function(el){return b$.ecma5.Array.prototype.indexOf.call(this.array,el)},indexOfKey:function(el){return b$.ecma5.Array.prototype.indexOf.call(this.keys,el)},each:function(eo,en){var eq=[].concat(this.array),em=0,el=eq.length,ep;for(;em<el;em++){ep=eq[em];if(eo.call(en||ep,ep,em,el)===false){break}}},clear:function(){this.array=[];this.keys=[];this.map={}}});b$._private.ArrayMap=h;var aI=window.DOMParser;if(!aI){aI=function(){this.baseURI=null};aI.prototype.parseFromString=function(en,el){var em=new ActiveXObject("Microsoft.XMLDOM");try{em.setProperty("SelectionLanguage","XPath")}catch(eo){}em.async=false;em.preserveWhiteSpace=true;em.validateOnParse=false;em.resolveExternals=false;em.loadXML(en);return em}}var cZ=window.XMLSerializer;if(!cZ){cZ=function(){};cZ.prototype.serializeToString=function(el){return el.nodeType==9?el.xml.replace(/\s+$/g,""):el.xml}}var bg="Microsoft.XMLDOM";var aU="MSXML2.XSLTemplate";var cA="MSXML2.FreeThreadedDOMDocument";var ba="http://www.w3.org/1999/XSL/Transform";var c7="SelectionNamespaces";var dk='xmlns:xsl="'+ba+'"';var d0="//xsl:output";var cl=window.XSLTProcessor;if(!cl){cl=function(){this._template=new bL(aU)};cl.prototype.importStylesheet=function(en){var em=new bL(cA);em.loadXML(new cL().serializeToString(en));em.setProperty(c7,dk);var el=em.selectSingleNode(d0);this._template.stylesheet=em;this._processor=this._template.createProcessor();this._parameters={};this._method=el?el.getAttribute("method"):"xml"};cl.prototype.clearParameters=function(){var em,el;for(em in this._parameters){if(this._parameters.hasOwnProperty(em)){for(el in this._parameters[em]){if(this._parameters[em].hasOwnProperty(el)){this.removeParameter(em,el)}}}}this._parameters={}};cl.prototype.getParameter=function(en,em){if(en==null){en=""}var el=this._parameters[en];if(el&&el[em]){return el[em]}return null};cl.prototype.removeParameter=function(en,em){if(en==null){en=""}if(en){this._processor.addParameter(em,"",en)}else{this._processor.addParameter(em,"")}var el=this._parameters[en];if(el){delete el[em]}};cl.prototype.setParameter=function(em,el,en){if(em==null){em=""}if(em){this._processor.addParameter(el,en,em)}else{this._processor.addParameter(el,en)}if(!this._parameters[em]){this._parameters[em]={}}this._parameters[em][el]=en};cl.prototype.reset=function(){this._processor=null;this._parameters={};this._method="xml"};cl.prototype.transformToDocument=function(en){var em=this._processor,el=new bL(bg);if(!em){throw cu("NOT_INITIALIZED")}em.input=en;em.output=el;em.transform();return el};cl.prototype.transformToFragment=function(ep,el){var eo=this._processor,en=new bL(bg),em=el.createDocumentFragment();if(!eo){throw cu("NOT_INITIALIZED")}eo.input=ep;eo.output=en;eo.transform();while(en.hasChildNodes()){em.appendChild(en.firstChild)}return em}}window.DOMParser=this.DOMParser=aI;window.XMLSerializer=this.XMLSerializer=cZ;new function(){var eo=function(){};var eC=Function.prototype.call;var eA=Array.prototype;var en=Object.prototype;var eq=eA.slice;if(!Function.prototype.bind){Function.prototype.bind=function(eG){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var eJ=eq.call(arguments,1),eI=this,eH=function(){return eI.apply(this instanceof eo&&eG?this:eG,eJ.concat(eq.call(arguments)))};eo.prototype=this.prototype;eH.prototype=new eo();return eH}}var eD=eC.bind(en.toString);if(!Object.keys){var eE=true,em=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],eu=em.length;for(var eF in {toString:null}){eE=false}Object.keys=function ex(eI){var eM=Object.prototype.hasOwnProperty;if((typeof eI!="object"&&typeof eI!="function")||eI===null){throw new TypeError("Object.keys called on a non-object")}var eK=[];for(var eH in eI){if(eM.call(eI,eH)){eK.push(eH)}}if(eE){for(var eJ=0,eL=eu;eJ<eL;eJ++){var eG=em[eJ];if(eM.call(eI,eG)){eK.push(eG)}}}return eK}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(eJ,eG){eG=arguments.length<2?0:ev(eG);if(eG<0){eG=Math.max(this.length-eG,0)}for(var eI=eG,eH=this.length;eI<eH;eI++){if(this[eI]===eJ){return eI}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(eI,eG){eG=arguments.length<2?this.length:ev(eG);if(eG<0){eG=this.length-eG}eG=Math.min(eG,this.length-1);for(var eH=eG;eH>=0;eH--){if(this[eH]===eI){return eH}}return -1}}if(!Array.prototype.every){Array.prototype.every=function(eJ,eG){if(!(eJ instanceof Function)){throw new TypeError()}for(var eI=0,eH=this.length;eI<eH;eI++){if(this.hasOwnProperty(eI)){if(!eJ.call(eG,this[eI],eI,this)){return false}}}return true}}if(!Array.prototype.some){Array.prototype.some=function(eJ,eG){if(!(eJ instanceof Function)){throw new TypeError()}for(var eI=0,eH=this.length;eI<eH;eI++){if(this.hasOwnProperty(eI)){if(eJ.call(eG,this[eI],eI,this)){return true}}}return false}}if(!Array.prototype.forEach){Array.prototype.forEach=function(eJ,eG){if(!(eJ instanceof Function)){throw new TypeError()}for(var eI=0,eH=this.length;eI<eH;eI++){if(this.hasOwnProperty(String(eI))){eJ.call(eG,this[eI],eI,this)}}}}if(!Array.prototype.map){Array.prototype.map=function(eK,eG){if(!(typeof(eK)=="function")){throw new TypeError()}var eH=[];for(var eJ=0,eI=this.length;eJ<eI;eJ++){eH.push(eK.call(eG,this[eJ],eJ,this))}return eH}}if(!Array.prototype.filter){Array.prototype.filter=function(eK,eG){if(!(eK instanceof Function)){throw new TypeError()}var eH=[];for(var eJ=0,eI=this.length;eJ<eI;eJ++){if(eK.call(eG,this[eJ],eJ,this)){eH.push(this[eJ])}}return eH}}if(!Array.prototype.reduce){Array.prototype.reduce=function(eK,eH){if((this.length==0&&eH===undefined)||!(eK instanceof Function)){throw new TypeError()}var eG=arguments.length<2;for(var eJ=0,eI=this.length;eJ<eI;eJ++){if(eG){eH=this[eJ];eG=false}else{eH=eK(eH,this[eJ],eJ,this)}}return eH}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function(eJ,eH){if(this.length==0||!(eJ instanceof Function)){throw new TypeError()}var eG=arguments.length<2;for(var eI=this.length-1;eI>=0;eI--){if(eG){eH=this[eI];eG=false}else{eH=eJ(eH,this[eI],eI,this)}}return eH}}function ev(eH){var eG=Number(eH);return isNaN(eG)?0:eG>0?Math.floor(eG):Math.ceil(eG)}function ez(eG){return eG<10?"0"+eG:String(eG)}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(eG){return this.getUTCFullYear()+"-"+ez(this.getUTCMonth()+1)+"-"+ez(this.getUTCDate())+"T"+ez(this.getUTCHours())+":"+ez(this.getUTCMinutes())+":"+ez(this.getUTCSeconds())+"Z"}}if(typeof String.prototype.toJSON!=="function"){String.prototype.toJSON=function(eG){return this.valueOf()}}if(typeof Number.prototype.toJSON!=="function"){Number.prototype.toJSON=function(eG){return this.valueOf()}}if(typeof Boolean.prototype.toJSON!=="function"){Boolean.prototype.toJSON=function(eG){return this.valueOf()}}var ey=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var eB={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function es(eG){ey.lastIndex=0;return ey.test(eG)?'"'+eG.replace(ey,function(eH){var eI=eB[eH];return typeof eI==="string"?eI:"\\u"+("0000"+eH.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+eG+'"'}var el="";var et="";var ep={};function ew(eN,eO){var eM=null,eK=0,eI=el,eH=[],eL=eO[eN];if(eL&&typeof eL==="object"&&typeof eL.toJSON==="function"){eL=eL.toJSON(eN)}if(typeof ep==="function"){eL=ep.call(eO,eN,eL)}switch(typeof eL){case"string":return es(eL);case"number":return isFinite(eL)?String(eL):"null";case"boolean":case"null":return String(eL);case"object":if(!eL){return"null"}el+=et;if(Object.prototype.toString.apply(eL)==="[object Array]"){eK=eL.length;for(var eJ=0;eJ<eK;eJ+=1){eH[eJ]=ew(eJ,eL)||"null"}eM=eH.length===0?"[]":el?"[\n"+el+eH.join(",\n"+el)+"\n"+eI+"]":"["+eH.join(",")+"]";el=eI;return eM}if(ep&&typeof ep==="object"){eK=ep.length;for(var eJ=0;eJ<eK;eJ+=1){var eG=ep[eJ];if(typeof eG==="string"){eM=ew(eG,eL);if(eM){eH.push(es(eG)+(el?": ":":")+eM)}}}}else{for(var eG in eL){if(Object.hasOwnProperty.call(eL,eG)){eM=ew(eG,eL);if(eM){eH.push(es(eG)+(el?": ":":")+eM)}}}}eM=eH.length===0?"{}":el?"{\n"+el+eH.join(",\n"+el)+"\n"+eI+"}":"{"+eH.join(",")+"}";el=eI;return eM}}if(!window.JSON){window.JSON={}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(eI,eG,eH){el="";et="";if(typeof eH==="number"){for(var eJ=0;eJ<eH;eJ+=1){et+=" "}}else{if(typeof eH==="string"){et=eH}}ep=eG;if(eG&&typeof eG!=="function"&&(typeof eG!=="object"||typeof eG.length!=="number")){throw new Error("JSON.stringify")}return ew("",{"":eI})}}if(typeof JSON.parse!=="function"){var er=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(eG,eH){function eI(eO,eN){var eL=null,eM=eO[eN];if(eM&&typeof eM==="object"){for(var eK in eM){if(Object.hasOwnProperty.call(eM,eK)){eL=eI(eM,eK);if(eL!==undefined){eM[eK]=eL}else{delete eM[eK]}}}}return eH.call(eO,eN,eM)}er.lastIndex=0;if(er.test(eG)){eG=eG.replace(er,function(eK){return"\\u"+("0000"+eK.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(eG.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){var eJ=(new Function("return "+eG))();return typeof eH==="function"?eI({"":eJ},""):eJ}throw new SyntaxError("JSON.parse")}}b$.ecma5={Array:Array,JSON:JSON}};var cU=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");var dT=/%[0-9a-z]{2}/gi;var ce=/[a-zA-Z0-9\-\._~]/;var a1=/(.*@)?([^@:]*)(:.*)?/;function cn(el){var em=unescape(el);return ce.test(em)?em:el.toUpperCase()}function ds(el,eo,en,em){return(eo||"")+en.toLowerCase()+(em||"")}var b5={};var B=ar.extend(function(el){if(el instanceof B){this.scheme=el.scheme;this.authority=el.authority;this.path=el.path;this.query=el.query;this.fragment=el.fragment}else{if(el){var em=cU.exec(el);this.scheme=em[1];this.authority=em[2];this.path=em[3];this.query=em[4];this.fragment=em[5]}}},{scheme:null,authority:null,path:"",query:null,fragment:null,getScheme:function(){return this.scheme},getAuthority:function(){return this.authority},getPath:function(){return this.path},getQuery:function(){return this.query},getFragment:function(){return this.fragment},isAbsolute:function(){return this.scheme&&!this.fragment},isSameDocumentAs:function(el){return el.scheme==this.scheme&&el.authority==this.authority&&el.path==this.path&&el.query==this.query},equals:function(el){return this.isSameDocumentAs(el)&&el.fragment==this.fragment},normalize:function(){this.removeDotSegments();if(this.scheme){this.scheme=this.scheme.toLowerCase()}if(this.authority){this.authority=this.authority.replace(a1,ds).replace(dT,cn)}if(this.path){this.path=this.path.replace(dT,cn)}if(this.query){this.query=this.query.replace(dT,cn)}if(this.fragment){this.fragment=this.fragment.replace(dT,cn)}},resolve:function(em){var el=new B();if(this.scheme){el.scheme=this.scheme;el.authority=this.authority;el.path=this.path;el.query=this.query}else{el.scheme=em.scheme;if(this.authority){el.authority=this.authority;el.path=this.path;el.query=this.query}else{el.authority=em.authority;if(this.path==""){el.path=em.path;el.query=this.query||em.query}else{if(this.path.charAt(0)=="/"){el.path=this.path;el.removeDotSegments()}else{if(em.authority&&em.path==""){el.path="/"+this.path}else{el.path=em.path.substring(0,em.path.lastIndexOf("/")+1)+this.path}el.removeDotSegments()}el.query=this.query}}}el.fragment=this.fragment;return el},removeDotSegments:function(){var en=this.path.split("/"),el=[],eo,ep=en[0]=="";if(ep){en.shift()}var em=en[0]==""?en.shift():null;while(en.length){eo=en.shift();if(eo==".."){el.pop()}else{if(eo!="."){el.push(eo)}}}if(eo=="."||eo==".."){el.push("")}if(ep){el.unshift("")}this.path=el.join("/")},toString:function(){var el="";if(this.scheme){el+=this.scheme+":"}if(this.authority){el+="//"+this.authority}el+=this.path;if(this.query){el+="?"+this.query}if(this.fragment){el+="#"+this.fragment}return el}},{resolve:function(eo,em){var el=b5[eo]||(b5[eo]=new B(eo));var en=b5[em]||(b5[em]=new B(em));return el.resolve(en).toString()}});b$.module("b$._private.uri",function(){this.URI=B});var bV=b$.Class.extend(function(){this.parameterNames={};this.namespaces={}},{parameterNames:null,setParameter:function(el,em){this.parameterNames[el]=em},getParameter:function(el){return this.parameterNames[el]},canSetParameter:function(el,em){return true},namespaces:null,getNamespace:function(el){return this.namespaces[el]},registerNamespace:function(el){this.namespaces[el.namespaceURI]=el}},null,"BDOMConfiguration");var n=b$.Class.extend(null,{documents:[],hasFeature:function(el,em){return false},createDocumentType:function(em,en,el){},createDocument:function(eo,em,ep){var el=new de();this.documents.push(el);el.implementation=this;el.domConfig=new bV();if(em){var en=el.createElementNS(eo,em);el.appendChild(en)}return el},destroyDocument:function(el){var em=el.documentElement;if(em){em.destroy()}el.dispatchCustomEvent("destroy",false,false);this.documents.splice(this.documents.indexOf(el),1)},getFeature:function(el,em){}});var cc=ar.extend(function(el,em){this.node=em;this.ownerDocument=el;this.childNodes=new cf();this.attributes=new b1();this._jxid="id"+window.Math.floor(window.Math.random()*10000000)},{nodeName:null,nodeValue:null,nodeType:1,parentNode:null,childNodes:null,firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,ownerDocument:null,namespaceURI:null,prefix:null,localName:null,destroy:function(){cp(this);return},insertBefore:function(em,el){bM(this,em,el);if(this.nodeType==9){this._checkin(em)}return em},replaceChild:function(em,el){cq(this,em,el);if(this.nodeType==9){this._checkout(el);this._checkin(em)}return em},removeChild:function(el){if(this.nodeType==9){this._checkout(el)}a2(this,el);return el},appendChild:function(el){cr(this,el);if(this.nodeType==9){this._checkin(el)}return el},hasChildNodes:function(){return this.node.hasChildNodes()},cloneNode:function(em){var el=this.node.cloneNode(em);return this.ownerDocument.importNode(el,em)},hasAttributes:function(el){if(this.node.hasAttributes){return this.node.hasAttributes(el)}else{return this.node.nodeType==L?this.node.attributes.length>0:false}},compareDocumentPosition:function(el){return aB(this,el)},isSameNode:function(el){return(this.node==el.node)},lookupPrefix:function(el){return X(this.node,el)},isDefaultNamespace:function(el){return M(this.node,el)},lookupNamespaceURI:function(el){return aj(this.node,el)},toXML:function(){return a(this)}});function aB(eq,ep){if(ep==eq){return 0}var en=[],es,eu,em=[],er,et,eo,el;for(eo=eq;eo;eo=eo.parentNode){en.push(eo)}for(eo=ep;eo;eo=eo.parentNode){em.push(eo)}if(((eq.ownerDocument||eq)!=(ep.ownerDocument||ep))||(en[en.length-1]!=em[em.length-1])){return 32|1}for(el=Math.min(es=en.length,er=em.length);el;--el){if((eu=aChain1[--es])!=(et=em[--er])){if(!et.nextSibling){return 4}if(!eu.nextSibling){return 1}for(eo=et.previousSibling;eo;eo=eo.previousSibling){if(eo==eu){return 4}}return 2}}return es<er?4|16:2|8}function b2(em,el){return em.dispatchEvent(el)}function bM(en,ep,eo){if(ep.parentNode){a2(ep.parentNode,ep)}if(en.node){en.node.insertBefore(ep.node,eo.node)}ep.parentNode=en;var em=eo.previousSibling;if(em){ep.previousSibling=em;em.nextSibling=ep}else{en.firstChild=ep}ep.nextSibling=eo;eo.previousSibling=ep;en.childNodes.add(ep,en.childNodes.indexOf(eo));var el=new b$.bdom.events.MutationEvent();el.initMutationEvent("DOMNodeInserted",true,false,en,null,null,null,null);b2(ep,el);return ep}function a2(eo,ep){var en=ep.previousSibling,el=ep.nextSibling;if(eo.node){eo.node.removeChild(ep.node)}var em=new b$.bdom.events.MutationEvent();em.initMutationEvent("DOMNodeRemoved",true,false,eo,null,null,null,null);b2(ep,em);if(en){en.nextSibling=el}else{eo.firstChild=el}if(el){el.previousSibling=en}else{eo.lastChild=en}ep.parentNode=null;ep.previousSibling=null;ep.nextSibling=null;return eo.childNodes.remove(ep)}function cq(em,en,el){bM(em,en,el);return a2(em,el)}function cr(en,eo){if(eo.parentNode){a2(eo.parentNode,eo)}if(en.node){en.node.appendChild(eo.node)}eo.parentNode=en;var em=en.lastChild;if(em){eo.previousSibling=em;em.nextSibling=eo}else{en.firstChild=eo}en.lastChild=eo;en.childNodes.add(eo);var el=new b$.bdom.events.MutationEvent();el.initMutationEvent("DOMNodeInserted",true,false,en,null,null,null,null);b2(eo,el);return eo}cc.ELEMENT_NODE=1;cc.ATTRIBUTE_NODE=2;cc.TEXT_NODE=3;cc.CDATA_SECTION_NODE=4;cc.ENTITY_REFERENCE_NODE=5;cc.ENTITY_NODE=6;cc.PROCESSING_INSTRUCTION_NODE=7;cc.COMMENT_NODE=8;cc.DOCUMENT_NODE=9;cc.DOCUMENT_TYPE_NODE=10;cc.DOCUMENT_FRAGMENT_NODE=11;cc.NOTATION_NODE=12;cc.XPATH_NAMESPACE_NODE=13;function am(){throw new Error("Can not set read-only property.")}function c5(el,eo){eo.push(el);var em=el.childNodes;for(var en=0;en<em.length;en++){c5(em[en],eo)}}function cp(el){var en=[];c5(el,en);if(el.nodeType==3){if(el.htmlNode&&el.htmlNode.parentNode){el.htmlNode.parentNode.removeChild(el.htmlNode)}}if(el.parentNode){el.parentNode.removeChild(el)}for(var em=0;em<en.length;em++){el=en[em];el.dispatchCustomEvent("destroy",false,false);el.node=null;el.attributes=null;el.childNodes=null;el.local_listeners=null;el.layout=null;if(el.ownerDocument){delete el.ownerDocument.all[el._jxid]}el.ownerDocument=null;delete el}}function ej(el){return el.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function b0(el){return el.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function a(eq){var em=[],el=0;switch(eq.nodeType){case 1:var er,ep;em.push("<"+eq.nodeName);ep=eq.attributes;for(var eo=0,en=ep.length;eo<en;eo++){if(ep[eo].nodeName!="_jxid"){em.push(" "+ep[eo].nodeName+'="'+ej(ep[eo].nodeValue+"")+'"')}}if(eq.hasChildNodes()){em.push(">");while(el<eq.childNodes.length){em.push(a(eq.childNodes[el++]))}em.push("</"+eq.nodeName+">")}else{em.push("/>")}break;case 3:em.push(ej(eq.nodeValue));break;case 4:em.push("<![CDATA["+eq.nodeValue+"]]>");break;case 7:em.push("<?"+eq.nodeName+" "+eq.nodeValue+"?>");break;case 8:em.push("<!--"+eq.nodeValue+"-->");break;case 11:case 9:while(el<eq.childNodes.length){em.push(a(eq.childNodes[el++]))}break}if(eq.nextSibling){em.push("\n")}return em.join("")}function dz(en,eo){for(var ep in eo){if(eo.hasOwnProperty(ep)){if(!en[ep]){en[ep]=[]}for(var em=0,el=eo[ep].length;em<el;em++){en[ep].push(eo[ep][em])}}}return en}cc.extend=function(el,eo,er){var eq=(eo&&eo.listeners)?dz({},eo.listeners):{};var ep=this.prototype.listeners;for(var es in ep){if(ep.hasOwnProperty(es)){for(var en=0,em=ep[es].length;en<em;en++){if(!eq[es]){eq[es]=[]}eq[es].push(ep[es][en])}}}el=ar.extend.call(this,el,eo,er);el.prototype.listeners=eq;return el};var cf=function(el){var em=[];em.item=dF;em.add=ao;em.remove=dm;return em};function dF(el){return this[el]}function ao(em,el){if(arguments.length>1){this.splice(el,0,em)}else{this.push(em)}return em}function dm(el){this.splice(this.indexOf(el),1);return el}var bX=b$.Class.extend.call(Array,null,null,b$.Class);var b1=bX.extend(function(){bX.call(this);this._map={};this._nsmap={}},{getNamedItem:function(el){return this._map[el]},setNamedItem:function(el){this._map[el.nodeName]=el;this.push(el)},removeNamedItem:function(em){var el=this._map[em];this.splice(this.indexOf(el),1);delete this._map[em];return el},item:function(el){return this[el]},getNamedItemNS:function(el,em){if(this._nsmap[node.namespaceURI]){return this._nsmap[node.namespaceURI][em]}},setNamedItemNS:function(el){if(!this._nsmap[el.namespaceURI]){this._nsmap[el.namespaceURI]={}}this._nsmap[el.namespaceURI][el.localName]=el;this.push(el)},removeNamedItemNS:function(em,en){if(this._nsmap[em]){var el=this._nsmap[em][en];this.splice(this.indexOf(el),1);delete this._nsmap[em][en];return el}}});var cd=cc.extend(function(el){cc.apply(this,arguments);this.name=null;this.specified=null;this.value=null;this.ownerElement=null},{nodeType:2,toString:function(){return"Attr"}});var dZ=cc.extend(function(eq,en,ep,eo){if(en){if(en.namespaceURI){eo=en;en=null}}if(!en){en=this.namespaceURI}if(!ep){ep=this.localName}else{if(!this.localName){this.localName=ep}}this.nodeName=(this.prefix)?this.prefix+":"+this.localName:this.localName;this.tagName=this.nodeName;if(!eq){console.log("no bdomDocument")}if(!ep){console.log("no localName")}if(!eo){if(en){eo=("createElementNS" in eq.node)?eq.node.createElementNS(en,ep):eq.node.createNode(1,ep,en)}else{eo=eq.node.createElement(ep)}}this.ownerDocument=eq;this.node=eo;this.childNodes=new cf();this.attributes=eo.attributes;var em;if(eq&&eq._newIDhack){em=eq._newIDhack;eq._newIDhack=null}else{if(eo.getAttribute("_jxid")){em=eo.getAttribute("_jxid")}else{if(eo.getAttribute("id")){em=eo.getAttribute("id")}else{em="id"+window.Math.floor(window.Math.random()*10000000)}}}this._jxid=em;eo.setAttribute("_jxid",this._jxid);var er=a0(eo,"http://www.w3.org/2001/xml-events","event");if(er){var el=a0(eo,"http://www.w3.org/2001/xml-events","observer");if(!el){el=eq.getControllerFromModel(eo.parentNode)}if(el){var es=a0(eo,"http://www.w3.org/2001/xml-events","handler");if(es){if(es.indexOf("#")==0){var et=es.substring(1);es=window[et]}else{es=function(){alert("Some handler")}}if(es){el.addEventListener(er,es,false)}}}}},{nodeType:1,toString:function(){return"BDOMElement "+this.localName},getAttribute:function(em){var el=this.attributes.getNamedItem(em);return(el)?el.value:null},getAttributeNS:function(en,em){var el=this.attributes.getNamedItemNS(en,em);return(el)?el.value:null},setAttribute:function(eo,ep){var en=(this.node.getAttribute(eo)!==null),em=en?this.node.getAttribute(eo):null;if(em!=ep){this.node.setAttribute(eo,ep);var el=this.ownerDocument.createEvent("MutationEvent");el.initMutationEvent("DOMAttrModified",true,false,null,em,ep,eo,(en)?1:2);this.dispatchEvent(el);if(this.ownerDocument.all[this._jxid]){this.mapAttribute(eo,ep)}}},setAttributeNS:function(eq,en,ep){ep=String(ep);if(eq==null){return this.setAttribute(en,ep)}var eo=en.split(":").pop(),em=this.ownerDocument.createEvent("MutationEvent"),el=null;if(bNew){el=a0(this.node,eq,eo);if(el==ep){return}em.initMutationEvent("DOMAttrModified",true,false,null,el,ep,en,b$.bdom.events.MutationEvent.MODIFICATION)}else{em.initMutationEvent("DOMAttrModified",true,false,null,null,ep,en,b$.bdom.events.MutationEvent.ADDITION)}aN(this.node,eq,en,ep);this.dispatchEvent(em);if(this.ownerDocument.all[this._jxid]){this.mapAttribute(en,ep)}},removeAttribute:function(eo){var en=this.attributes.getNamedItem(eo);if(!en){return}var em=en.value,el=this.ownerDocument.createEvent("MutationEvent");el.initMutationEvent("DOMAttrModified",true,false,null,em,null,eo,b$.bdom.events.MutationEvent.REMOVAL);this.attributes.removeNamedItem(eo);this.dispatchEvent(el);if(this.ownerDocument.all[this._jxid]){this.mapAttribute(eo,null)}},removeAttributeNS:function(ep,eo){if(ep==null){return this.removeAttribute(eo)}var en=this.attributes.getNamedItemNS(ep,eo);if(!en){return}var em=en.value,el=this.ownerDocument.createEvent("MutationEvent");el.initMutationEvent("DOMAttrModified",true,false,null,em,null,eo,b$.bdom.events.MutationEvent.REMOVAL);this.attributes.removeNamedItemNS(ep,eo);this.dispatchEvent(el);if(this.ownerDocument.all[this._jxid]){this.mapAttribute(sName,null)}},hasAttribute:function(el){return(this.attributes.getNamedItem(el)!==null)?true:false},hasAttributeNS:function(em,el){return(this.attributes.getNamedItemNS(em,el)!==null)?true:false},insertBefore:function(em,el){return bS(this,em,el)},removeChild:function(el){return l(this,el)},replaceChild:function(em,el){return d5(this,em,el)},appendChild:function(el){return aX(this,el)},getElementsByTagName:function(el){return v(this,this.ownerDocument,"*",el)},getElementsByTagNameNS:function(em,el){return v(this,this.ownerDocument,em,el)},mapAttribute:function(el,em){}},{extend:function(em,en,ep){var el=ar.extend.call(this,em,en,ep);if(el.prototype.namespaceURI&&el.prototype.localName){if(!b$.bdom.namespaces[el.prototype.namespaceURI]){var eo=new ca(el.prototype.namespaceURI)}if(b$.bdom.namespaces[el.prototype.namespaceURI].classes[el.prototype.localName]){console.log("Warning overwriting "+el.prototype.localName)}b$.bdom.namespaces[el.prototype.namespaceURI].registerElement(el.prototype.localName,el)}return el}});function bS(el,en,em){bM(el,en,em);if(el.ownerDocument.all[el._jxid]){el.ownerDocument._checkin(en)}return en}function l(el,em){if(el.ownerDocument.all[el._jxid]){el.ownerDocument._checkout(em)}a2(el,em);return em}function d5(em,en,el){em.ownerDocument._checkout(el);cq(em,en,el);if(em.ownerDocument.all[em._jxid]){em.ownerDocument._checkin(en)}return en}function aX(el,em){cr(el,em);if(el.ownerDocument.all[el._jxid]){el.ownerDocument._checkin(em)}return em}function aK(el,en,em){if(el.offsetParent){el.insertBefore(en,em)}else{bS(el,en,em)}return en}function e(el,em){if(el.offsetParent){el.removeChild(em)}else{l(el,em)}return em}function bh(em,en,el){if(em.offsetParent){em.replaceChild(en,el)}else{d5(em,en,el)}return en}function aR(el,em){if(el.offsetParent){el.appendChild(em)}else{aX(el,em)}return em}var de=cc.extend(function(el,em){this.all={};this.domConfig=el;if(!em){em=new aI().parseFromString('<base xmlns="base" />',"application/xml");em.removeChild(em.documentElement)}this.node=em;this.documentElement=null;this.childNodes=new cf()},{nodeType:9,_resetElementId:function(el,em){if(this.all[el._jxid]){delete this.all[el._jxid];el._jxid=em;this.all[el._jxid]=el;el.node.setAttribute("_jxid",el._jxid)}},_checkin:function(el){bA.call(this,el);Q.call(this,el)},_checkout:function(el){if(el._checkout){el._checkout()}for(var em=0,eo;eo=el.childNodes[em];em++){this._checkout(eo)}var en=this.createEvent("MutationEvent");en.initMutationEvent("DOMNodeRemovedFromDocument",true,false,null,null,null,null,null);el.dispatchEvent(en);delete this.all[el._jxid]},toString:function(){return"BDOMDocument"},get_documentElement:function(){return this.documentElement},insertBefore:function(em,el){if(this.documentElement&&em.nodeType==1){throw"dom exception"}if(em.nodeType==1){this.documentElement=em}cc.prototype.insertBefore.call(this,em,el);return em},removeChild:function(el){if(el.nodeType==1){this.documentElement=null}cc.prototype.removeChild.call(this,el);return el},replaceChild:function(em,el){if(el.nodeType==1){this.documentElement=null}if(em.nodeType==1){this.documentElement=em}cc.prototype.replaceChild.call(this,em,el);return em},appendChild:function(el){if(this.documentElement&&el.nodeType==1){throw"dom exception"}if(el.nodeType==1){this.documentElement=el}cc.prototype.appendChild.call(this,el);return el},get_domConfig:function(){return this.domConfig},set_domConfig:am,createElement:function(el){return this.createElementNS(null,el)},createFromString:function(el){return bP(el,this)[0];return bP(el,this)},createTextNode:function(em,el){return new aD(this,em,el)},createCDATASection:function(em,el){return new U(this,em,el)},createAttribute:function(el,em){return new cd(this,el,em)},importNode:function(eo,el){var en=this.context;this.context={};var em=dU(this,eo,el);en=en;return em},createElementNS:function(eo,eq,ew){var en=eq.split(":"),eu=en.pop(),el=en.pop()||null,et;var er=b$.bdom.getNamespace(eo),ev;if(er){ev=er.getClass(eu);if(!ev||!ev.prototype){ev=dZ;throw"Element not found: "+er.namespaceURI+" "+eu}}else{ev=dZ;throw"Namespace not found: "+eo+" "+eu}var es=new cN(ev,[this].concat([].slice.call(arguments)));var em=ev.attributes;for(et in em){if(em.hasOwnProperty(et)){var ep=es.getAttribute(et);if(ep===null){es.setAttribute(et,em[et])}}}return es},getElementsByTagName:function(el){return v(this,this,"*",el)},getElementsByTagNameNS:function(em,el){return v(this,this,em,el)},getElementById:function(el){return this.all[el]},getControllerFromModel:function(em){switch(em.nodeType){case 9:throw new Error("getControllerFromModel DOCUMENT_NODE");case 1:var el=em.getAttribute("_jxid");if(this.all[el]){return this.all[el]}break;case 3:return new aD(this,em.nodeValue,em);case 4:return new U(this,em.nodeValue,em);case 8:return new U(this,em.nodeValue,em);default:throw new Error("getControllerFromModel unkown type: "+em.nodeType)}}});var bA=function(el){if(this.all[el._jxid]){return}if(el.node.nodeType==1){this.all[el._jxid]=el;var eo;var ep=[];for(var em=0;eo=el.childNodes[em];em++){ep.push(eo)}if(el._checkin){el._checkin()}var en=this.createEvent("MutationEvent");en.initMutationEvent("DOMNodeInsertedIntoDocument",true,false,null,null,null,null,null);el.dispatchEvent(en);for(var em=0;eo=ep[em];em++){bA.call(this,eo)}if(el._checkup){el._checkup()}}else{if(el.node.nodeType==3){this.all[el._jxid]=el;if(el.parentNode&&el.parentNode.insertDisplayChild){el.parentNode.insertDisplayChild(el)}}}};var Q=function(el){var en;if(el.nodeType==1){for(var em=0;en=el.childNodes[em];em++){Q.call(this,en)}if(el.DOMReady){el.DOMReady()}el.dispatchCustomEvent("DOMReady",false,false)}};function cN(en,em){function el(){return en.apply(this,em)}el.prototype=en.prototype;return new el()}function v(et,en,el,eo){var ep,eq,er;if("getElementsByTagNameNS" in et.node){ep=et.node.getElementsByTagNameNS(el,eo)}else{ep=[],aAll=et.node.getElementsByTagName("*"),bNamespaceURIStar=el=="*",bLocalNameStar=eo=="*";for(eq=0,er=aAll.length;eq<er;eq++){if((bNamespaceURIStar||aAll[eq].namespaceURI==el)&&(bLocalNameStar||aAll[eq].baseName==eo||aAll[eq].localName==eo)){ep.push(aAll[eq])}}}var es=[];for(eq=0,er=ep.length;eq<er;eq++){var em=en.getControllerFromModel(ep[eq]);if(em){es.push(em)}}return es}function dU(er,em,es,et){var ev=null;switch(em.nodeType){case 1:var ep=em.namespaceURI,eo=em.localName||em.baseName;if(bQ&&!ep){ep=(function(ew){while(ew=ew.parentNode){if(ew.nodeType==5){break}}if(ew&&ew.parentNode){return ew.parentNode.namespaceURI}return null})(em)}ev=er.createElementNS(ep,em.localName||em.baseName,em.cloneNode(false));if(window.DBG){console.log("................................................................created "+em.localName)}if(et){if(window.DBG){console.log("................................................................append "+em.localName)}if(window.DBG){console.log(et.appendChild)}et.appendChild(ev)}if(es){var el=em.firstChild;while(el){dU(er,el,es,ev);el=el.nextSibling}}return ev;case 3:var eu=em.nodeValue;if(!eu.trim){var en=/^\s+/,eq=/\s+$/;eu=eu.toString().replace(en,"").replace(eq,"")}else{eu=eu.trim()}if(eu!==""){ev=er.createTextNode(em.nodeValue,ev);if(et){et.appendChild(ev)}}return ev;break;case 4:break;case 5:case 7:break;case 8:break;case 9:case 10:default:throw"Not supported "+em.nodeType}return ev}var bF=cc.extend(function(el){cc.apply(this,arguments);this.data=null;this.length=null},{nodeType:-1,toString:function(){return"CharacterData"},substringData:function(eo,en){var em=this.node,el=em.data;if(iOffset<0||eo>el.length||en<0){error.exception(error.SEVERITY_ERROR,em,0,error.MSG_DOMCORE_INDEX_SIZE_ERR)}return el.substr(eo,en)},appendData:function(el){var en=this.node.data;this.node.data+=el;var em=this.ownerDocument.createEvent("MutationEvent");em.initMutationEvent("DOMCharacterDataModified",true,false,this,en,this.node.data,null,null);this.dispatchEvent(em)},insertData:function(ep,el){var eo=this.node,en=eo.data;if(ep<0||ep>en.length){error.exception(error.SEVERITY_ERROR,eo,0,error.MSG_DOMCORE_INDEX_SIZE_ERR)}eo.data=en.substring(0,ep)+el+en.substring(ep);var em=this.ownerDocument.createEvent("MutationEvent");em.initMutationEvent("DOMCharacterDataModified",true,false,this,en,eo.data,null,null);this.dispatchEvent(em)},deleteData:function(ep,eo){var en=this.node,em=en.data;if(ep<0||ep>em.length||eo<0){error.exception(error.SEVERITY_ERROR,en,0,error.MSG_DOMCORE_INDEX_SIZE_ERR)}en.data=em.substring(0,ep)+em.substring(ep+eo);var el=this.ownerDocument.createEvent("MutationEvent");el.initMutationEvent("DOMCharacterDataModified",true,false,this,em,en.data,null,null);this.dispatchEvent(el)},replaceData:function(eq,eo,ep){var en=this.node,em=en.data;if(eq<0||eq>em.length||eo<0){error.exception(error.SEVERITY_ERROR,en,0,error.MSG_DOMCORE_INDEX_SIZE_ERR)}en.data=em.substring(0,eq)+ep;var el=this.ownerDocument.createEvent("MutationEvent");el.initMutationEvent("DOMCharacterDataModified",true,false,this,em,en.data,null,null);this.dispatchEvent(el)}});var aD=bF.extend(function(en,eo,em,el){bF.apply(this,arguments);this.ownerDocument=en;if(!em){em=en.node.createTextNode(eo)}this.node=em;this.nodeValue=this.node.nodeValue;this.htmlNode=document.createTextNode(eo)},{nodeType:3,set_nodeValue:function(el){this.node.nodeValue=el;this.nodeValue=el},injectDisplaySelf:function(){return true},toString:function(){return"BDOMText"}});var U=aD.extend(function(el){aD.apply(this,arguments)},{nodeType:4,toString:function(){return"CDATASection"}});var T={createPreference:function(em,el,eo){var ep=new b$.portal.preferences.PreferenceNode();ep.name=em;el=el.toLowerCase();var en=b$.portal.preferences.datatype[el];if(!en){console.log("dataType for "+em+" not found "+el);en=b$.portal.preferences.datatype.string}ep.dataType=new en();if(typeof eo==String){ep.value=ep.dataType.parseFromString(eo)}else{ep.value=eo}ep.inputType=new b$.portal.preferences.inputType.text();ep.validType=new b$.portal.preferences.validType.none();return ep},resetID:function(el){if(this.ownerDocument.all[this._jxid]){delete this.ownerDocument.all[this._jxid];this._jxid=el;this.ownerDocument.all[this._jxid]=this;this.node.setAttribute("_jxid",this._jxid)}},fireEvent:function(eo,en,el,em){return this.dispatchCustomEvent(eo,en,el,em)},get_nodeName:function(){return this.node.nodeName},set_nodeName:am,get_nodeValue:function(){return this.node.nodeValue},set_nodeValue:am,get_nodeType:function(){return this.node.nodeType},set_nodeType:am,get_parentNode:function(){if(this.node&&this.node.parentNode){switch(this.node.parentNode.nodeType){case 1:return this.ownerDocument.getControllerFromModel(this.node.parentNode);case 9:return this.ownerDocument;case 11:default:return null}}return null},set_parentNode:am,get_childNodes:function(){var en=[];var el=this.node.firstChild;var em;while(el){if(this.node.nodeType==9){em=this.getControllerFromModel(el)}else{em=this.ownerDocument.getControllerFromModel(el)}if(em){en.push(em);em=null}el=el.nextSibling}return en},set_childNodes:am,get_childElements:function(){var em=[];var el=this.node.firstChild;var en=this.ownerDocument;while(el){if(el.nodeType==1){em.push(en.getControllerFromModel(el))}el=el.nextSibling}return em},set_childElements:am,get_firstChild:function(){return this.node.firstChild?this.ownerDocument.getControllerFromModel(this.node.firstChild):null},set_firstChild:am,get_lastChild:function(){return this.node.lastChild?this.ownerDocument.getControllerFromModel(this.node.lastChild):null},set_lastChild:am,get_previousSibling:function(){return this.node.previousSibling?this.ownerDocument.getControllerFromModel(this.node.previousSibling):null},set_previousSibling:am,get_nextSibling:function(){return this.node.nextSibling?this.ownerDocument.getControllerFromModel(this.node.nextSibling):null},set_nextSibling:am,get_ownerDocument:function(){return this.node.nodeType==9?null:this.ownerDocument},set_ownerDocument:am};var ca=b$.Class.extend(function(el){this.namespaceURI=el;this.classes={};b$.bdom.namespaces[el]=this},{namespaceURI:null,listeners:null,classes:null,registerClass:function(em,el){this.classes[em]=el;el.CLASSID=em;return el},getClass:function(el){return this.classes[el]||null},getAllClasses:function(){return this.classes},removeClass:function(el){delete this.classes[el]},registerElement:function(em,el){return this.registerClass(em,el)}},null,"BDOMNamespace");var d9=dZ;d9.prototype.innerDOM=function(ep){var el=this.lastChild;while(el){el.destroy();el=this.lastChild}var eo=bP(ep,this.ownerDocument);for(var en=0,em=eo.length;en<em;en++){this.appendChild(eo[en])}};d9.prototype.getTextContent=function(){return af(this)};b$.module("b$.bdom",function(){b$.bdom.getNamespace=function(ep){return b$.bdom.namespaces[ep]};b$.bdom.namespaces={};this.Namespace=ca;var en=b$._private.types,em=b$.Class,eo=true,el=false;this.domImplementation=new n();this.BOldNode=T;this.Node=cc;this.Document=de;this.CharacterData=bF;this.Attr=cd;this.Element=d9;this.Text=aD;this.CDATASection=U;this.NodeList=cf;this.DOMConfiguration=bV});var Z=new ca("http://backbase.com/2012/base");Z.registerClass("Node",cc);Z.registerClass("Document",de);Z.registerClass("Element",d9);Z.registerClass("CharacterData",bF);Z.registerClass("Text",aD);Z.registerClass("Attr",cd);var b8=b$.Class;var aE=9;var cH=b8.extend(function(){this.bubbles=false;this.cancelable=false;this.currentTarget=null;this.eventPhase=cH.CAPTURING_PHASE;this.target=null;this.timeStamp=(new Date()).getTime();this.type="";this.namespaceURI=null;this.defaultPrevented=false;this._captures=null;this._stopped=false;this._stoppedImmediate=false;this._stoppedHorizontal=false},{initEvent:function(en,em,el){this.type=en;this.bubbles=(em)?true:false;this.cancelable=(el)?true:false},initEventNS:function(em,eo,en,el){this.initEvent(eo,en,el);this.namespaceURI=em},preventDefault:function(){this.defaultPrevented=this.cancelable},stopPropagation:function(){this._stopped=true},stopImmediatePropagation:function(){this.stopPropagation();this.stopHorizontalPropagation();this._stoppedImmediate=true},stopHorizontalPropagation:function(){this._stoppedHorizontal=true},isPropagationStopped:function(){return this._stopped},isImmediatePropagationStopped:function(){return this._stoppedImmediate},isHorizontalPropagationStopped:function(){return this._stoppedHorizontal}},{CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,LISTENER_ENTRY:0});cH.prototype.toString=function(){return""+this.type};var cJ=cH.extend(function(){this.detail=0;cH.call(this)},{initCustomEvent:function(eo,en,el,em){this.initEvent(eo,en,el,em);this.detail=em},initCustomEventNS:function(em,ep,eo,el,en){this.initCustomEvent(ep,eo,el,en);this.namespaceURI=em}});var cY=cH.extend(function(){this.detail=0;this.view=null;cH.call(this)},{initUIEvent:function(ep,eo,en,em,el){this.initEvent(ep,eo,en);this.view=em;this.detail=el},initUIEventNS:function(eo,eq,ep,en,em,el){this.initUIEvent(eq,ep,en,em,el);this.namespaceURI=eo}});var ah=cY.extend(function(){this.relatedTarget=null;cY.call(this)},{initFocusEvent:function(eq,ep,em,el,en,eo){this.initUIEvent(eq,ep,em,el,en);this.relatedTarget=eo}});var d7=cY.extend(function(){this.screenX=0;this.screenY=0;this.clientX=0;this.clientY=0;this.ctrlKey=false;this.altKey=false;this.shiftKey=false;this.metaKey=false;this.button=0;this.relatedTarget=null;cY.call(this)},{initMouseEvent:function(el,eo,eq,er,ev,em,ez,ex,ew,en,ep,ey,eu,et,es){this.initUIEvent(el,eo,eq,er,ev);this.screenX=em;this.screenY=ez;this.clientX=ex;this.clientY=ew;this.ctrlKey=en;this.altKey=ep;this.shiftKey=ey;this.metaKey=eu;this.button=et;this.relatedTarget=es},initMouseEventNS:function(er,el,eo,eq,es,ew,em,eA,ey,ex,en,ep,ez,ev,eu,et){this.initMouseEvent(el,eo,eq,es,ew,em,eA,ey,ex,en,ep,ez,ev,eu,et);this.namespaceURI=er},getModifierState:function(el){switch(el){case"Alt":return this.altKey;case"Control":return this.ctrlKey;case"Meta":return this.metaKey;case"Shift":return this.shiftKey}return false}});var aV=d7.extend(function(){this.wheelDelta=0;d7.call(this)},{initMouseWheelEvent:function(el,ep,er,es,ex,em,eB,ez,ey,ew,et,eo,ev){var en=eo.indexOf("Control")!=-1,eq=eo.indexOf("Alt")!=-1,eA=eo.indexOf("Shift")!=-1,eu=eo.indexOf("Meta")!=-1;this.initMouseEvent(el,ep,er,es,ex,em,eB,ez,ey,en,eq,eA,eu,ew,et);this.wheelDelta=ev},initMouseWheelEventNS:function(eq,el,eo,ep,er,ev,em,ey,ex,ew,eu,es,en,et){this.initMouseWheelEvent(el,eo,ep,er,ev,em,ey,ex,ew,eu,es,en,et);this.namespaceURI=eq}});var V=cY.extend(function(){this.data="";cY.call(this)},{initTextEvent:function(ep,eo,en,em,el){this.initUIEvent(ep,eo,en,em,null);this.data=el},initTextEventNS:function(eo,eq,ep,en,em,el){this.initTextEvent(eq,ep,en,em,el);this.namespaceURI=eo}});var dj=cY.extend(function(){this.keyIdentifier="";this._keyModifiers=null;this.keyLocation=0;this.altKey=false;this.ctrlKey=false;this.metaKey=false;this.shiftKey=false;cY.call(this)},{initKeyboardEvent:function(er,eq,eo,en,el,em,ep){this.initUIEvent(er,eq,eo,en,0);this._keyModifiers=ep||"";this.ctrlKey=ep.indexOf("Control")!=-1;this.altKey=ep.indexOf("Alt")!=-1;this.shiftKey=ep.indexOf("Shift")!=-1;this.metaKey=ep.indexOf("Meta")!=-1;this.keyIdentifier=el;this.keyLocation=em},initKeyboardEventNS:function(ep,es,er,eo,en,el,em,eq){this.initKeyboardEvent(es,er,eo,en,el,em,eq);this.namespaceURI=ep},getModifierState:function(el){return String(this._keyModifiers).indexOf(el)!=-1}},{DOM_KEY_LOCATION_STANDARD:0,DOM_KEY_LOCATION_LEFT:1,DOM_KEY_LOCATION_RIGHT:2,DOM_KEY_LOCATION_NUMPAD:3});var E=cH.extend(function(){this.relatedNode=null;this.prevValue="";this.newValue="";this.attrName="";this.attrChange=0;cH.call(this)},{initMutationEvent:function(es,er,ep,eo,en,eq,el,em){this.initEvent(es,er,ep);this.relatedNode=eo;this.prevValue=en;this.newValue=eq;this.attrName=el;this.attrChange=em},initMutationEventNS:function(es,el,ep,er,eq,em,et,en,eo){this.initMutationEvent(el,ep,er,eq,em,et,en,eo);this.namespaceURI=es}},{MODIFICATION:1,ADDITION:2,REMOVAL:3});var bs=cH.extend(function(){this.severity=0;this.context=null;this.executable=null;this.description="";this.url="";this.line=0;this.arguments=null;cH.call(this)},{initExceptionEvent:function(el,ep,er,eq,es,et,eu,en,em,eo){this.initEvent(el,ep,er);this.severity=eq;this.context=es;this.executable=et;this.description=eu;this.arguments=en;this.url=em;this.line=eo}});var c9=d7.extend(function(){d7.call(this);this.dataTransfer=null},{initDragEvent:function(el,ep,er,es,ew,em,eA,ey,ex,en,eq,ez,ev,eu,et,eo){this.initMouseEvent(el,ep,er,es,ew,em,eA,ey,ex,en,eq,ez,ev,eu,et);this.dataTransfer=eo},initDragEventNS:function(es,el,ep,er,et,ex,em,eB,ez,ey,en,eq,eA,ew,ev,eu,eo){this.initDragEvent(el,ep,er,et,ex,em,eB,ez,ey,en,eq,eA,ew,ev,eu,eo);this.namespaceURI=es}});var bY=function bY(eo,em){em.target=eo;em._captures=true;em.aStackTargets=[eo];em.iStackIndex=1;em.iStackLimit=0;var el=em instanceof cY,eq=em.bubbles||em._captures,er=false;if(eq||el){if(!eo.node){var ep=eo;while(ep){if(ep.getBubbleParent){ep=ep.getBubbleParent();if(eq){em.aStackTargets[em.iStackIndex++]=ep}}else{ep=null}}if(!eq){em.iStackIndex=1}}else{if(eo.node.nodeType==L){var en=eo.parentNode;for(;en&&en.nodeType!=aE;en=en.parentNode){if(eq){em.aStackTargets[em.iStackIndex++]=en}}if(en&&en.nodeType==aE){em.aStackTargets[em.iStackIndex++]=eo.ownerDocument}if(!eq){em.iStackIndex=1}}}}em.iStackLength=em.iStackIndex;dA(eo,em);if(er){em.preventDefault()}return !em.defaultPrevented};var dA=function dA(em,el){while(!el._stopped){switch(el.eventPhase){case cH.BUBBLING_PHASE:if(el.bubbles&&++el.iStackIndex<el.iStackLength){el.currentTarget=el.aStackTargets[el.iStackIndex]}else{return}break;case cH.AT_TARGET:if(el.bubbles&&el.iStackLength>1){el.iStackIndex++;el.currentTarget=el.aStackTargets[el.iStackIndex];el.eventPhase=cH.BUBBLING_PHASE}else{return}break;case cH.CAPTURING_PHASE:default:if(el._captures&&--el.iStackIndex>0){el.eventPhase=cH.CAPTURING_PHASE}else{el.iStackIndex=0;el.eventPhase=cH.AT_TARGET}el.currentTarget=el.aStackTargets[el.iStackIndex]}el.eventStage=cH.LISTENER_ENTRY;if(!(el.iStackLimit&&(el.iStackIndex<el.iStackLimit))){dM(el)}}};var d8=function(el,em){while(el){em.push(el);if(el.controller){break}el=el.parentNode}return el};var dM=function dM(eo){var em=[];var eq=eo.currentTarget,en,el,ep=[];if(eq.local_listeners){el=eq.local_listeners["*"];en=eq.local_listeners[eo.type];if(en||el){if(el){if(en){el=el.concat(en)}}else{el=en}d1(eo,cB(eo,el),em)}}if(eo._stoppedHorizontal){return}if(eq&&eq.constructor.handlers&&eo.eventPhase!==cH.CAPTURING_PHASE){if(eq.constructor.handlers[eo.type]){eq.constructor.handlers[eo.type].apply(eo.currentTarget,[eo])}}eo._stoppedHorizontal=false};var d1=function(en,ep,el){if(ep[1].length){for(var eo=0,em=el.length;eo<em;eo++){bW(en,ep[1],el[eo]);if(en._stoppedHorizontal){return}}}if(ep[0].length){bW(en,ep[0]);if(en._stoppedHorizontal){return}}};var cB=function(ep,eo){var er=[],el=[];var en=(ep.eventPhase==cH.CAPTURING_PHASE);for(var eq=0,em=eo.length;eq<em;eq++){if(((eo[eq].useCapture)?true:false)==en){if(eo[eq].viewMatch){el.push(eo[eq])}else{er.push(eo[eq])}}}return[er,el]};var bW=function(en,ep,em){en.currentView=em;for(var eo=0,el=ep.length;eo<el;eo++){var eq=ep[eo];if(!eq.viewMatch||(b$.selector.match(en.currentView,eq.viewMatch))){if(eq.bStopPropagate){en.stopPropagation()}if(eq.bDefaultActionCancel){en.preventDefault()}if(eq.context){eq.fn.apply(eq.context,[en])}else{eq.fn.apply(en.currentTarget,[en])}if(en._stoppedHorizontal||!en.currentTarget.node){return}if(en.target&&!en.target.node){en.target=null}}}};var ct=function(el,em,en){if(el.node.nodeType==L){O(el.ownerDocument,el.node,em,en)}};var L=1;var eb=3;var O=function(et,es,eq,en){var er=et.getControllerFromModel(es);if(er){var ep=es.firstChild;var em=[];while(ep){if(ep.nodeType==L){em.push(ep)}ep=ep.nextSibling}cS(er,eq,en);for(var eo=0,el=em.length;eo<el;eo++){O(et,em[eo],er,en)}}};var cS=function(en,em,eo){var el=new E;el.initMutationEvent(eo,false,false,em,null,null,null,null);en.dispatchEvent(el);return};var A={createEvent:function(el){switch(el.replace(/s$/,"")){case"Event":return new cH();case"CustomEvent":return new cJ();case"UIEvent":return new cY();case"TextEvent":return new V();case"MouseEvent":return new d7();case"MouseWheelEvent":return new aV();case"KeyboardEvent":return new dj();case"MutationEvent":return new E();case"ExceptionEvent":return new bs();case"DragEvent":return new c9();default:throw new Error("Event interface not supported!",arguments,0)}}};var ci={dispatchEvent:function(el){return bY(this,el)},dispatchCustomEvent:function(ep,eo,em,en){var el=new cJ();el.initCustomEventNS(null,ep,eo,em,en);return bY(this,el)},addEventListener:function(en,eo,el,em){this.addEventListenerNS(null,en,eo,el,em)},addEventListenerNS:function(em,eo,eq,el,en){if(!this.local_listeners){this.local_listeners={}}if(!this.local_listeners[eo]){this.local_listeners[eo]=[]}var ep={};ep.fn=eq;ep.namespaceURI=em;ep.useCapture=el;ep.context=en;this.local_listeners[eo].push(ep)},removeEventListener:function(en,eo,el,em){this.removeEventListenerNS(null,en,eo,el,em)},removeEventListenerNS:function(eo,er,es,el,eq){var en=this.local_listeners[er];if(en){for(var ep=0,em=0;ep<en.length;ep++){if(en[ep].fn==es&&en[ep].useCapture==el&&en[ep].context==eq&&en[ep].namespaceURI==eo){en.splice(ep,1);return}}}}};b$.mixin(b$.bdom.Document.prototype,A);b$.mixin(b$.bdom.Node.prototype,ci);b$.module("b$.bdom.events",function(){var el=function(){return this}();b$.mixin(this,{Event:cH,CustomEvent:cJ,UIEvent:cY,FocusEvent:ah,MouseEvent:d7,MouseWheelEvent:aV,TextEvent:V,KeyboardEvent:dj,MutationEvent:E,ExceptionEvent:bs,DragEvent:c9});this.createDispatchEventAtTargetForAllChildren=ct;this.EventTarget=b$.Class.extend(null);b$.mixin(this.EventTarget.prototype,ci);b$.mixin(b$,ci)});function av(en,eq,ep,em,eo){var el=new b$.bdom.events.CustomEvent();el.initCustomEventNS(null,eq,ep,em,eo);return bY(en,el)}function bP(ez,ey,ev){var em=ez.substring(ez.indexOf("<"),ez.indexOf("?>"));if(em[1]=="?"){ez=ez.substring(ez.indexOf(">")+2,ez.length)}var em=ez.substring(0,ez.indexOf(">"));if(em.indexOf("xmlns=")==-1){em="";var et=ey.documentElement;var ex;var eu=et.attributes;for(var er=0,eo=eu.length;er<eo;er++){var en=eu[er];if(en.name=="xmlns"){em+=' xmlns="'+en.value+'"';ex=true}else{if(en.prefix=="xmlns"){em+=" xmlns:"+(en.baseName||en.localName)+'="'+en.value+'"'}}}if(ev){var eu=ev.attributes;for(var er=0,eo=eu.length;er<eo;er++){var en=eu[er];var el=(en.name.indexOf("xmlns:")!=-1)?en.name.substring(en.name.indexOf(":")+1,en.name.length):false;if(en.name=="xmlns"&&!ex){em+=' xmlns="'+en.value+'"';ex=true}else{if(en.prefix=="xmlns"){em+=" xmlns:"+(en.baseName||en.localName)+'="'+en.value+'"'}else{if(el){em+=" xmlns:"+el+'="'+en.value+'"'}}}}}if(!ex){em+=' xmlns="http://www.w3.org/1999/xhtml"'}}else{em=""}ez='<bbb:div xmlns:bbb="http://www.w3.org/1999/xhtml"'+em+">"+ez+"</bbb:div>";var es=new aI().parseFromString(ez,"application/xml");if(!es||!es.documentElement||es.getElementsByTagName("parsererror").length){console.log("Invalid XML: "+ez);console.dirxml(es)}var eq=[];var ep=es.documentElement.firstChild;while(ep){var ew=ey.importNode(ep,true);if(ew){eq.push(ey.importNode(ep,true))}ep=ep.nextSibling}return eq}b$.module("b$.bdom.util",function(){var er={};var eq='<!DOCTYPE html [<!ENTITY nbsp,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,times,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,divide,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,euro "&#8364;",trade "&#8482;">]>'.split(",");for(var ep=160;ep<256;ep++){eq[ep-160]=eq[ep-160]+' "&#'+ep+';"'}er.HTMLEntities=eq.join("><!ENTITY ")+"\n";er.parseFromString=function(eC,eD){var eB=new Date();var eF=new aI();if(document.all){var eA=eC.indexOf("<?xml ");if(eA>=0){eC=eC.substr(eC.indexOf("?>",eA+1)+2)}if(eD&&eC.indexOf("<!DOCTYPE")<0){eC=er.HTMLEntities+eC}}else{if(eD&&eC.indexOf("<!DOCTYPE")<0){eC=eC.replace(/^[\s]*(<\?xml .*?\?>)?/m,"$1"+er.HTMLEntities)}}try{var ez=eF.parseFromString(eC,"application/xml");return ez}catch(eE){alert(eE);return null}};function et(eA){var ez=b$.bdom.domImplementation.createDocument("http://backbase.com/2012/UADisplay","application");ez.insertDisplayChild=function(eB){eA.body.appendChild(eB.htmlNode)};eA.body.appendChild(ez.documentElement.htmlNode);ez.documentElement.setAttribute("xmlns","http://www.w3.org/1999/xhtml");ez.documentElement.setAttribute("xmlns:d","http://backbase.com/2013/UADisplay");ez.documentElement.setAttribute("xmlns:v","http://backbase.com/2012/view");ez.htmlNode=eA.body;ez.bMoveDisplayChildren=true;el(eA,ez);ez.bMoveDisplayChildren=true}function el(eI,ez,eE){var eJ,eC=0,eD=[],eH=eI.body.getElementsByTagName("script");while(eJ=eH[eC++]){eD.push(eJ)}for(eC=0;eC<eD.length;eC++){eJ=eD[eC];var eL=(eJ.textContent||eJ.innerHTML||eJ.text||"");var eG=eJ.getAttribute("type");if(eG=="text/backbase+xml"||eG=="application/backbase+xml"){if(eL.indexOf('<?xml version="1.0" encoding="UTF-8" standalone="yes"?><page')==0){return}console.log("type:::",eG);var eK=ez.documentElement.insertDisplayChild;ez.documentElement.insertDisplayChild=function(eM){eJ.parentNode.insertBefore(eM.htmlNode,eJ)};var eF=bP(eL,ez,eJ);for(var eB=0,eA=eF.length;eB<eA;eB++){ez.documentElement.appendChild(eF[eB])}ez.documentElement.insertDisplayChild=eK}}}function ev(eB,eA){console.log("parseAndImport");var ez=new aI().parseFromString(eB,"application/xml");if(ez&&ez.documentElement){console.dirxml(ez);return eA.importNode(ez.documentElement,true)}}function em(ez,eA,eB){el(ez,bdoc,eB);if(eB){eB.appendChild(res)}else{eA.appendChild(res)}}function es(ez,eD,eC){if(!eC){eC=[]}if(ez[eD]){ez[eD].apply(ez,eC)}var eB=ez.childNodes;for(var eA=0;eA<eB.length;eA++){es(eB[eA],eD,eC)}}function ex(ez,eB,eD){if(!eD){eD=[]}eB.apply(ez,eD);var eC=ez.childNodes;for(var eA=0;eA<eC.length;eA++){ex(eC[eA],eB,eD)}}var ey=b$.Class.extend(function(){this.hSets={};this.hSets["default"]=[];this.sActiveSet="default"},{getID:function(ez){return null},addToSet:function(ez,eB){if(!ez){ez="default"}if(!this.hSets[ez]){this.hSets[ez]=[]}if(eB.length){this.hSets[ez]=this.hSets[ez].concat(eB)}else{this.hSets[ez].push(eB)}for(var eA=0;eA<eB.length;eA++){eB[eA].reflector=this}},setActiveSet:function(ez){if(!ez){ez="default"}if(this.hSets[ez]){this.sActiveSet=ez}},reflect:function(eA,ez,eB,eC){var eD=this.findMatch(eA);if(eD){var eF=this.getID(eA);var eE=eD.build(eA,ez,eF,eB);if(eC){this.reflectInsert(eA,eC,eE,null,eB)}return eE}},reflectDeep:function(eA,ez,eB,eC){var eD=this.findMatch(eA);if(eD){return eD.buildRecursive(this,eA,ez,eB,eC)}else{return this.buildRecursive(eA,ez,eB,eC)}},buildRecursive:function(eB,eA,eD,eF){var eG=[];var ez=eB.firstChild;while(ez){eG.push(ez);ez=ez.nextSibling}var eE=[];for(var eC=0;eC<eG.length;eC++){eE=eE.concat(this.reflectDeep(eG[eC],eA,eD,eF))}return eE},findMatch:function(ez){var eB=this.hSets[this.sActiveSet];for(var eA=0;eA<eB.length;eA++){if(eB[eA].doMatch(ez)){return eB[eA]}}return null},reflectInsert:function(ez,eB,eE,eC,eA){var eD=this.findMatch(ez);if(eD){eD.insertChild(eB,eE,eC,ez,eA)}else{}},connectToModel:function(ez,eA){var eF=this;var eD=function(eI){var eH=eA.all[eF.getID(eI.target.parentNode)];var eG=eF.reflect(eI.target,eA,eI.target._ssr,eH);eI.target._ssr=null;delete eI.target._ssr};var eE=function(eI){var eH=eA.all[eF.getID(eI.relatedNode)];var eG=eA.all[eF.getID(eI.target)];if(eH){if(!eG){}else{var eJ;if(eI.target.nextSibling){eJ=eA.all[eF.getID(eI.target.nextSibling)];eF.reflectInsert(eH.model,eH,eG,eJ)}else{eF.reflectInsert(eH.model,eH,eG,null)}}}else{console.log("---------------------------- Parent not avaiable yet...");console.log(eI.relatedNode,eI.target)}};var eB=function(eG){if(window.DBG){console.log("model - DOMNodeRemoved",eG.target)}};var eC=function(eI){var eG=eA.all[eF.getID(eI.target)];if(!eG){console.log("No view trg found in debug")}else{var eH=eG.parentNode;if(eH){eH.removeChild(eG);eG.destroy()}}};ez.addEventListener("DOMNodeInsertedIntoDocument",eD);ez.addEventListener("DOMNodeInserted",eE);ez.addEventListener("DOMNodeRemoved",eB);ez.addEventListener("DOMNodeRemovedFromDocument",eC);this.disconnectFromModel=function(eG,eH){eG.removeEventListener("DOMNodeInsertedIntoDocument",eD);eG.removeEventListener("DOMNodeInserted",eE);eG.removeEventListener("DOMNodeRemoved",eB);eG.removeEventListener("DOMNodeRemovedFromDocument",eC)}},disconnectFromModel:function(ez,eA){}});var en=b$.Class.extend(function(ez){for(var eA in ez){if(ez.hasOwnProperty(eA)){this[eA]=ez[eA]}}},{match:"",doMatch:function(ez){if(ez.localName==this.match){return true}return false},buildRecursive:function(eH,eF,eJ,eE,eI){var ez=[];var eC=eF.firstChild;while(eC){ez.push(eC);eC=eC.nextSibling}var eA=eH.getID(eF);var eG;eG=this.build(eF,eJ,eA,eE);if(eG){if(eI){this.insertChild(eI,eG,null,eF,eE)}eI=eG;eE=null}var eB=[];for(var eD=0;eD<ez.length;eD++){eB=eB.concat(eH.reflectDeep(ez[eD],eJ,eE,eI))}if(eG){return eG}return eB},build:function(eB,eA,eD,eC){var ez=this.getInstance(eB,eA,eD);if(ez){this.initInstance(ez,eB);if(eC){ez.htmlNode=eC;ez.htmlNode.viewController=ez}if(this.fn){this.fn(ez,config)}return ez}},insertChild:function(eB,eD,eC,ez,eA){if(eC){eB.insertBefore(eD,eC)}else{eB.appendChild(eD,eC)}},getInstance:function(eA,ez,eB){},initInstance:function(ez,eA){}});var eo=en.extend(null,{match:"",doMatch:function(ez){return true},buildRecursive:function(eD,eA,ez,eB,eC){console.log("DOMTextReflection.buildRecursive");var eG=eD.getID(eA);var eF;eF=this.build(eA,ez,eG,eB);if(eF){if(eC){var eE=this.reflector.findMatch(eC);if(eE){eE.insertChild(eC,eF,null,eA,eB)}}eC=eF;eB=null}if(eF){return eF}return aRes},insertChild:function(eB,eD,eC,ez,eA){},getInstance:function(eA,ez,eB){return ez.createTextNode(eA.nodeValue)},initInstance:function(ez,eA){}});var eu=en.extend(null,{ns:"http://backbase.com/2012/portalView",localName:"baseElement",attr:false,getNS:function(ez){return this.ns},getLocalName:function(ez){return this.localName},match:"",doMatch:function(ez){if(ez.localName==this.match){return true}return false},getInstance:function(eD,eC,eF,eB){eC._newIDhack=eF;var eA=undefined;if(b$.bdom.namespaces[this.getNS(eD)]&&b$.bdom.namespaces[this.getNS(eD)].getClass(this.getLocalName(eD))){var ez=b$.bdom.namespaces[this.getNS(eD)].getClass(this.getLocalName(eD));eA=new ez(eC,this.getNS(eD),this.getLocalName(eD))}if(!ez){var eE=this;if(eB){console.log("Error building: "+this.getNS(eD),this.getLocalName(eD));console.log("Fallingback to: "+this.ns,eD.localName.toLowerCase());var ez=b$.bdom.namespaces[this.ns].getClass(eD.localName.toLowerCase());eA=new ez(eC,this.ns,eD.localName.toLowerCase())}else{b$.portal._private.definition.getResourcesFromConfig(eD.getAttribute("config"),function(){eA=eE.getInstance(eD,eC,eF,true)})}}return eA},initInstance:function(ez,eA){},htmlRelocateChild:function(ez,eA){}});var ew=eu.extend(null,{ns:"http://backbase.com/2012/view",localName:"baseElement",doMatch:function(ez){if(b$.ua.matchesSelector(ez,this.match)){return true}return false},initInstance:function(ez,eA){if(this.attr){if(this.attr==true){for(var eB=0;eB<eA.attributes.length;eB++){ez.setAttribute(eA.attributes[eB].nodeName,eA.attributes[eB].nodeValue)}}else{for(var eD in this.attr){var eC=eA.getAttribute(eD);if(eC!=null){ez.setAttribute(config.attr[eD],eC)}}}}if(this.render===false){ez.htmlNode=eA;ez.htmlNode.viewController=ez}},insertChild:function(eC,ez,eE,eA,eB){if(eE){eC.insertBefore(ez,eE)}else{eC.appendChild(ez)}eB=eA;if(this.render==true&&eB){if(ez.htmlNode&&ez.htmlNode.nodeType){var eD=ez.getDisplay("area");if(!eD){eD=ez.htmlNode}var eF=eB.firstChild;while(eF){eD.appendChild(eF);eF=eB.firstChild}eB.parentNode.insertBefore(ez.htmlNode,eB);eB.parentNode.removeChild(eB)}}},xxxinitInstance:function(ez,eA){if(this.render!=true){ez.htmlNode=html}if(this.fn){this.fn(ez,this)}if(this.render!=true){ez.htmlNode.viewController=ez}bdomParent.ownerDocument.bMoveDisplayChildren=false;bdomParent.appendChild(ez);bdomParent.ownerDocument.bMoveDisplayChildren=true;if(this.render==true&&html){if(ez.htmlNode&&ez.htmlNode.nodeType){var eB=ez.getDisplay("area");if(!eB){eB=ez.htmlNode}var eC=html.firstChild;while(eC){eB.appendChild(eC);eC=html.firstChild}html.parentNode.insertBefore(ez.htmlNode,html);html.parentNode.removeChild(html)}}return ez}});this.DOMReflector=ey;this.DOMReflection=en;this.DOMTextReflection=eo;this.RFL_DOM2Control=eu;this.RFL_HTMLEnhance=ew;this.processTools=er;this.findAndProcessScriptTags=em;this.startup=et;this.easedImportXMLString=bP;this.callMethodRecursively=es;this.callFunctionRecursively=ex});var aq=/[\n\t\r]/g;function bE(){this.divBuilder=document.createElement("div")}function D(em,el){return jQuery(em,el).get(0);this.divBuilder.innerHTML=em;return this.divBuilder.firstChild}function di(em,el){this.divBuilder.innerHTML=em;return this.divBuilder.firstChild}function bm(el,en){var em=[];this._findCaptureClass(el,en,em);return em}function bt(eo,eq,ep){if(eq.nodeType==1){if(this.hasClass(eq,eo)){ep.push(eq)}else{var el=eq.childNodes.length;for(var en=0;en<el;en++){var em=eq.childNodes[en];this._findCaptureClass(eo,em,ep)}}}}function cg(em,el){while(em){if(this.hasClass(em,el)){return em}em=em.parentNode}}function an(el,em){return el.className&&new RegExp("(\\s|^)"+em+"(\\s|$)").test(el.className);return false}function bB(em,en){var el=em.className||"";if(!this.hasClass(em,en)){em.className=el+" "+en}}function q(em,en){var el=em.className||"";if(this.hasClass(em,en)){em.className=el.replace(en,"")}}function y(em,en){if(document.defaultView){var el=document.defaultView.getComputedStyle(em,null);return el?el.getPropertyValue(en):""}else{return em.currentStyle[en]}}function dt(em,en,el){em.style[en]=el}function dW(el,en,em){jQuery(el).bind(en,em)}function s(el){if(!el){el=window.event}el.returnValue=false;if(el.preventDefault){el.preventDefault()}return false}function ap(ep,en){var eo=jQuery(ep,en),el=[];for(var em=0;em<eo.length;em++){el.push(eo.get(em))}return el}function bH(el){return jQuery(el).children().get()}function cm(el){return jQuery(el).find("*").get()}function dB(el){return jQuery(el).contents().get()}function z(el){return jQuery(el).parents().get()}function K(eo,em){if(em=="border"){}else{if(em=="padding"){}else{if(em=="content"){}}}var el=jQuery(eo).offset();var en={x:el.left,y:el.top,left:el.left,top:el.top,w:eo.offsetWidth,h:eo.offsetHeight};return en}function ei(em,el){if(el=="tb"){return parseInt(jQuery(em).css("border-top-width")||0)+parseInt(jQuery(em).css("border-bottom-width")||0)}else{return parseInt(jQuery(em).css("border-left-width")||0)+parseInt(jQuery(em).css("border-right-width")||0)}}function bk(em,el){if(el=="tb"){return parseInt(jQuery(em).css("padding-top")||0)+parseInt(jQuery(em).css("padding-bottom")||0)}else{return parseInt(jQuery(em).css("padding-left")||0)+parseInt(jQuery(em).css("padding-right")||0)}}function N(el){return{width:this.getWidth(el),height:this.getHeight(el)}}var cj=0;function p(el){return el.offsetWidth}function bJ(el){return el.offsetHeight}function b6(en,em,el){jQuery(en).css("top",em)}function bu(en,em,el){jQuery(en).css("left",em)}function b7(eo,en,em,el){jQuery(eo).css("top",en);jQuery(eo).css("left",em)}function dJ(en,em,el){jQuery(en).width(em-this.getPadding(en)-this.getBorder(en))}function cI(en,el,em){jQuery(en).height(el-this.getPadding(en,"tb")-this.getBorder(en,"tb"))}function df(en,em,el){jQuery(en).width(em)}function ab(en,el,em){jQuery(en).height(el)}function bK(eo,en,el,em){if(en!==undefined){eo.style.width=en+"px"}if(el!==undefined){eo.style.height=el+"px"}}function aw(eo,en,el,em){jQuery(eo).width(en);jQuery(eo).height(el);return eo}function bR(eo,el,em,en){jQuery(eo).animate(el,em,null,en)}var bU={init:bE,createElementFromString:D,createHTMLFromString:di,findCaptureClass:bm,_findCaptureClass:bt,hasClassUpwards:cg,hasClass:an,addClass:bB,removeClass:q,getStyle:y,setStyle:dt,bindEvent:dW,handlePreventDefault:s,cssSelector:ap,getChildren:bH,getDescendants:cm,getContents:dB,getParents:z,getBoxObject:K,getBorder:ei,getPadding:bk,getSize:N,getWidth:p,getHeight:bJ,setTop:b6,setLeft:bu,setTopLeft:b7,setWidthPB:dJ,setHeightPB:cI,setWidth:df,setHeight:ab,setWidthHeightPB:bK,setWidthHeight:aw,animate:bR};b$._private.htmlAPI=bU;function aa(em,el){}function dK(eo,em){if(typeof eo==="object"){if(eo==null){eo={}}return{top:eo.top||0,right:eo.right||0,bottom:eo.bottom||0,left:eo.left||0}}else{if(typeof eo!="string"){if(eo&&eo.toString){eo=eo.toString()}else{eo=""}}var el=eo.split(" "),en=el.length;if(en==1){el[1]=el[2]=el[3]=el[0]}else{if(en==2){el[2]=el[0];el[3]=el[1]}else{if(en==3){el[3]=el[1]}}}return{top:parseFloat(el[0])||0,right:parseFloat(el[1])||0,bottom:parseFloat(el[2])||0,left:parseFloat(el[3])||0}}}function dv(el,em){if(typeof el==="number"){return el+(em||"px")}if(el==null||el===""||el=="auto"){return el||""}}function ek(el){return typeof el==="number"&&isFinite(el)}function dD(el){return !isNaN(parseFloat(el))&&isFinite(el)}function j(el){return typeof el==="string"}function cv(el){return typeof el==="boolean"}var bi={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(en){var el="";var eu,es,eq,et,er,ep,eo;var em=0;en=bi._utf8_encode(en);while(em<en.length){eu=en.charCodeAt(em++);es=en.charCodeAt(em++);eq=en.charCodeAt(em++);et=eu>>2;er=((eu&3)<<4)|(es>>4);ep=((es&15)<<2)|(eq>>6);eo=eq&63;if(isNaN(es)){ep=eo=64}else{if(isNaN(eq)){eo=64}}el=el+this._keyStr.charAt(et)+this._keyStr.charAt(er)+this._keyStr.charAt(ep)+this._keyStr.charAt(eo)}return el},decode:function(en){var el="";var eu,es,eq;var et,er,ep,eo;var em=0;en=en.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(em<en.length){et=this._keyStr.indexOf(en.charAt(em++));er=this._keyStr.indexOf(en.charAt(em++));ep=this._keyStr.indexOf(en.charAt(em++));eo=this._keyStr.indexOf(en.charAt(em++));eu=(et<<2)|(er>>4);es=((er&15)<<4)|(ep>>2);eq=((ep&3)<<6)|eo;el=el+String.fromCharCode(eu);if(ep!=64){el=el+String.fromCharCode(es)}if(eo!=64){el=el+String.fromCharCode(eq)}}el=bi._utf8_decode(el);return el},_utf8_encode:function(em){em=em.replace(/\r\n/g,"\n");var el="";for(var eo=0;eo<em.length;eo++){var en=em.charCodeAt(eo);if(en<128){el+=String.fromCharCode(en)}else{if((en>127)&&(en<2048)){el+=String.fromCharCode((en>>6)|192);el+=String.fromCharCode((en&63)|128)}else{el+=String.fromCharCode((en>>12)|224);el+=String.fromCharCode(((en>>6)&63)|128);el+=String.fromCharCode((en&63)|128)}}}return el},_utf8_decode:function(el){var em="";var en=0;var eo=c1=c2=0;while(en<el.length){eo=el.charCodeAt(en);if(eo<128){em+=String.fromCharCode(eo);en++}else{if((eo>191)&&(eo<224)){c2=el.charCodeAt(en+1);em+=String.fromCharCode(((eo&31)<<6)|(c2&63));en+=2}else{c2=el.charCodeAt(en+1);c3=el.charCodeAt(en+2);em+=String.fromCharCode(((eo&15)<<12)|((c2&63)<<6)|(c3&63));en+=3}}}return em}};b$._private.format={trblAddUnit:aa,trblFromString:dK,addUnits:dv,isNumber:ek,isNumeric:dD,isString:j,isBoolean:cv,base64:bi};b$.module("b$.view",function(){var ep=function(){return this}();var em=b$.Class;var en=b$._private.uri.URI;var er=b$._private.htmlAPI;var eq=em.extend(function(et){if(et.init&&et.evaluateType&&et.loadResource&&et.evaluateResource){this.init=et.init;this.evaluateType=et.evaluateType;this.loadResource=et.loadResource;this.evaluateResource=et.evaluateResource;if(et.toString){this.toString=et.toString}if(et.equals){this.equals=et.equals}this.init()}else{throw"Invalid Argument Exception for ResourceType"}},{isCoreAttribute:function(eu){if(!this.coreAttributes){return false}for(var et=0;et<this.coreAttributes.length;et++){if(this.coreAttributes[et]==eu){return true}}return false},setResourceAttributesOnTag:function(ev,et){for(var eu=0;eu<et.length;eu++){var ew=et[eu].name;if(!this.isCoreAttribute(ew)){var ex=et[eu].value;ev.setAttribute(ew,ex)}}return ev}},{});var es=em.extend(function(ex,ev,ew,eu,et){this.resourceType=null;this.state=es.State.PENDING;this.options=eu||null;this.mime=ex;this.uri=ev;this.source=ew;this.callbacks=[];this.aPackageResources=[];this.tagAttributes=et||[];if((ev&&ew)||(!ev&&!ew)){this.source=""}},{isInline:function(){return this.source!=null},getMime:function(){return this.mime},getUri:function(){return this.uri},getSource:function(){return this.source},getResourceType:function(){return this.resourceType},getTagAttributes:function(){return this.tagAttributes},equals:function(ev){if(this.isInline()){return this.source==ev.source}var eu=new en(this.uri);eu.normalize();var et=new en(ev.uri);et.normalize();return eu.path==et.path},load:function(){this.state=es.State.LOADING;this.resourceType.loadResource(this)},evaluate:function(){this.state=es.State.EVALUATING;if(this.resourceType){this.resourceType.evaluateResource(this)}},loadingComplete:function(){this.state=es.State.LOADED;if(this.isInline()){this.evaluate();return}for(var et=0;et<this.callbacks.length;et++){this.callbacks[et](this)}},loadingFailed:function(){this.state=es.State.FAILED;for(var et=0;et<this.callbacks.length;et++){this.callbacks[et](this)}},evaluationComplete:function(){this.state=es.State.EVALUATED;for(var et=0;et<this.callbacks.length;et++){this.callbacks[et](this)}},isPending:function(){return this.state==es.State.PENDING},isLoading:function(){return this.state==es.State.LOADING},isLoaded:function(){return this.state==es.State.LOADED},isPendingEvaluation:function(){return this.state==es.State.PENDING_EVALUATION},isEvaluating:function(){return this.state==es.State.EVALUATING},isEvaluated:function(){return this.state==es.State.EVALUATED},isFailed:function(){return this.state==es.State.FAILED},isPackage:function(){return this.aPackageResources.length>0}},{State:{PENDING:0,LOADING:1,LOADED:2,PENDING_EVALUATION:3,EVALUATING:4,EVALUATED:5,FAILED:6}});var eo=em.extend(function(et){this.onReadyHandler=null;this.resourceManager=(et)?et:b$._private.resourceManager;this.sequence=[]},{add:function(ev,ey,eu,ex,et){var ew=this.resourceManager.addResource(new es(ev,ey,eu,ex,et),this);this.sequence.push(ew)},addURI:function(eu,ew,ev,et){this.add(eu,ew,null,ev,et)},addInline:function(ev,eu,ew,et){this.add(ev,null,eu,ew,et)},startLoading:function(eu,et){this.onReadyHandler=eu;this.onFailureHandler=et;this.resourceManager.loadSequence(this)}},{});var el=em.extend(function(){this.resources=[];this.types=[]},{addResource:function(ey,ew){ey.resourceType=this.getTypeForResource(ey);if(ey.getResourceType()==null){throw"invalid argument exception: Cannot allocate a resource type for "+ey.getMime()}var ev=this;var ex=function(eA){var ez=ew;ev.callback(eA,ez)};for(var et=0;et<this.resources.length;et++){var eu=this.resources[et];if(eu.equals(ey)){eu.callbacks.push(ex);return et}}ey.callbacks.push(ex);this.resources.push(ey);this.registerPackageContent(ey,ew);return et},loadSequence:function(et){var ev=false;for(var eu=0;eu<et.sequence.length;eu++){var ew=this.resources[et.sequence[eu]];if(ew.isPending()){ev=true;ew.load()}}if(!ev){this.callback(null,et)}},registerPackageContent:function(et,ex){var eB=el.Constants.PACKAGE_ATTRIBUTE_NAME;var eu=el.Constants.PACKAGE_URI_DELIMITER;if(et.options&&et.options[eB]){var eA=et.options[eB].split(eu);for(var ey=0;ey<eA.length;ey++){var ev=eA[ey].replace(/\s+/g,"");var ew=new es(et.getMime(),ev,null);ew.state=es.State.PENDING_EVALUATION;var ez=this.addResource(ew,ex);et.aPackageResources.push(ez)}}else{return}},registerType:function(et){var eu=new eq(et);this.types.push(eu)},getTypeForResource:function(ev){for(var et=0;et<this.types.length;et++){var eu=this.types[et];if(eu.evaluateType(ev.getMime())){return eu}}return null},addPageHeadResources:function(){var eu=this;var et=er.cssSelector("head link",document);et.forEach(function(ez){var ex=ez.getAttribute("type")||"text/css";var ey=ez.getAttribute("href");var ew=ez.innerHTML==""?undefined:ez.innerHTML;var eA=new es(ex,ey,ew);eA.evaluate();eA.state=es.State.EVALUATED;eu.resources.push(eA)});var ev=er.cssSelector("head script",document);ev.forEach(function(ey){var ex=ey.getAttribute("type")||"text/javascript";var ez=ey.getAttribute("src");var ew=ey.textContent==""||!ey.textContent?(ey.innerHTML===""?undefined:ey.innerHTML):ey.textContent;if(ez||ew){var eA=new es(ex,ez,ew);eA.evaluate();eA.state=es.State.EVALUATED;eu.resources.push(eA)}})},callback:function(eA,eu){var ex=this;for(var ew=0;ew<eu.sequence.length;ew++){var ez=ex.resources[eu.sequence[ew]];if(ez.isPending()){ez.load();return}if(ez.isLoading()){return}if(ez.isLoaded()){ez.evaluate();return}if(ez.isPendingEvaluation()){return}if(ez.isEvaluated()){if(ez.isPackage()){for(var ew=0;ew<ez.aPackageResources.length;ew++){var ev=ez.aPackageResources[ew];ex.resources[ev].state=es.State.EVALUATED}var et=ez.aPackageResources;ez.aPackageResources=[];for(var ew=0;ew<et.length;ew++){var ev=et[ew];ex.callback(ex.resources[ev],eu)}}continue}if(ez.isFailed()){eu.onReadyHandler=eu.onFailureHandler;continue}}if(eu.onReadyHandler){var ey=eu.onReadyHandler;eu.onReadyHandler=null;ey()}}},{Constants:{PACKAGE_ATTRIBUTE_NAME:"data-package-info",PACKAGE_URI_DELIMITER:";",MAXIMIZED_ATTRIBUTE_NAME:"data-bb-mode"}});b$._private.ResourceSequence=eo;b$._private.resourceManager=new el();b$._private.resourceManager.registerType({init:function(){this.mimeArray=["text/javascript","application/javascript"];this.coreAttributes=["src","type","onload","onerror"];this.label="JavaScript Resource"},evaluateType:function(eu){for(var et=0;et<this.mimeArray.length;et++){if(this.mimeArray[et]==eu){return true}}return false},loadResource:function(ew){if(ew.isInline()){ew.loadingComplete()}else{var ey=function(){ew.loadingComplete()};var et=function(){ew.loadingFailed()};var ez=ew.getUri();var eu=document.createElement("script");eu.type=ew.getMime();this.setResourceAttributesOnTag(eu,ew.getTagAttributes());if(window.ActiveXObject){var ev=null;try{ev=new XMLHttpRequest()}catch(ex){try{ev=new ActiveXObject("Msxml2.XMLHTTP")}catch(ex){ev=new ActiveXObject("Microsoft.XMLHTTP")}}ev.onreadystatechange=function(){try{if(this.done!==undefined){return}if(this.status>=200&&this.status<300){this.done=true;eu.text=this.responseText;ew.scriptTag=eu;ey()}if(this.status>=400){this.done=true;et()}}catch(eA){throw (eA)}};setTimeout(function(){ev.open("get",ez,true);ev.send(null)},1)}else{eu.src=ez;eu.async=false;eu.onload=ey;eu.onerror=et;document.getElementsByTagName("head")[0].appendChild(eu)}}},evaluateResource:function(eu){if(eu.isInline()){var ev=document.createElement("script");ev.type=eu.getMime();ev.text=eu.getSource();var et=document.getElementsByTagName("head")[0];et.appendChild(ev)}else{if(eu.scriptTag){document.getElementsByTagName("head")[0].appendChild(eu.scriptTag)}}eu.evaluationComplete()},toString:function(){return this.label},equals:function(et){if(!this.label){return false}return(this.label==et.label)}});b$._private.resourceManager.registerType({init:function(){this.mime="text/css";this.coreAttributes=["href","type","rel"];this.label="StyleSheet Resource"},evaluateType:function(et){return this.mime==et},loadResource:function(eu){if(!eu.isInline()){var ev=document.createElement("link");ev.type=eu.getMime();ev.href=eu.getUri();var ew=document.createAttribute("rel");ew.nodeValue="stylesheet";ev.setAttributeNode(ew);this.setResourceAttributesOnTag(ev,eu.getTagAttributes());var et=document.getElementsByTagName("head")[0];et.appendChild(ev)}eu.loadingComplete()},evaluateResource:function(eu){if(eu.isInline()){var ev=document.createElement("style");ev.type=eu.getMime();if(ev.styleSheet){ev.styleSheet.cssText=eu.getSource()}else{ev.appendChild(document.createTextNode(eu.getSource()))}var et=document.getElementsByTagName("head")[0];et.appendChild(ev)}eu.evaluationComplete()},equals:function(et){if(!this.mime){return false}return(this.mime==et.mime)},toString:function(){return this.label}})});var cX=b$._private.ResourceSequence;function bO(ep,en,eo,em){var el=new cX();el.addURI(ep,en,null,null);el.startLoading(eo,em)}b$.module("b$._private.template",function(){var en=b$.Class;var eo=b$._private.uri.URI;var em=en.extend(function(eq){this.template=eq},{generate:function(eq){return this.template.replace(em.VARIABLE_REGEXP,function(es,er){return eq.getPreference(er)})},getVariableNames:function(){return(this.template.match(/\${([^}]*)}/gm)||[]).map(function(eq){return eq.slice(2,-1)})}},{VARIABLE_REGEXP:/\${([^}]*)}/gm});var el=en.extend(function(es,er,eq){eq=eq||{};this.bindingTemplate=new em(eo.resolve(er,es));this.matchingRegexp=new RegExp("^"+this.bindingTemplate.generate({getContextVariableValue:function(et){return"("+(eq[et]||/.+/).source+")"}})+"$");this.constraints=eq},{match:function(es){var er=this.bindingTemplate.getVariableNames();var eq=this.matchingRegexp.exec(es);return eq?{getContextVariableValue:function(et){return eq[er.indexOf(et)+1||-1]||""}}:null},bind:function(eq){return this.bindingTemplate.generate(eq)}});this.StringTemplate=em;this.SimpleURITemplate=el;var ep=function(eu,et){if(eu==null){return eu}var er=eu.indexOf("$(");if(er!=-1){var ew=eu.indexOf(")");if(ew==-1){return eu}var es=eu.substring(er+2,ew);var ev=et[es];if(typeof ev=="undefined"){ev="jQuery("+es+")"}var eq=eu.substring(0,er)+ev+ep(eu.substring(ew+1),et);return eq}else{return eu}};this.replaceParams=ep});b$.module("b$.view.bdom.layout",function(){var ey=function(){return this}();var ep=b$.Class;var eu=b$._private.htmlAPI;var ev=function(eC,eB,eA){if(eB&&eC<eB){return eB}if(eA&&eC>eA){return eA}return eC};var ew=ep.extend(function(eA){this.component=eA;this.dir={direction:"vertical"}},{getHTML:function(){return this.component.htmlNode},getHTMLBody:function(){return this.component.htmlAreas[0];return this.domBody},initLayout:function(){if(!this.initialized){}this.initialized=true},layout:function(){this.bLayouting=true;this.initLayout();if(this.beforeLayout.apply(this,arguments)!==false){this.layoutCancelled=false;this.doLayout.apply(this,arguments);this.childrenChanged=false;this.bLayouting=false;this.afterLayout.apply(this,arguments)}else{this.layoutCancelled=true}this.bLayouting=false},beforeLayout:function(){return true},doLayout:function(eB,eA){console.log(this,this.component)},afterLayout:function(){return true}});var ez=ew.extend(null,{doLayout:function(eB,eA){}});var er=ew.extend(null,{doLayout:function(eB,eA){this.component.setHTMLWidthHeight(eB,eA)}});var eo=ew.extend(null,{});var eq=ew.extend(null,{});var en=ew.extend(null,{});var ex=ew.extend(function(eA){ew.call(this,eA);this.myBoxLayout=new et()},{doLayout:function(eB,eN){eu.setWidthHeightPB(this.component.htmlNode,eB,eN);this.myBoxLayout.component={};this.myBoxLayout.component.htmlAreas=[];this.myBoxLayout.component.htmlAreas[0]=this.component.htmlNode;this.colWidths=this.colWidths||[33,33,34];this.rowHeights=this.rowHeights||[33,33,34];this.myBoxLayout.setDirection(false);var eI=this.component.resizeBars;var eA=this.component.getAreaOrderedChildren();if(!eA.length){return}var eC=[];var eK=4;eC.push();var eL=new es(eI[0]);eL.height=eK;eC=eA[0].concat([eL]);var eJ=this.myBoxLayout.computeChildCoords(eC,{width:eB,height:eN/100*this.rowHeights[0]});this.myBoxLayout.updateChildBoxes(eJ.boxes);var eL=new es(eI[3]);eL.height=eK;eC=[eL].concat(eA[4]);eJ=this.myBoxLayout.computeChildCoords(eC,{width:eB,height:eN/100*this.rowHeights[2]});for(var eG=0,eE=eJ.boxes.length;eG<eE;eG++){eJ.boxes[eG].top+=eN/100*(100-this.rowHeights[2])}this.myBoxLayout.updateChildBoxes(eJ.boxes);eJ=this.myBoxLayout.computeChildCoords(eA[1],{width:eB/100*this.colWidths[0],height:eN/100*this.rowHeights[1]});for(var eG=0,eE=eJ.boxes.length;eG<eE;eG++){eJ.boxes[eG].top+=eN/100*this.rowHeights[0]}this.myBoxLayout.updateChildBoxes(eJ.boxes);eJ=this.myBoxLayout.computeChildCoords(eA[2],{width:eB/100*this.colWidths[1]-eK/2,height:eN/100*this.rowHeights[1]});for(var eG=0,eE=eJ.boxes.length;eG<eE;eG++){eJ.boxes[eG].top+=eN/100*this.rowHeights[0];eJ.boxes[eG].left+=eK+eB/100*this.colWidths[0]}this.myBoxLayout.updateChildBoxes(eJ.boxes);eJ=this.myBoxLayout.computeChildCoords(eA[3],{width:eB/100*this.colWidths[2]-eK*2,height:eN/100*this.rowHeights[1]});for(var eG=0,eE=eJ.boxes.length;eG<eE;eG++){eJ.boxes[eG].top+=eN/100*this.rowHeights[0];eJ.boxes[eG].left+=eB/100*this.colWidths[0];eJ.boxes[eG].left+=eK*2+eB/100*this.colWidths[1]}this.myBoxLayout.updateChildBoxes(eJ.boxes);eC=[];eL=new es(eI[1]);eL.width=4;eC.push(eL);eL=new es(eI[2]);eL.width=4;eC.push(eL);this.myBoxLayout.setDirection(true);eJ=this.myBoxLayout.computeChildCoords(eC,{width:eK*2,height:eN/100*this.rowHeights[1]});eJ.boxes[0].top+=eN/100*this.rowHeights[0];eJ.boxes[0].left+=eB/100*this.colWidths[0];eJ.boxes[1].top+=eN/100*this.rowHeights[0];eJ.boxes[1].left+=eB/100*(100-this.colWidths[2]);this.myBoxLayout.updateChildBoxes(eJ.boxes);return;var eF=this.component.htmlAreas;var eH=parseInt(((eN-8)/3),10);var eM=parseInt(((eB-8)/3),10);var eD=4;eu.setTopLeft(eF[0],0,0);eu.setWidthHeightPB(eF[0],eB,eH);eu.setTopLeft(eI[0],eH,0);eu.setWidthHeightPB(eI[0],eB,eD);eu.setTopLeft(eF[1],eH+eD,0);eu.setWidthHeightPB(eF[1],eM,eH);eu.setTopLeft(eI[1],eH+eD,eM);eu.setWidthHeightPB(eI[1],eD,eH);eu.setTopLeft(eF[2],eH+eD,eM);eu.setWidthHeightPB(eF[2],eM,eH);eu.setTopLeft(eI[2],eH+eD,eM+eM+eD);eu.setWidthHeightPB(eI[2],eD,eH);eu.setTopLeft(eF[3],eH+eD,eM+eM+eD);eu.setWidthHeightPB(eF[3],eM,eH);eu.setTopLeft(eI[3],eH+eH+eD,0);eu.setWidthHeightPB(eI[3],eB,eD);eu.setTopLeft(eF[4],eH+eH+eD+eD,0);eu.setWidthHeightPB(eF[4],eB,eH);console.log("BorderLayout",eB,eN)}});var ex=ew.extend(function(eA){ew.call(this,eA);this.myBoxLayout=new et()},{doLayout:function(eB,eM){eu.setWidthHeightPB(this.component.htmlNode,eB,eM);this.myBoxLayout.component={};this.myBoxLayout.component.htmlAreas=[];this.myBoxLayout.component.htmlAreas[0]=this.component.htmlNode;var eH=this.component.resizeBars;var eA=this.component.getAreaOrderedChildren();var eC=[];eC.push(eA[0][0]);var eJ=new es(eH[0]);eJ.height=4;eC.push(eJ);eC.push(eA[1][0]);var eG=eA[1][0].flex;eA[1][0].flex=1;var eJ=new es(eH[3]);eJ.height=4;eC.push(eJ);eC.push(eA[4][0]);this.myBoxLayout.setDirection(false);var eI=this.myBoxLayout.computeChildCoords(eC,{width:eB,height:eM});eI.boxes[1].height=4;eI.boxes[3].height=4;this.myBoxLayout.updateChildBoxes(eI.boxes);eM=eI.boxes[2].height;var eK=eI.boxes[2].top;var eC=[];eC.push(eA[1][0]);eA[1][0].flex=eG;var eJ=new es(eH[1]);eJ.width=4;eC.push(eJ);eC.push(eA[2][0]);var eJ=new es(eH[2]);eJ.width=4;eC.push(eJ);eC.push(eA[3][0]);this.myBoxLayout.setDirection(true);var eI=this.myBoxLayout.computeChildCoords(eC,{width:eB,height:eM});eI.boxes[0].top=eK;eI.boxes[1].top=eK;eI.boxes[2].top=eK;eI.boxes[3].top=eK;eI.boxes[4].top=eK;eI.boxes[1].width=4;eI.boxes[3].width=4;this.myBoxLayout.updateChildBoxes(eI.boxes);return;var eE=this.component.htmlAreas;var eF=parseInt(((eM-8)/3),10);var eL=parseInt(((eB-8)/3),10);var eD=4;eu.setTopLeft(eE[0],0,0);eu.setWidthHeightPB(eE[0],eB,eF);eu.setTopLeft(eH[0],eF,0);eu.setWidthHeightPB(eH[0],eB,eD);eu.setTopLeft(eE[1],eF+eD,0);eu.setWidthHeightPB(eE[1],eL,eF);eu.setTopLeft(eH[1],eF+eD,eL);eu.setWidthHeightPB(eH[1],eD,eF);eu.setTopLeft(eE[2],eF+eD,eL);eu.setWidthHeightPB(eE[2],eL,eF);eu.setTopLeft(eH[2],eF+eD,eL+eL+eD);eu.setWidthHeightPB(eH[2],eD,eF);eu.setTopLeft(eE[3],eF+eD,eL+eL+eD);eu.setWidthHeightPB(eE[3],eL,eF);eu.setTopLeft(eH[3],eF+eF+eD,0);eu.setWidthHeightPB(eH[3],eB,eD);eu.setTopLeft(eE[4],eF+eF+eD+eD,0);eu.setWidthHeightPB(eE[4],eB,eF);console.log("BorderLayout",eB,eM)}});var em=ew.extend(null,{beforeLayout:function(){return true},doLayout:function(eB,eA){console.log(this,this.component)},afterLayout:function(){return true}});var es=ep.extend(function(eA){this.htmlNode=eA;this.width=0;this.height=0;this.flex=0;this.margins={top:0,left:0,bottom:0,right:0};this.minWidth=0;this.minHeight=0;this.maxWidth=Infinity;this.maxHeight=Infinity},{getWidth:function(){return this.htmlNode.offsetWidth},getHeight:function(){return this.htmlNode.offsetHeight},getSize:function(){return eu.getSize(this.htmlNode)},setWidthHeight:function(eA,eB){return eu.setWidthHeight(this.htmlNode,eA,eB)}});var el=function(eB,eA){eB.scrollOffset=0;eB.align="middle";eB.align="stretch";eB.padding={top:0,right:0,bottom:0,left:0};if(eA){eB.dir={direction:"horizontal",parallelSizeIndex:0,perpendicularSizeIndex:1,parallelPrefix:"width",parallelPrefixCap:"Width",parallelLT:"l",parallelRB:"r",parallelBefore:"left",parallelBeforeCap:"Left",parallelAfter:"right",parallelPosition:"x",perpendicularPrefix:"height",perpendicularPrefixCap:"Height",perpendicularLT:"t",perpendicularRB:"b",perpendicularLeftTop:"top",perpendicularRightBottom:"bottom",perpendicularPosition:"y"}}else{eB.dir={direction:"vertical",parallelPrefix:"height",parallelPrefixCap:"Height",parallelBefore:"top",parallelAfter:"bottom",perpendicularPrefix:"width",perpendicularPrefixCap:"Width",perpendicularLT:"l",perpendicularRB:"r",perpendicularLeftTop:"left",perpendicularRightBottom:"right"}}};var et=ew.extend(function(eA){this.component=eA;this.setDirection(false)},{pack:"start",availableSpaceOffset:0,reserveOffset:true,shrinkToFit:true,clearInnerCtOnLayout:false,flexSortFn:function(eB,eA){var eC="max"+this.parallelPrefixCap,eD=Infinity;eB=eB.component[eC]||eD;eA=eA.component[eC]||eD;if(!isFinite(eB)&&!isFinite(eA)){return false}return eB-eA},minSizeSortFn:function(eB,eA){return eA.available-eB.available},setDirection:function(eA){el(this,eA)},doLayout:function(eD,eA){if(!this.component.htmlNode){return}this.component.setHTMLWidthHeight(eD,eA);var eB=this.component.getAreaOrderedChildren();var eC=eB[0];if(eC&&eC[0]&&eC[0].htmlNode){var eE=this.computeChildCoords(eC,{width:eD,height:eA});this.updateChildBoxes(eE.boxes)}},updateChildBoxes:function(eD){for(var eC=0;eC<eD.length;eC++){var eB=eD[eC].component;var eG=eD[eC].top;if(isNaN(eG)){eG=eB.top}eu.setTop(eB.htmlNode,eG);var eF=eD[eC].left;if(isNaN(eF)){eF=eB.left}eu.setLeft(eB.htmlNode,eD[eC].left);var eE=eD[eC].width;if(isNaN(eE)){eE=eB.width}var eA=eD[eC].height;if(isNaN(eA)){eA=eB.height}eB.setWidthHeight(eE,eA)}},computeChildCoords:function(eT,eB){var fs=this.dir;if(!fs){this.setDirection(false)}fs=this.dir;var e4=Math,eL=e4.max,eN=Infinity,eR,eC=eB[fs.parallelPrefix]-this.scrollOffset,fh=eB[fs.perpendicularPrefix],fm=this.padding,eP=fm[fs.parallelBefore],eQ=eP+fm[fs.parallelAfter],e8=fm[fs.perpendicularLeftTop],e5=e8+fm[fs.perpendicularRightBottom],fp=eL(0,fh-e5),fr=0,fk=this.pack=="start",fv=this.pack=="center",e0=this.pack=="end",eD=0,fq=0,ft=0,eS=0,e1=0,e9=[],e6=[],fo,fn,eH,fj,eW,eX,fu,fi,ff,fg,eM,eE,eV,e3,eU,e7,eI,fa,fl,eF,eZ,fc,eA,eO,eJ,e2,fb,fe,eG,fd;var eY=eT.length;for(fn=0;fn<eY;fn++){eH=eT[fn];eW=eH[fs.perpendicularPrefix];var eK=eH.margins[fs.parallelBefore]+eH.margins[fs.parallelAfter];ff={component:eH,margins:eH.margins};if(eH.flex){fq+=eH.flex;fj=0}else{if(!(eH[fs.parallelPrefix]&&eW)){fu=eH.getSize()}fj=eH[fs.parallelPrefix]||fu[fs.parallelPrefix];eW=eW||fu[fs.perpendicularPrefix]}eD+=eK+(fj||0);ft+=eK+(eH.flex?eH[fs.parallelMinString]||0:fj);eS+=eK+(eH[fs.parallelMinString]||fj||0);if(typeof eW!="number"){eW=eH["get"+fs.perpendicularPrefixCap]()}e1=eL(e1,eL(eW,eH[fs.perpendicularMinString]||0)+eH.margins[fs.perpendicularLeftTop]+eH.margins[fs.perpendicularRightBottom]);ff[fs.parallelPrefix]=fj||eR;ff.dirtySize=true;ff[fs.perpendicularPrefix]=eW||eR;e9.push(ff)}if(!this.autoSize){fg=ft-eC;eM=eS>eC}eE=eL(0,eC-eD-eQ-(this.reserveOffset?this.availableSpaceOffset:0));if(eM){for(fn=0;fn<eY;fn++){eI=e9[fn];eV=eT[fn][fs.parallelMinString]||eT[fn][fs.parallelPrefix]||eI[fs.parallelPrefix];eI.dirtySize=eI.dirtySize||eI[fs.parallelPrefix]!=eV;eI[fs.parallelPrefix]=eV}}else{if(fg>0){for(fn=0;fn<eY;fn++){e3=eT[fn];eV=e3[fs.parallelMinString]||0;if(e3.flex){eI=e9[fn];eI.dirtySize=eI.dirtySize||eI[fs.parallelPrefix]!=eV;eI[fs.parallelPrefix]=eV}else{if(this.shrinkToFit){e6.push({minSize:eV,available:e9[fn][fs.parallelPrefix]-eV,index:fn})}}}e6.sort(this.minSizeSortFn);for(fn=0,eU=e6.length;fn<eU;fn++){e7=e6[fn].index;if(e7==eR){continue}e3=eT[e7];eV=e6[fn].minSize;eI=e9[e7];fa=eI[parallelPrefix];fl=eL(eV,fa-e4.ceil(fg/(eU-fn)));eF=fa-fl;eI.dirtySize=eI.dirtySize||eI[fs.parallelPrefix]!=fl;eI[fs.parallelPrefix]=fl;fg-=eF}eM=(fg>0)}else{eA=eE;eO=fq;fc=[];for(fn=0;fn<eY;fn++){eH=eT[fn];if(fk&&eH.flex){fc.push(e9[eT.indexOf(eH)])}}fc.sort(this.flexSortFn);for(fn=0;fn<fc.length;fn++){fb=fc[fn];eH=fb.component;eX=fb.margins;eJ=e4.ceil((eH.flex/eO)*eA);eJ=Math.max(eH["min"+fs.parallelPrefixCap]||0,e4.min(eH["max"+fs.parallelPrefixCap]||eN,eJ));eA-=eJ;eO-=eH.flex;fb.dirtySize=fb.dirtySize||fb[fs.parallelPrefix]!=eJ;fb[fs.parallelPrefix]=eJ}}}if(fv){fs.parallelOffset+=eE/2}else{if(e0){fs.parallelOffset+=eE}}for(var fn=0;fn<eY;fn++){eH=eT[fn];fb=e9[fn];eX=fb.margins;eG=eX[fs.perpendicularLeftTop]+eX[fs.perpendicularRightBottom];eP+=eX[fs.parallelBefore];fb[fs.parallelBefore]=eP;fb[fs.perpendicularLeftTop]=e8+eX[fs.perpendicularLeftTop];if(this.align=="stretch"){fd=ev(fp-eG,eH[fs.perpendicularMinString]||0,eH[fs.perpendicularMaxString]||eN);fb.dirtySize=fb.dirtySize||fb[fs.perpendicularPrefix]!=fd;fb[fs.perpendicularPrefix]=fd}else{if(this.align=="stretchmax"){fd=ev(e1-eG,eH[fs.perpendicularMinString]||0,eH[fs.perpendicularMaxString]||eN);fb.dirtySize=fb.dirtySize||fb[fs.perpendicularPrefix]!=fd;fb[fs.perpendicularPrefix]=fd}else{if(this.align==this.alignCenteringString){eZ=eL(fp,e1)-fr-fb[fs.perpendicularPrefix];if(eZ>0){fb[fs.perpendicularLeftTop]=e8+Math.round(eZ/2)}}else{console.log("no align");fd=ev(fp-eG,eH[fs.perpendicularMinString]||0,eH[fs.perpendicularMaxString]||eN);fb.dirtySize=fb.dirtySize||fb[fs.perpendicularPrefix]!=fd;fb[fs.perpendicularPrefix]=fd}}}eP+=(fb[fs.parallelPrefix]||0)+eX[fs.parallelAfter]}return{boxes:e9,meta:{calculatedWidth:fo,maxSize:e1,nonFlexSize:eD,desiredSize:ft,minimumSize:eS,shortfall:fg,tooNarrow:eM}}},setHTMLBodyWidthHeight:function(eE,eA){var eH=this,eD=Math.max,eG=this.align,eI=this.padding,eB=eE.width,eK=eE.height,eL=eA.meta,eC,eJ;var eF=this.component.getHTMLBody();if(this.direction=="horizontal"){eC=eB;eJ=eL.maxSize+eI.top+eI.bottom+eu.getBorder(eF,"tb");if(eG=="stretch"){eJ=eK}else{if(eG=="middle"){eJ=eD(eK,eJ)}}}else{eJ=eK;eC=eL.maxSize+eI.left+eI.right+eu.getBorder(eF,"lr");if(eG=="stretch"){eC=eB}else{if(eG=="center"){eC=eD(eB,eC)}}}eu.setWidthHeight(eF,eC||undefined,eJ||undefined)}});this.Layout=ew;this.NoLayout=ez;this.AutoLayout=er;this.FitLayout=eo;this.BoxLayout=et;this.TableLayout=eq;this.TileLayout=em;this.BorderLayout=ex;this.CardLayout=en});b$.module("b$.view.bdom",function(){var eo=b$.bdom.Namespace;var el=b$.bdom.Element;var eG=b$.document;var es=b$._private.html;var em=b$._private.htmlAPI;var eH="http://backbase.com/2012/view";var ez=new eo(eH);var er=1;var eE=8;var ey=el.extend(function(eI,eJ){el.apply(this,arguments);this.cnBase=this.cnBasePrefix+this.localName},{namespaceURI:"http://backbase.com/2012/view",localName:"baseDisplayElement",_checkin:function(){this.createDisplay()},_checkup:function(){if(this.parentNode&&this.parentNode.insertDisplayChild){this.parentNode.insertDisplayChild(this)}},_checkout:function(){if(this.htmlNode&&this.htmlNode.parentNode){this.htmlNode.parentNode.removeChild(this.htmlNode)}this.htmlNode=null;this.htmlAreas=null},insertBefore:function(eJ,eI){el.prototype.insertBefore.call(this,eJ,eI);if(this.ownerDocument.all[this._jxid]&&this.ownerDocument.bMoveDisplayChildren){this.insertDisplayChild(eJ,eI)}return eJ},removeChild:function(eI){el.prototype.removeChild.call(this,eI);return eI},replaceChild:function(eJ,eI){el.prototype.replaceChild.call(this,eJ,eI);return eJ},appendChild:function(eI){el.prototype.appendChild.call(this,eI);if(this.ownerDocument.all[this._jxid]&&this.ownerDocument.bMoveDisplayChildren){this.insertDisplayChild(eI)}return eI},injectDisplaySelf:function(eI,eJ){return true},insertDisplayChild:function(eI,eJ){if(!(eI.model&&eI.model._ssr)&&eI.injectDisplaySelf(eI,eJ)&&eI.htmlNode){if(this.attachHTMLChildren){this.attachHTMLChildren()}else{var eK=this.getDisplay("area")||this.getDisplay();if(eJ&&eJ.htmlNode){eJ.htmlNode.parentNode.insertBefore(eI.htmlNode,eJ.htmlNode)}else{eK.appendChild(eI.htmlNode)}}}},createDisplay:function(){this.htmlNode=this.renderDisplay(this.getDisplayModel());if(this.htmlNode){this.htmlNode.viewController=this}},getDisplayModel:function(){return this},renderDisplay:function(eI){var eJ;if(this.constructor.template){eJ=this.constructor.template.call(this,eI)}else{eJ="<div>"+this.localName+"</div>"}return em.createElementFromString(eJ)}},{template:function(eI){return"<div>"+eI.localName+"</div>"}});var eu=ey.extend(function(eI,eJ){ey.apply(this,arguments)},{localName:"selectDisplayElement",selectDisplay:function(eK,eJ){var eI;if(eK){if(eK[0]=="."){eI=new RegExp(eK.replace(".","(\\s|^)")+"(\\s|$)")}else{eI=new RegExp("--"+eK+"(\\s|$)")}if(eJ){eJ=[]}eK=et(this.htmlNode,eI,eJ);return(eJ)?eJ:eK}else{return this.htmlNode}},isDisplay:function(eK,eJ){if(eJ){var eI;if(eK[0]=="."){eI=new RegExp(eK.replace(".","(\\s|^)")+"(\\s|$)")}else{eI=new RegExp("--"+eK+"(\\s|$)")}if((sClass=eJ.className)&&sClass.match(eI)){return true}}return false}});function et(eM,eI,eK){var eN;if((eN=(bQ&&dg<8?eM.className:eM.getAttribute("class")))&&eN.match(eI)){if(eK){eK.push(eM)}else{return eM}}for(var eJ=0,eL=eM.childNodes,eN;eM=eL[eJ];eJ++){if(eM.nodeType==1){if(!eM.viewController&&!eM.getAttribute("data-pid")&&(eM=et(eM,eI,eK))){return eM}}}return null}var eD=eu.extend(function(eI,eJ){eu.apply(this,arguments)},{localName:"displayElement",getDisplay:function(eJ,eI){return this.selectDisplay(eJ,eI)},getDisplayEventTarget:function(eJ){var eI;while(eJ){if((eI=eJ.className)&&String(eI||eI.baseVal).match(/--[\w-]+/)){return eJ}if(eJ.viewController){return null}eJ=eJ.parentNode}return null},domActivate:function(){var eI=new this.ownerDocument.createEvent("UIEvent");eI.initUIEvent("DOMActivate",true,true,window,null);this.dispatchEvent(eI)}});var ex=eD.extend(function(eS,eW){eD.apply(this,arguments);if(this.constructor.attributes){var e0=this.constructor.attributes;for(var eT in e0){if(this.getAttribute(eT)==null){this.node.setAttribute(eT,e0[eT])}}}this.cls_custom=this.getAttribute("class")||"";var eZ=this.getAttribute("layout");if(b$.view.bdom.layout[eZ]){this.layout=new b$.view.bdom.layout[eZ](this)}else{this.layout=new b$.view.bdom.layout.AutoLayout(this)}if(this.layout.setDirection){var eO=this.getAttribute("orient");if(eO=="vertical"){this.layout.setDirection(false)}else{this.layout.setDirection(true)}}var eI=this.getAttribute("margin");eI=b$._private.format.trblFromString(eI);eI.height=eI.top+eI.bottom;eI.width=eI.left+eI.right;this.margins=eI;var eK=this.getAttribute("padding");eK=b$._private.format.trblFromString(eK);eK.height=eK.top+eK.bottom;eK.width=eK.left+eK.right;this.layout.padding=eK;var eX=this.getAttribute("flex");if(eX){this.flex=parseInt(eX)}var eU=this.getAttribute("width");if(eU){this.width=parseInt(eU)}var eQ=this.getAttribute("height");if(eQ){this.height=parseInt(eQ);this.flex=0}var eP=this.getAttribute("minWidth");if(eP){this.minWidth=parseInt(eP)}var eL=this.getAttribute("minHeight");if(eL){this.minHeight=parseInt(eL)}var eY=this.getAttribute("maxWidth");if(eY){this.maxWidth=parseInt(eY)}var eR=this.getAttribute("maxHeight");if(eR){this.maxHeight=parseInt(eR)}var eN=this.getAttribute("anchorWindow");if(eN){eN=b$._private.format.trblFromString(eN);var eJ;var eM=this;var eV=function(e2){var e1=eM;e1.resize("500",b$._private.html.getViewportHeight())};b$._private.html.addEventListener(window,"resize",eV);this.addEventListener("destroy",function(e1){b$._private.html.removeEventListener(window,"resize",eV)});this.addEventListener("DOMReady",function(e2){if(e2.target==eM){var e1=eM;e1.resize("500",b$._private.html.getViewportHeight())}})}},{localName:"layoutElement"});var en=function(eK,eJ,eI){if(eJ&&eK<eJ){return eJ}if(eI&&eK>eI){return eI}return eK};var eq=b$.Class.extend(function(){this.layout=new eB["default"](this);this.margins={top:0,right:0,bottom:0,left:0}},{getWidth:function(){return this.htmlNode.offsetWidth;return em.getWidth(this.htmlNode)},getHeight:function(){return this.htmlNode.offsetHeight;return em.getHeight(this.htmlNode)},getSize:function(){return em.getSize(this.htmlNode)},DOMReady:function(eI){eC.prototype.readyHTML.call(this)},reflow:function(){var eJ,eI;if(this.width){eJ=this.width}else{if(this.htmlNode){eJ=this.htmlNode.offsetWidth}}if(this.height){eI=this.height}else{if(this.htmlNode){eI=this.htmlNode.offsetHeight}}this.layout.layout(eJ,eI,false)},resize:function(eJ,eI){this.layout.layout(eJ,eI,false)},setFlex:function(eI){this.flex=parseInt(eI);var eJ=this.parentNode;if(eJ&&eJ.reflow){eJ.reflow()}},setStretch:function(eM){if(this.layout.dir){if(eM=="true"){this.layout.align="stretch"}else{this.layout.align="Xstretch";var eK="width";if(this.layout.dir.direction=="horizontal"){eK="height"}var eJ=this.htmlNode;for(var eL=0;eL<eJ.childNodes.length;eL++){var eI=eJ.childNodes[eL];if(eI.nodeType==1){eI.style[eK]=""}}}this.reflow()}},isVisible:function(){return true},setWidthHeight:function(eJ,eI){eJ=en(eJ,this.minWidth,this.maxWidth);eI=en(eI,this.minHeight,this.maxHeight);if(!this.isVisible()){return this}this.doSetWidthHeight(eJ,eI,false)},doSetWidthHeight:function(eL,eJ,eI,eK){if(this.htmlNode){if(this.layout){if(eI){this.width=eL;this.height=eJ}this.layout.layout(eL,eJ,eI,eK)}else{this.setHTMLWidthHeight(eL,eJ)}}},setHTMLWidthHeight:function(eJ,eI){var eK=this.htmlNode;em.setWidthHeightPB(eK,eJ,eI);return;if(eJ!==undefined&&eI!==undefined){em.setWidthHeightPB(eK,eJ,eI)}else{if(eJ!==undefined){em.setWidthPB(eK,eJ)}else{if(eI!==undefined){em.setHeightPB(eK,eI)}}}}});b$.mixin(ex.prototype,eq.prototype);var eA=ez.registerElement("AreasElement",ex.extend(function(eK,eJ,eI,eL){ex.apply(this,arguments);this.htmlDoc=eK.htmlNode;this.htmlAreas=null},{localName:null,namespaceURI:"http://backbase.com/2012/view",getHTMLAreas:function(){this.getHTMLNode();return this.htmlAreas},getAreaPreference:function(){return parseInt(this.getAttribute("area"),10)||0},getOrderPreference:function(){return parseInt(this.getAttribute("order"),10)||0},setAreaPreference:function(eI){this.setAttribute("area",eI)},setOrderPreference:function(eI){this.setAttribute("order",eI)},getAreaOrderedChildren:function(){var eO=this.childNodes;var eK=[];var eN,eI;var eM=0,eJ=0;for(var eL=0;eL<eO.length;eL++){if(eO[eL].node.nodeType==1){if(eO[eL].getAreaPreference){eN=eO[eL].getAreaPreference();eI=eO[eL].getOrderPreference();if(!eK[eN]){eK[eN]=[]}eK[eN].push(eO[eL])}}}for(var eL=0;eL<eK.length;eL++){if(eK[eL]){eK[eL].sort(ep)}}return eK}}));function ep(eJ,eI){eJ=parseInt(eJ.getOrderPreference())||0;eI=parseInt(eI.getOrderPreference())||0;return eJ-eI}var ew=ez.registerElement("DesignElement",eA.extend(null,{localName:null,namespaceURI:"http://backbase.com/2012/view",enableDesignMode:function(){if(!this.designMode){this.designMode=true}this.showDesignTools();var eJ=this.childNodes;for(var eI=0;eI<eJ.length;eI++){if(eJ[eI].enableDesignMode){eJ[eI].enableDesignMode()}}},disableDesignMode:function(){if(this.designMode){delete this.designMode;this.hideDesignTools()}var eJ=this.childNodes;for(var eI=0;eI<eJ.length;eI++){eJ[eI].disableDesignMode()}},showDesignTools:function(){if(this.htmlNode&&this.model){if(this.localName=="TCont"&&this.model.getPreference("isTargetingPage")){return}var eI=document;var eW=this.model.getJSON();var eS=this.htmlNode;var eN,eU;var eM=this;while(eM.model.tag.toLowerCase()!=="page"&&eM.model.tag.toLowerCase()!=="portal"&&eM.model.tag.toLowerCase()!=="application"){eM=eM.parentNode}var eV=this.model.localName==="Widget",eO=this.model.localName==="Container",eT=eM.pageType==="master",eJ=this.localName=="TCont",eL,eZ=true,e0=(function(e2){if(e2.model&&(e2.model.manageable!==undefined||(e2.model.getPreference&&e2.model.getPreference("isManageableArea")))){return true}return false})(this),e1=(function(e3){var e2=e3.ownerDocument.getElementById("VIEW-"+e3.model.parentItemName)!==undefined;return e2})(this),eQ=(function(e2){return(e2.model&&e2.model.getPreference&&(e2.model.getPreference("isFromMasterPage")===true))})(this),eK=this.model.getPreference&&this.model.getPreference("isManageableArea"),eP=(function(e2){while(e2=e2.parentNode){if(e2.model&&e2.model.preferences&&e2.model.preferences.getByName("isManageableArea")){return true}}return false})(this),eX=eM.model.publishState!=="UNPUBLISHED"&&eM.model.publishState!=="NOT_PUBLISHED"&&this.model.lastPublicationTimestamp!==undefined,eR=function(e2){return e2.model.preferences.array.filter(function(e3){return e3.viewHint&&e3.viewHint!==""&&(e3.manageable===null||e3.manageable===true)})};eW.features={Drag:true,Divider:true,Edit:true,Permission:true,TCont:false,Trash:true,TrashDisabled:false,Manageable:false,Revert:false};eW.features.TCont=(eW.pref&&eW.pref.TemplateName&&eW.pref.TemplateName.value=="TCont")||false;eW.isMasterpage=eT;if(eT&&this.model.manageable!==undefined){eW.features.Manageable=true;eW.features.ManageableValue=this.model.manageable==="true"?true:false;eW.features.ManageableType=eV?"widget":"container"}if(!eT&&e0){if(this.model.manageable==="false"){eZ=false}else{eL=eR(this);if(!eL.length||eL.length===0){eW.features.Divider=false;if(this.model.manageable==="true"&&(eQ?false:true)){eW.features.TCont=true}if(eP){eW.features.Drag=true;eW.features.Permission=eQ?false:true;eW.features.Trash=true;eW.features.Edit=false}else{eW.features.Drag=false;eW.features.Permission=false;eW.features.Trash=false;eW.features.Edit=eQ?false:true}}else{if(eP){eW.features.Permission=eQ?false:true;eW.features.TCont=false}else{eW.features.Drag=false;eW.features.Divider=false;eW.features.Permission=false;eW.features.Trash=false;eW.features.TCont=false}}eW.features.Revert=eQ?false:true}}else{if(this.model&&this.model.preferences&&!eR(this).length){eW.features.Edit=eT?true:false}}if(eK||!eZ){eW.features={};eZ=false}if(eT){if(eK){eW.features.Drag=eZ=true}eW.features.Trash=!eX;eW.features.TrashDisabled=eX}this.designTools={features:eW.features,isFromMasterPage:eQ,wasCreatedOnMasterPage:e0,drag:eW.features.Drag,hasFeatures:eZ}}if(this.htmlAreas&&this.model&&this.model.tag!="widget"){for(var eY=0;eY<this.htmlAreas.length;eY++){jQuery(this.htmlAreas[eY]).addClass("pm-design-showArea")}}},hideDesignTools:function(){if(this.htmlNode){if(this.htmlEditControl&&this.htmlEditControl.parentNode){this.htmlEditControl.parentNode.removeChild(this.htmlEditControl);this.htmlEditControl=null}}if(this.htmlAreas){for(var eI=0;eI<this.htmlAreas.length;eI++){jQuery(this.htmlAreas[eI]).removeClass("pm-design-showArea")}}},showDragTargets:function(){if(this.isPossibleDragTarget){if(this.htmlNode){em.addClass(this.htmlNode,"pm-design-dragContainer")}if(this.htmlAreas&&this.model.tag!="widget"){for(var eI=0;eI<this.htmlAreas.length;eI++){em.addClass(this.htmlAreas[eI],"pm-design-dragArea")}}}},hideDragTargets:function(){if(this.htmlNode){em.removeClass(this.htmlNode,"pm-design-dragContainer")}if(this.htmlAreas){for(var eI=0;eI<this.htmlAreas.length;eI++){em.removeClass(this.htmlAreas[eI],"pm-design-dragArea")}}}}));var eC=ez.registerElement("ViewElement",ew.extend(function(eK,eJ,eI,eL){ew.apply(this,arguments);this.modelInititalized=false;this.flex=1;this.isPossibleDragTarget=false},{localName:null,namespaceURI:"http://backbase.com/2012/view",createDisplay:function(){this.buildDisplay()},buildDisplay:function(){if(this.htmlNode){this.buildHTML(this.htmlNode);if(!this.htmlAreas){this.htmlAreas=em.findCaptureClass("bp-area",this.htmlNode);if(!this.htmlAreas.length){this.htmlAreas.push(this.htmlNode)}}return this.htmlNode}this.htmlNode=this.buildHTML();if(this.htmlNode){this.htmlNode.viewController=this}return this.htmlNode},getHTMLNode:function(){return this.htmlNode},DOMReady:function(){this.readyHTML()},readyHTML:function(){},buildHTML:function(){var eI=em.createElementFromString(this.doTemplate(this.buildJSON()));return eI},doTemplate:function(eI){return"<div></div>"},buildJSON:function(){return{}},getHTML:function(eJ,eI){return this.selectDisplay(eJ,eI)}}));var eB=b$.view.bdom.layout;var eF=eD.extend(null,{namespaceURI:"http://backbase.com/2012/UADisplay",localName:"application",cnBasePrefix:"d-"},{template:function(eI){return'<div class="'+eI.cls+'"></div>'}});var ev=ez.registerElement("Component",eC.extend(function(eK,eJ,eI,eL){eC.apply(this,arguments)},{}));eC.prototype.localName=null;ev.prototype.localName=null;eC.prototype.namespaceURI=null;ev.prototype.namespaceURI=null;this.Resizable=eq;this.Component=ev});b$.module("b$.view.bdom.dd",function(){var et=function(){return this}(),er=b$.Class,en=b$._private.htmlAPI,eo=b$._private.html,ep,em,es,el,eq;ep=b$.Class.extend(function(){this.types={}},{setData:function(ev,eu){this.types[ev]=eu;return true},getData:function(eu){return this.types[eu]},clearData:function(eu){delete this.types[eu];return true}},null,"DataTransfer");this.DataTransfer=ep;em=er.extend(function(eu){this.cqs_dragRoot="bp-ui-dragRoot";this.cqs_dragGrip="bp-ui-dragGrip";this.cqs_resizeGrip="bp-ui-resizeGrip";this.isDragging=false;this.initialDragTimeout=null;this.oDocument=null;this.initialDragMargin=6;this.dragSymbol=null;this.dragElement=null;this.cancelDropTargets=[]},{initialize:function(eu,ev){var ew=this;this.oDocument=document;if(!ew.dragSymbol){ew.dragSymbol=document.createElement("div");ew.dragSymbol.className="bp-drag-dragSymbol";ew.dragSymbol.style.position="absolute";ew.dragSymbol.style.display="none";document.body.appendChild(this.dragSymbol)}if(!ew.dragCover){ew.dragCover=en.createElementFromString('<div class="iframeCover" style="zindex:99999;position:fixed;width:100%;top:0px;left:0px;height:100%;"></div>')}ev.dragManager=ew;ev.dragManager.bdomDoc=ev;ew.handle_initialMouseDown=function(ey){if(en.hasClass(ey.target,"bd-editbarIcon")&&!en.hasClass(ey.target,"bd-icon-dragbar")){return}var ex=0;if(window.ActiveXObject&&!window.Performance){ex=ey.button-1}if(ex==0){if(ew.isDragging){ew.stopDrag(ey)}ew.dragOptions=ew.initializeDrag({pageX:ey.pageX,pageY:ey.pageY,screenX:ey.screenX,screenY:ey.screenY});ew.dragOptions._htmlTarget=ey.target;ew.startDrag(ey);if(ew.isDragging){if(ey.preventDefault&&ey.target.tagName.toLowerCase()==="img"){ey.preventDefault()}}}};ew.startDrag=function(eA){var ex=ew.getViewControllerFromHtml(ew.dragOptions._htmlTarget);if(ex){if(!window.event){window.event=eA}var ey=ex.ownerDocument.createEvent("DragEvent");ey.htmlTarget=ew.dragOptions._htmlTarget;var ez=new ep();ew.dataTransfer=ez;ey.initDragEvent("dragStart",true,true,eA.view,eA.detail,eA.screenX,eA.screenY,eA.clientX,eA.clientY,eA.ctrlKey,eA.altKey,eA.shiftKey,eA.metaKey,eA.button,eA.relatedTarget,ez);ex.dispatchEvent(ey)}};ew.startDrag2=function(ex){ew.removeInitialHandlers();if(ew.dragOptions.target&&!en.hasClass(ew.dragOptions.target,ew.cqs_resizeGrip)||!ew.dragOptions.target){ew.dragSymbol.style.display="block"}eo.addEventListener(ew.oDocument,"mousemove",ew.handle_dragMouseMove,false);eo.addEventListener(ew.oDocument,"mouseup",ew.handle_dragMouseUp,false);eo.addEventListener(ew.oDocument,"keydown",ew.handle_dragKeyDown,false);en.addClass(document.body,"RuntimeDesign");b$.bdom.util.callMethodRecursively(b$.portal.portalView,"showDragTargets",[])};ew.initializeDrag=function(ey){var ex={pageX:0,pageY:0,screenX:0,screenY:0,target:null,htmlGrip:null,htmlNode:null,viewController:null,addClasses:"test",cursor:"crosshair",containment:null,cursorAt:{left:5},distance:10,grid:[50,20],helper:"clone",opacity:0.35,scroll:true};b$.mixin(ex,ey);return ex};ew.handle_initialMouseUp=function(ex){ew.removeInitialHandlers()};ew.removeInitialHandlers=function(){clearTimeout(ew.initialDragTimeout);eo.removeEventListener(ew.oDocument,"mouseup",ew.handle_initialMouseUp,false);eo.removeEventListener(ew.oDocument,"mousemove",ew.handle_initialMouseMove,false)};ew.handle_initialMouseMove=function(eC){if(ew.dragOptions!=null){var eB=ew.dragOptions.distance,eA=ew.dragOptions.pageX,ez=ew.dragOptions.pageY,ey=eC.pageX,ex=eC.pageY;if(eA-ey>eB||eA-ey<-eB||ez-ex>eB||ez-ex<-eB){ew.startDrag2(eC)}}};ew.handle_dragMouseMove=function(eT){var eF,eP,ey,eQ,eD,eH,ez;if(ew.isDragging){ew.pageX=eT.pageX;ew.pageY=eT.pageY;var eS=ew.dragOptions.dropTarget;if(ew.dragOptions.dragTargets){var eJ=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft;var eI=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;var eA=ew.dragOptions.dropTarget=ew.calculateNearestDragTarget(ew.dragOptions.dragTargets,eT.clientX+eJ,eT.clientY+eI)}if(eS){if(!eA||eS._jxid!=eA._jxid){var eN=eS.ownerDocument.createEvent("DragEvent");eN.htmlTarget=eT.target;eN.initDragEvent("dragLeave",true,true,eT.view,eT.detail,eT.screenX,eT.screenY,eT.clientX,eT.clientY,eT.ctrlKey,eT.altKey,eT.shiftKey,eT.metaKey,eT.button,eT.relatedTarget,this.dataTransfer);eS.dispatchEvent(eN)}if(eA&&eS._jxid!=eA._jxid){var eN=eA.ownerDocument.createEvent("DragEvent");eN.htmlTarget=eT.target;eN.initDragEvent("dragEnter",true,true,eT.view,eT.detail,eT.screenX,eT.screenY,eT.clientX,eT.clientY,eT.ctrlKey,eT.altKey,eT.shiftKey,eT.metaKey,eT.button,eT.relatedTarget,this.dataTransfer);eA.dispatchEvent(eN)}}else{if(eA){var eN=eA.ownerDocument.createEvent("DragEvent");eN.htmlTarget=eT.target;eN.initDragEvent("dragEnter",true,true,eT.view,eT.detail,eT.screenX,eT.screenY,eT.clientX,eT.clientY,eT.ctrlKey,eT.altKey,eT.shiftKey,eT.metaKey,eT.button,eT.relatedTarget,this.dataTransfer);eA.dispatchEvent(eN)}}if(eA){var eN=eA.ownerDocument.createEvent("DragEvent");eN.htmlTarget=eT.target;eN.initDragEvent("drag",true,true,eT.view,eT.detail,eT.screenX,eT.screenY,eT.clientX,eT.clientY,eT.ctrlKey,eT.altKey,eT.shiftKey,eT.metaKey,eT.button,eT.relatedTarget,this.dataTransfer);eA.dispatchEvent(eN)}if(ew.dragOptions.dropTarget){var eG=ew.dragOptions.dropTarget.ownerDocument.dragIndicator.getDisplay();var eR=[],eB=true,eO=0;while(eG&&eG.nodeType==1){var eM=en.getStyle(eG,"overflow-y")||en.getStyle(eG,"overflow");if(eM&&eM!="hidden"&&eM!="visible"){eR.push(eG)}eG=eG.parentNode}if(!eR.length){eB=false;eG=ew.dragOptions.dropTarget.ownerDocument.dragIndicator.getDisplay();while(eG&&eG.nodeType==1){if(eG.tagName==="BODY"||eG.tagName==="HTML"){eR.push(eG)}eG=eG.parentNode}if(eR.length){eO=eR[0].scrollHeight}}}if(ew.dragElement){eF=(eB?eT.clientY+ew.dragOptions.offsetTop:eT.pageY);if(!eB&&document.documentMode&&document.documentMode==8){eF=eT.pageY+eR[1].scrollTop}eP=((eT.clientX-ew.dragOptions.offsetLeft)+document.body.scrollLeft);ey=(eF+document.body.scrollTop);eQ=document.body.offsetWidth;eD=document.body.offsetHeight;eH=ew.dragElement.offsetWidth;ez=ew.dragElement.offsetHeight;ew.dragElement.style.left=(eP+eH>eQ?eQ-eH:eP)+"px";ew.dragElement.style.top=(ey+ez>eD?eD-ez:ey)+"px"}if(ew.dragOptions.dropTarget&&ew.dragOptions.dropTarget.ownerDocument.dragIndicator){clearTimeout(ew.scrollTimeout);var eK,eC,eL=eT.clientY,ex=eT.pageY;var eE=function(){for(var eU=0;eU<eR.length;eU++){if(eB){eC=ex;eK=en.getBoxObject(eR[eU],"border")}else{eC=eL;eK={y:0,h:eR[eU].clientHeight};if(ew.dragElement&&(eR[eU].scrollTop>eO+ew.dragElement.clientHeight)){clearTimeout(ew.scrollTimeout);return}}var eV=eK.h/4;if(eC<eK.y+eV){var eW=eR[eU].scrollTop;if(eW>10){eW=10}eR[eU].scrollTop=eR[eU].scrollTop-eW}if(!(eC<eK.y+eV+eV+eV)){if(eC<eK.y+eV+eV+eV+eV){var eW=(eR[eU].scrollHeight-eR[eU].scrollTop);if(eW>10){eW=10}if(b$.bUAWebKit&&eR[eU].localName=="html"){document.body.scrollTop=document.body.scrollTop+(eW)}else{eR[eU].scrollTop=eR[eU].scrollTop+(eW)}}else{var eW=(eR[eU].scrollHeight-eR[eU].scrollTop);if(eW>15){eW=15}eR[eU].scrollTop=eR[eU].scrollTop+(eW)}}}ew.scrollTimeout=setTimeout(eE,20)};ew.scrollTimeout=setTimeout(eE,20)}el();return}},ew.stopDrag=function(eB,ez){var eC=ew.dragOptions.dropTarget,ey,eA,ex;if(ew.dragCover.parentNode===document.body){document.body.removeChild(ew.dragCover)}eo.removeEventListener(this.oDocument,"mousemove",ew.handle_dragMouseMove,false);eo.removeEventListener(this.oDocument,"mouseup",ew.handle_dragMouseUp,false);eo.removeEventListener(this.oDocument,"keydown",ew.handle_dragKeyDown,false);clearTimeout(ew.scrollTimeout);eC=ew.dragOptions&&ew.dragOptions.dropTarget;if(eC){ey=eC.ownerDocument.createEvent("DragEvent");ey.htmlTarget=eB.target;ey.initDragEvent("dragLeave",true,true,eB.view,eB.detail,eB.screenX,eB.screenY,eB.clientX,eB.clientY,eB.ctrlKey,eB.altKey,eB.shiftKey,eB.metaKey,eB.button,eB.relatedTarget,this.dataTransfer);eC.dispatchEvent(ey);if(ez){ey=eC.ownerDocument.createEvent("DragEvent");ey.htmlTarget=eB.target;ey.initDragEvent("dragDrop",true,true,eB.view,eB.detail,eB.screenX,eB.screenY,eB.clientX,eB.clientY,eB.ctrlKey,eB.altKey,eB.shiftKey,eB.metaKey,eB.button,eB.relatedTarget,this.dataTransfer);eC.dispatchEvent(ey);ew.dragSymbol.style.display="none";ew.dragSymbol.style.left="-9999px";if(ew.dragOptions.htmlNode){ew.dragOptions.htmlNode=null}}else{eA=en.getBoxObject(this.dragOptions.htmlNode);ex=this.dragElement;en.animate(ex,{top:eA.top,left:eA.left,opacity:0.5},300,function(){en.setStyle(ex,"display","none")})}}else{ew.dragSymbol.style.display="none"}if(this.scrollInterval){clearInterval(this.scrollInterval);this.scrollInterval=null}en.removeClass(document.body,"RuntimeDesign");b$.bdom.util.callMethodRecursively(b$.portal.portalView,"hideDragTargets",[]);ew.isDragging=false};ew.handle_dragKeyDown=function(ey){var ex;if(ey.keyCode==27){ew.stopDrag(ey,false);ey.stopPropagation();ex=new CustomEvent("cancelDrag",{detail:{message:"Cancel Drag",time:new Date()},bubbles:true,cancelable:true});top.document.dispatchEvent(ex)}};ew.handle_dragMouseUp=function(eC){if(ew.cancelDropTargets.length){var ey=false;for(var ez=0,ex=ew.cancelDropTargets.length;ez<ex;ez++){var eA=ew.cancelDropTargets[ez];var eB=en.getBoxObject(eA,"border");if(es(eC.pageX,eC.pageY,eB.x,eB.y,eB.w,eB.h)){ey=true;ew.stopDrag(eC,false);break}}if(!ey){ew.stopDrag(eC,true)}}else{ew.stopDrag(eC,true)}el()};eo.addEventListener(eu,"mousedown",ew.handle_initialMouseDown,false)},getViewControllerFromHtml:function(eu){while(eu){if(eu.viewController){return eu.viewController}eu=eu.parentNode}},getDragTargetsFilter:function(eu,ew,ev){var ex=[];this._getDragTargetsFilter(eu,ew,ex,ev);return ex},_getDragTargetsFilter:function(eu,ex,eA,ew){for(var ey=0,ev=eu.length;ey<ev;ey++){if(eu[ey]==ex){return}}if(ew(ex)){eA.push(ex)}var ez=ex.childNodes;for(var ey=0;ey<ez.length;ey++){this._getDragTargetsFilter(eu,ez[ey],eA,ew)}},getDragTargets:function(ew,eu,ey){if(ew!=eu){if(eu.dragIsTarget){if(eu.dragIsTarget()){ey.push(eu)}}else{console.log("Method dragIsTarget not found on ",eu)}var ex=eu.childNodes;for(var ev=0;ev<ex.length;ev++){this.getDragTargets(ew,ex[ev],ey)}}},doDrag:function(eB,eC,eu,eE,ez,ew,eD,ey){var eA,ev=this,ex=ev.oDocument;if(!ev.isDragging){ev.isDragging=true;if(!ev.dragOptions.dragTargets){eA=ev.bdomDoc.documentElement;ev.dragOptions.dragTargets=this.getDragTargetsFilter([],eA,function(eF){if(eF.dragIsTarget){return eF.dragIsTarget()}})}eo.addEventListener(ex,"mouseup",ev.handle_initialMouseUp,false);eo.addEventListener(ex,"mousemove",ev.handle_initialMouseMove,false);ev.initialDragTimeout=setTimeout(function(){ev.startDrag2()},500)}},setDragSymbol:function(eD,eF,eA,ey){var ex,eu,ew,ev,eC,eB,eE,ez;if(eD.className.indexOf("bp-dragmode-")!=-1){eB="bp-dragmode-";eE=eD.className.indexOf(eB);ez=eD.className.indexOf(" ",eE);eF=eD.className.substring(eE+eB.length,ez)}ex=en.getBoxObject(eD,"border");eu=document.body.scrollTop;ew=document.body.scrollLeft;switch(eF){case"icon":ev=b$.getVC(eD).getPreference("thumbnailUrl");eC=b$.getVC(eD).getPreference("title")||"title not defined";this.dragElement={};if(ev){ev=ev.replace("$(contextRoot)",b$.portal.portalModel.serverURL)}this.dragOptions.offsetTop=0;this.dragOptions.offsetLeft=0;this.dragSymbol.innerHTML='<div class="pm-icon2-img"><img src="'+ev+'"></div><div class="pm-icon2-label"><p>'+eC+"</p></div>";this.dragSymbol.className="pm-icon2 bp-ui-dragRoot pm-panelCatalogIcon";this.dragSymbol.cssText="";this.dragSymbol.style.background="#FFF";this.dragSymbol.style.zIndex="99998";this.dragSymbol.style.position="absolute";this.dragSymbol.style.top=(ey+eu)+"px";this.dragSymbol.style.left=(eA+ew)+"px";this.dragElement=this.dragSymbol;break;case"real":case"copy":this.dragOptions.offsetTop=ex.y-ey;this.dragOptions.offsetLeft=ex.x-eA;this.dragSymbol.innerHTML=eD.innerHTML;this.dragSymbol.className=eD.className;this.dragSymbol.cssText=eD.cssText;this.dragSymbol.style.zIndex="99998";this.dragSymbol.style.position="absolute";this.dragSymbol.style.top=(ex.y+eu)+"px";this.dragSymbol.style.left=(ex.x+ew)+"px";this.dragSymbol.style.width=ex.w+"px";this.dragSymbol.style.height=ex.h+"px";this.dragElement=this.dragSymbol;break;case"line":this.dragOptions.offsetTop=ex.y-ey;this.dragOptions.offsetLeft=ex.x-eA;this.dragSymbol.innerHTML="";this.dragSymbol.className="";this.dragSymbol.cssText="";this.dragSymbol.style.border="1px solid #333";this.dragSymbol.style.background="#CCC";this.dragSymbol.style.zIndex="99998";this.dragSymbol.style.position="absolute";this.dragSymbol.style.top=(ex.y+eu)+"px";this.dragSymbol.style.left=(ex.x+ew)+"px";this.dragSymbol.style.width=ex.w+"px";this.dragSymbol.style.height=ex.h+"px";this.dragSymbol.style.opacity="0.5";this.dragElement=this.dragSymbol;break}},calculateNearestDragTarget:function(ev,eu,eA){var ex=null,ew,ez,ey=Infinity;for(ew=ev.length-1;ew>=0;ew--){ez=en.getBoxObject(ev[ew].htmlNode,"border");if(es(eu,eA,ez.x,ez.y,ez.w,ez.h)){return ev[ew]}}if(ex==null){ex=0}return ev[ex]}});this.DnDnR=em;es=function(ex,ev,eu,ez,ew,ey){return ex>=eu&&ex<=eu+ew&&ev>=ez&&ev<=ez+ey};el=function(){var ev,eu;if(window.getSelection){ev=window.getSelection();ev.removeAllRanges()}else{if(document.selection.createRange){eu=document.selection.createRange();document.selection.empty()}}};eq={getDocumentHeight:function(){var eu=(document.compatMode!="CSS1Compat")?document.body.scrollHeight:document.documentElement.scrollHeight;return Math.max(eu,this.getViewportWH().h)},getDocumentWidth:function(){var eu=(document.compatMode!="CSS1Compat")?document.body.scrollWidth:document.documentElement.scrollWidth;return Math.max(eu,this.getViewportWH().w)},getViewportWH:function(){var eu,ev;if(self.innerHeight){eu=self.innerWidth;ev=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){eu=document.documentElement.clientWidth;ev=document.documentElement.clientHeight}else{if(document.body){eu=document.body.clientWidth;ev=document.body.clientHeight}}}return{w:eu,h:ev}},getViewportScrollWH:function(){var eu,ev;if(self.pageYOffset){eu=self.pageXOffset;ev=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){eu=document.documentElement.scrollLeft;ev=document.documentElement.scrollTop}else{if(document.body){eu=document.body.scrollLeft;ev=document.body.scrollTop}}}return{x:eu,y:ev}},getAll:function(){var ev=this.getViewportWH(),eu=this.getViewportScrollWH();ev.x=eu.x;ev.y=eu.y;ev.docW=this.getDocumentWidth();ev.docH=this.getDocumentHeight();return ev}};b$._private.dimCalc=eq});b$.module("b$.view.perspective",function(){var eq=function(){return this}();var eo=b$.Class;var es=b$._private.ArrayCollection;var en=b$._private.types.STRING;var em=eo.extend(function(eu,et){this.name=eu;this.value=et},{getName:function(){return this.name},getValue:function(){return this.value},equals:function(et){return et===this||(et instanceof em&&this.getName()==et.getName()&&this.getValue()==et.getValue())}});var el=es.extend(function(){es.call(this)},{add:function(et){if(this.getByName(et.getName())){throw new Error("Attempt to add non unique parameter.",arguments,0,em)}es.prototype.add.call(this,et)},getByName:function(eu){for(var et=0;et<this.array.length;et++){if(oParameter.getName()==eu){return oParameter}}return null}});var ep=eo.extend(function(et){if(!ep.NAME_REGEXP.test(et)){throw new Error("Perspective type name does not satisfy the grammar rules.",arguments,0,en)}eo.call(this);this.name=et},{getName:function(){return this.name},getPrimarySurface:function(){return this.name.split(".")[0]},getSecondarySurface:function(){return this.name.split(".")[1]||""}},{NAME_REGEXP:/^([\w\d]+)(?:\.([\w\d]+))?$/});var er=eo.extend(function(et,ev,eu){this.uriTemplate=et;this.type=ev;this.parameters=eu},{getURITemplate:function(){return this.uriTemplate},getType:function(){return this.type},getParameters:function(){return this.parameters},bind:function(){var et=this.parameters;return this.uriTemplate.bind({getContextVariableValue:function(ev){var eu=et.getByName(ev);return eu&&eu.getValue()}})}});this.PerspectiveParameter=em;this.PerspectiveParameters=el;this.PerspectiveType=ep;this.Perspective=er});b$.module("b$.view.url2state",function(){var es="//";var ep=function(et){return new RegExp("\\[(\\$[\\d\\*\\@]+)(?:[^\\]]+)?]",et?"g":"")};var en={};var er=function(ez){var ey,eu;if(ez){ez=ez.replace(/^http[s]?:\/\//,"");var ex=ez.split(es);ey=ex.length>1?ex[ex.length-1]:null}else{ez=window.location.pathname;var eA=ez.split(es);ey=eA.length>1?eA[eA.length-1]:null}if(ey){eu={stateUrl:ey,vars:{}};var ev=ey.replace(/\?.*$/,"").split(/\//);for(var ew=1,et=ev.length;ew<=et;ew++){eu.vars["$"+ew]=ev[ew-1]}}return eu};var eo=function(et){var ew,eu,ev;if(!et||!et.vars){for(ew in en){if(en.hasOwnProperty(ew)){for(eu=0,ev=en[ew].items.length;eu<ev;eu++){b$('[data-pid="'+en[ew].items[eu]+'"]')[0].viewController.refreshHTML()}en[ew].currentValue=""}}return}for(ew in et.vars){if(et.vars.hasOwnProperty(ew)&&en[ew]&&en[ew].currentValue!==et.vars[ew]){for(eu=0,ev=en[ew].items.length;eu<ev;eu++){b$('[data-pid="'+en[ew].items[eu]+'"]')[0].viewController.refreshHTML()}en[ew].currentValue=et.vars[ew]}}};var em=function(et){if(et&&et.preferences){et.preferences.each(function(ez,eu){var ew=String(ez.value).match(ep(true));if(ew){for(var ex=0,ev=ew.length;ex<ev;ex++){var ey=ew[ex];ey=ey.replace(ep(),"$1");en[ey]=en[ey]||{items:[]};if(en[ey].items.indexOf(et.name)===-1){en[ey].items.push(et.name)}}}})}};var el=er();if(el){for(var eq in el.vars){if(el.vars.hasOwnProperty(eq)){en[eq]={currentValue:el.vars[eq],items:[]}}}}b$._private.html.addEventListener(document,"click",function(ew){if(b$.view&&!b$.view.url2state.active){return}if(ew.button!==0){return}if(!b$.ua){return}var et=ew.target||ew.srcElement,ev=b$.ua.queryAncestor(et,"a"),ey=ev?ev.getAttribute("href"):null,eu;if(ev&&ey&&ey.toLowerCase().indexOf("javascript:")===-1){eu=er(ey);if(eu){var ex=window.history.state?window.history.state:{};ex.stateUrl=eu.stateUrl;ex.vars=eu.vars;if(ew.preventDefault){ew.preventDefault()}if(window.history.pushState){window.history.pushState(ex,ey,ey);eo(eu)}else{window.location.href=ey}}}});b$._private.html.addEventListener(window,"popstate",function(eu){if(b$.view&&!b$.view.url2state.active){return}if(eu.state){eo(eu.state)}else{var et=er();if(et){eo(et)}}});this.separator=es;this.statefulItems=en;this.getStateData=er;this.applyStateChange=eo;this.parseStatePreferences=em;this.active=true});b$.module("b$.utils",function(){function el(eo){return eo.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function en(eo){eo=eo||{};for(var ep in eo){if(eo.hasOwnProperty(ep)){document.cookie=ep+"="+eo[ep]}}}function em(et){var eo,ep={},es,er;if(document.cookie){eo=document.cookie.split(";");for(var eq=0;eq<eo.length;eq++){es=el(eo[eq]);er=es.split("=");ep[er[0]]=er[1]}return ep[et]}}this.setCookies=en;this.getCookie=em;this.trim=el});b$.module("b$.utils.xsrf",function(){var es="BBXSRF";var eo="X-BBXSRF";var em=b$.require("b$.utils.getCookie");function er(){return em(es)}function eq(){return es}function el(){return eo}function ep(et){var eu=typeof et==="string"?et.toUpperCase():null;return eu==="POST"||eu==="PUT"||eu==="PATCH"||eu==="DELETE"}function en(ew){var eu=eq();var ev=er();var et=document.createElement("input");if(ev){et.setAttribute("type","hidden");et.setAttribute("name",eu);et.setAttribute("value",ev);ew.appendChild(et)}}this.getXSRFCookie=er;this.getXSRFCookieName=eq;this.getXSRFRequestHeaderName=el;this.appendXSRFInputElementTo=en;this.isMethodUnsafe=ep});function cy(en){var em=null,el=en.responseText;if(el){em=db(el)}if(!em||((bQ&&dg<9&&em.parseError!=0)||!em.documentElement||em.getElementsByTagName("parsererror").length)){return null}return em}function dd(eo){var ez=new b9,ev=eo.headers||{},ex=eo.headers||{},eu="async" in eo?eo.async:true,en=eo.contentType||ex["Content-Type"]||"application/x-www-form-urlencoded; charset=UTF-8",el=eo.data||null,eB=eo.dataFilter||null,ep="global" in eo?eo.global:true,em="ifModified" in eo?eo.ifModified:true,ew=eo.mimeType||null,er=eo.password||null,eC="processData" in eo?eo.processData:true,eE=eo.statusCode||{},eq=eo.type||"GET",ey=eo.url||".",eG=eo.username||null,eF=ex["Content-Type"]||"",et=eo.dataType,ey=eo.url||".",eq="type" in eo?da(eo.type).toUpperCase():"GET",eD;if(el!=null){if(typeof el=="object"&&!("ownerDocument" in el)){el=c4(el)}if(eq=="POST"){if(!eF&&typeof el=="string"){ev["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"}}else{ey+=(ey.indexOf("?")==-1?"?":"&")+el;el=null}}ez.open(eq,ey,eu);for(var es in ev){if(ev.hasOwnProperty(es)){ez.setRequestHeader(es,ev[es])}}var eA=ez.onreadystatechange=function(){if(ez.readyState==4){if(eD){fClearTimeout(eD)}var eH=ez.status,eJ="success";if(eH>=200&&eH<=300||eH==304||eH==1223){var eI=ez.responseText,eM=ez.getResponseHeader("Content-Type")||"",eL=eM.match(/(\w+)\/([-\w]+\+)?(?:x\-)?([-\w]+)?;?(.+)?/)?dE.$3:"";if(et!="text"){if(et=="xml"||eL=="xml"){eI=cy(ez);if(!eI){eJ="parsererror"}}else{if(et=="json"||eL=="json"){try{eI=oJSON.parse(eI)}catch(eK){eJ="parsererror"}}else{if(et=="script"||eL=="javascript"||eL=="ecmascript"){try{fBrowser_eval(eI)}catch(eK){eJ="error"}}}}}}else{eJ="error"}if(eJ=="success"){if(eo.success){eo.success(eI,eJ,ez)}}else{if(eo.error){eo.error(ez,eJ)}}if(eo.complete){eo.complete(ez,eJ)}}};if(eu&&!aQ(eo.timeout)){eD=f(function(){ez.onreadystatechange=new Y;ez.abort();if(eo.error){eo.error(ez,"timeout")}if(eo.complete){eo.complete(ez,"timeout")}},eo.timeout)}ez.send(el);if(!eu&&W&&dg<2){eA()}return ez}function c4(em){var el=[];if(em instanceof cf){throw new cu("NOT_SUPPORTED_ERR")}else{if(em instanceof cW){(function(eo,es){if(es instanceof bT){for(var en=0,er=es.length,ep;en<er;en++){arguments.callee(eo+"["+((ep=es[en]) instanceof bT||typeof ep=="object"?en:"")+"]",ep)}}else{if(es instanceof cW){for(var eq in es){arguments.callee(eo+(eo==""?eq:"["+eq+"]"),es[eq])}}else{el[el.length]=G(eo)+"="+G(es)}}})("",em)}else{throw new cu("NOT_SUPPORTED_ERR")}}return el.join("&").replace(/%20/g,"+")}bo(b$,{ajax:function(em,el){if(em instanceof da){if(!el){el={}}el.url=em}else{el=em}return dd(el)},param:function(el){return c4(el)},get:function(el,em,en,eo){return dd({url:el,type:"GET",data:em,dataType:eo,success:en})},post:function(el,em,en,eo){return dd({url:el,type:"POST",data:em,success:en,dataType:eo})}});function cT(eo,el,em,en){au(eo);av(eo,"DOMContentUnload",false,false);eo._dcl_xhr=null;eo._dcl_timeout=f(function(){var ep={};ep.url=el;ep.type="GET";ep.dataType="xml";ep.data=em||null;ep.success=function(es,er,et){while(eo.lastChild){eo.removeChild(eo.lastChild)}o(eo);var eq=eo.ownerDocument?eo.ownerDocument:eo;eo.appendChild(dU(eq,es.documentElement,true));av(eo,"DOMContentLoad",false,false,{url:el,data:em});if(en){en(et.responseText,er,et)}};ep.error=function(er,eq){av(eo,"DOMContentError",false,false,{url:el,data:em,message:eq,request:er})};eo._dcl_xhr=dd(ep);eo._dcl_timeout=null},1)}function au(el){if(el._dcl_timeout||el._dcl_xhr){if(el._dcl_xhr){el._dcl_xhr.abort()}o(el);av(el,"DOMContentAbort",false,false)}}function o(el){delete el._dcl_xhr;if(el._dcl_timeout){dI(el._dcl_timeout);delete el._dcl_timeout}}b$.prototype.load=function(em,eo,ep){var el={};if(eo instanceof Y){ep=eo;eo=null}var en;if(ep){en=function(er,eq){ep(er.responseText,eq,er)}}dQ(this,function(){cT(this,em,eo,en)});return this};b$.prototype.abort=function(){dQ(this,function(){au(this)});return this};var aM,bD,bf,F=/[\t\r\n]/g,at=/\r/g,aT=/^(?:button|input)$/i,bp=/^(?:button|input|object|select|textarea)$/i,a6=/^a(?:rea|)$/i,c6=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i;bo(b$,{valHooks:{option:{get:function(el){var em=el.attributes.value;return !em||em.specified?el.value:el.text}},select:{get:function(el){var er,em,eq,eo,ep=el.selectedIndex,es=[],et=el.options,en=el.type==="select-one";if(ep<0){return null}em=en?ep:0;eq=en?ep+1:et.length;for(;em<eq;em++){eo=et[em];if(eo.selected&&(b$.support.optDisabled?!eo.disabled:eo.getAttribute("disabled")===null)&&(!eo.parentNode.disabled||!b$.nodeName(eo.parentNode,"optgroup"))){er=b$(eo).val();if(en){return er}es.push(er)}}if(en&&!es.length&&et.length){return b$(et[ep]).val()}return es},set:function(em,en){var el=b$.makeArray(en);b$(em).find("option").each(function(){this.selected=b$.inArray(b$(this).val(),el)>=0});if(!el.length){em.selectedIndex=-1}return el}}},attrFn:{},attr:function(er,eo,es,eq){var en,el,ep,em=er.nodeType;if(!er||em===3||em===8||em===2){return}if(eq&&b$.isFunction(b$.fn[eo])){return b$(er)[eo](es)}if(typeof er.getAttribute==="undefined"){return b$.prop(er,eo,es)}ep=em!==1||!b$.isXMLDoc(er);if(ep){eo=eo.toLowerCase();el=b$.attrHooks[eo]||(c6.test(eo)?bD:aM)}if(es!==undefined){if(es===null){b$.removeAttr(er,eo);return}else{if(el&&"set" in el&&ep&&(en=el.set(er,es,eo))!==undefined){return en}else{er.setAttribute(eo,es+"");return es}}}else{if(el&&"get" in el&&ep&&(en=el.get(er,eo))!==null){return en}else{en=er.getAttribute(eo);return en===null?undefined:en}}},removeAttr:function(eo,eq){var ep,er,em,el,en=0;if(eq&&eo.nodeType===1){er=eq.split(bc);for(;en<er.length;en++){em=er[en];if(em){ep=b$.propFix[em]||em;el=c6.test(em);if(!el){b$.attr(eo,em,"")}eo.removeAttribute(getSetAttribute?em:ep);if(el&&ep in eo){eo[ep]=false}}}}},attrHooks:{type:{set:function(el,em){if(aT.test(el.nodeName)&&el.parentNode){b$.error("type property can't be changed")}else{if(!b$.support.radioValue&&em==="radio"&&b$.nodeName(el,"input")){var en=el.value;el.setAttribute("type",em);if(en){el.value=en}return em}}}},value:{get:function(em,el){if(aM&&b$.nodeName(em,"button")){return aM.get(em,el)}return el in em?em.value:null},set:function(em,en,el){if(aM&&b$.nodeName(em,"button")){return aM.set(em,en,el)}em.value=en}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(eq,eo,er){var en,el,ep,em=eq.nodeType;if(!eq||em===3||em===8||em===2){return}ep=em!==1||!b$.isXMLDoc(eq);if(ep){eo=b$.propFix[eo]||eo;el=b$.propHooks[eo]}if(er!==undefined){if(el&&"set" in el&&(en=el.set(eq,er,eo))!==undefined){return en}else{return(eq[eo]=er)}}else{if(el&&"get" in el&&(en=el.get(eq,eo))!==null){return en}else{return eq[eo]}}},propHooks:{tabIndex:{get:function(em){var el=em.getAttributeNode("tabindex");return el&&el.specified?parseInt(el.value,10):bp.test(em.nodeName)||a6.test(em.nodeName)&&em.href?0:undefined}}}});bo(b$.fn,{attr:function(el,em){return b$.access(this,b$.attr,el,em,arguments.length>1)},removeAttr:function(el){return this.each(function(){b$.removeAttr(this,el)})},prop:function(el,em){return b$.access(this,b$.prop,el,em,arguments.length>1)},removeProp:function(el){el=b$$ry.propFix[el]||el;return this.each(function(){try{this[el]=undefined;delete this[el]}catch(em){}})},addClass:function(ep){var er,en,em,eo,eq,es,el;if(b$.isFunction(ep)){return this.each(function(et){b$(this).addClass(ep.call(this,et,this.className))})}if(ep&&typeof ep==="string"){er=ep.split(bc);for(en=0,em=this.length;en<em;en++){eo=this[en];if(eo.nodeType===1){if(!eo.className&&er.length===1){eo.className=ep}else{eq=" "+eo.className+" ";for(es=0,el=er.length;es<el;es++){if(eq.indexOf(" "+er[es]+" ")<0){eq+=er[es]+" "}}eo.className=String.trim?b$.trim(eq):eq.replace(/^\s+|\s+$/g,"")}}}}return this},removeClass:function(er){var eo,ep,eq,es,em,en,el;if(b$.isFunction(er)){return this.each(function(et){b$(this).removeClass(er.call(this,et,this.className))})}if((er&&typeof er==="string")||er===undefined){eo=(er||"").split(bc);for(en=0,el=this.length;en<el;en++){eq=this[en];if(eq.nodeType===1&&eq.className){ep=(" "+eq.className+" ").replace(F," ");for(es=0,em=eo.length;es<em;es++){while(ep.indexOf(" "+eo[es]+" ")>=0){ep=ep.replace(" "+eo[es]+" "," ")}}eq.className=er?(String.trim?b$.trim(ep):ep.replace(/^\s+|\s+$/g,"")):""}}}return this},toggleClass:function(eo,em){var en=typeof eo,el=typeof em==="boolean";if(b$.isFunction(eo)){return this.each(function(ep){b$(this).toggleClass(eo.call(this,ep,this.className,em),em)})}return this.each(function(){if(en==="string"){var er,eq=0,ep=b$(this),es=em,et=eo.split(bc);while((er=et[eq++])){es=el?es:!ep.hasClass(er);ep[es?"addClass":"removeClass"](er)}}else{if(en==="undefined"||en==="boolean"){if(this.className){b$._data(this,"__className__",this.className)}this.className=this.className||eo===false?"":b$._data(this,"__className__")||""}}})},hasClass:function(el){var eo=" "+el+" ",en=0,em=this.length;for(;en<em;en++){if(this[en].nodeType===1&&(" "+this[en].className+" ").replace(F," ").indexOf(eo)>=0){return true}}return false},val:function(eo){var el,em,ep,en=this[0];if(!arguments.length){if(en){el=b$.valHooks[en.type]||b$.valHooks[en.nodeName.toLowerCase()];if(el&&"get" in el&&(em=el.get(en,"value"))!==undefined){return em}em=en.value;return typeof em==="string"?em.replace(at,""):em==null?"":em}return}ep=b$.isFunction(eo);return this.each(function(er){var es,eq=b$(this);if(this.nodeType!==1){return}if(ep){es=eo.call(this,er,eq.val())}else{es=eo}if(es==null){es=""}else{if(typeof es==="number"){es+=""}else{if(b$.isArray(es)){es=b$.map(es,function(et){return et==null?"":et+""})}}}el=b$.valHooks[this.type]||b$.valHooks[this.nodeName.toLowerCase()];if(!el||!("set" in el)||el.set(this,es,"value")===undefined){this.value=es}})}});function aF(eo,eq,ep,em){var en=new aS,el=function(er){var es=function(eu){en.importStylesheet(eu);var et=en.transformToDocument(er);if(ep){ep.call(b$,et)}};if(eq.nodeType){es(eq)}else{eq=String(eq);if(eq.substr(0,1)=="<"){es(new aI().parseFromString(eq))}else{dd({url:eq,success:es})}}}}b$.prototype.xslt=function(em,ep,eo,el){var en=this;aF(em,ep,function(er){var eq=en[0].ownerDocument.importNode(er.documentElement,true);en.each(function(){while(this.lastChild){this.removeChild(this.lastChild)}this.appendChild(eq.cloneNode(true));if(eo){eo.call(this,er)}})},el);return this};b$.module("b$.portal.preferences",function(){var eB=b$.Class;var em=b$._private.ArgumentException;var eA=b$.portal.OrderedCollection;var ew=b$._private.types.BOOLEAN;var ez=b$._private.types.NUMBER;var eu=b$._private.types.FUNCTION;var ey=b$._private.types.STRING;var er=b$._private.types.TypeConstraintOptional;var ep=b$._private.types.TypeConstraintNull;var eq=new er(ew);var eo=new er(ez);var ex=new er(eu);var ev=new ep(ey);b$.portal.preferences.roleScale=["admin","manager","user","none"];b$.portal.preferences.inputType=function(){var eD={};eD.base=eB.extend(null,{name:"base"});eD.text=eD.base.extend(null,{name:"text"});eD.textarea=eD.base.extend(null,{name:"textarea"});eD["boolean"]=eD.base.extend(null,{name:"boolean"});eD.password=eD.base.extend(null,{name:"password"});eD["select-one"]=eD.base.extend(function(eE){if(!eE){eE=[]}this.options=eE},{name:"select-one"});eD.checkbox=eD["select-one"].extend(function(eE){if(!eE){eE=[]}this.options=eE},{name:"checkbox"});eD.radio=eD["select-one"].extend(function(eE){if(!eE){eE=[]}this.options=eE},{name:"radio"});eD["select-multiple"]=eD.base.extend(function(eE){if(!eE){eE=[]}this.options=eE},{name:"select-multiple"});eD["checkbox-multiple"]=eD["select-multiple"].extend(null,{name:"checkbox-multiple"});eD.range=eD.base.extend(function(eF,eE,eG){if(eF>eE){throw new em("Incorrect range boundaries.",arguments,0,ez)}eG=typeof eG=="number"?eG:1;this.min=eF;this.max=eE;this.step=eG},{name:"range"});return eD}();b$.portal.preferences.validType=function(){var eD={};eD.base=eB.extend(null,{name:"base",validate:function(eE){if(true){}else{if(true){throw languages[lang]["base"][0]}else{throw languages[lang]["base"][1]}}return true}});eD.none=eB.extend(null,{name:"none",validate:function(eE){return true}});return eD}();var et=b$.bdom.events.EventTarget;var es=et.extend(function(){et.call(this);this.name=null;this.specified=false;this.value=null;this.ownerElement=null;this.label=null;this.viewHint=null;this.markedForDeletion=null;this.manageable=null;this.dataType=null;this.inputType=null;this.validType=null},{setValue:function(eF){eF=this.dataType.parseFromString(eF);if(!this.dataType.test(eF)){throw new em("Incorrect value type.",arguments,0,this.dataType)}if(eF!=this.value){var eD=this.value;this.value=eF;if(this.ownerElement){var eE=this.ownerElement.ownerDocument.createEvent("MutationEvent");eE.initMutationEvent("PrefModified",true,false,this,eD,eF,this.name,b$.bdom.events.MutationEvent.MODIFICATION);this.ownerElement.dispatchEvent(eE,true)}}},getName:function(){return this.name},getValue:function(){return this.value},setLabel:function(eD){this.label=eD;eC(this)},setViewHint:function(eD){this.viewHint=eD;eC(this)},setManageable:function(eD){this.manageable=eD;eC(this)},setDataType:function(eD){this.dataType=eD;eC(this)},setInputType:function(eD){this.inputType=eD;eC(this)},setValidType:function(eD){this.validType=eD;eC(this)},markForDeletion:function(){this.markedForDeletion=true}});function eC(eD){var eE=eD.ownerElement.ownerDocument.createEvent("MutationEvent");eE.initMutationEvent("PrefModified",true,false,eD,eD.value,eD.value,eD.name,b$.bdom.events.MutationEvent.MODIFICATION);eD.ownerElement.dispatchEvent(eE,true)}var el=b$._private.ArrayCollection;var en=el.extend(function(eD,eE){el.call(this,eE);this.ownerElement=eD},{add:function(eD){if(this.getByName(eD.name)){throw new em("Attempt to add non unique preference.",arguments,0,Preference)}eD.ownerElement=this.ownerElement;el.prototype.add.call(this,eD)},remove:function(eD){el.prototype.remove.call(this,eD)},getByName:function(eF){for(var eE=0,eD=this.array.length;eE<eD;eE++){if(this.array[eE].name==eF){return this.array[eE]}}return null}});this.Preferences=en;this.PreferenceNode=es});b$.module("b$.portal.preferences.datatype",function(){var en=b$.Exception;var es=b$._private.types.TypeConstraint;var eo=es.extend(null,{name:"base",serializeToString:function(ev){throw new en("Method not implemented.")},parseFromString:function(ev){throw new en("Method not implemented.")}});var et=eo.extend(null,{name:"string",test:function(ev){return typeof ev=="string"},serializeToString:function(ev){return String(ev)},parseFromString:function(ev){return ev}});var eu=eo.extend(null,{name:"boolean",test:function(ev){return typeof ev=="boolean"},serializeToString:function(ev){return String(ev)},parseFromString:function(ev){return ev.toLowerCase()==="true"}});var eq=eo.extend(null,{name:"double",test:function(ev){return typeof ev=="number"},serializeToString:function(ev){return String(ev)},parseFromString:function(ev){return Number(ev)}});var ep=eo.extend(null,{name:"long",test:function(ev){return typeof ev=="number"},serializeToString:function(ev){return String(ev)},parseFromString:function(ev){return Number(ev)}});var er=eo.extend(null,{name:"contentRef",test:function(ev){return typeof ev=="string"},serializeToString:function(ev){return String(ev)},parseFromString:function(ev){return ev}});var em=eo.extend(null,{name:"linkRef",test:function(ev){return typeof ev=="string"},serializeToString:function(ev){return String(ev)},parseFromString:function(ev){return ev}});var el=eo.extend(null,{name:"uuidRef",test:function(ev){return typeof ev=="string"},serializeToString:function(ev){return String(ev)},parseFromString:function(ev){return ev}});this.DataType=eo;this.StringDataType=et;this.BooleanDataType=eu;this.DoubleDataType=eq;this.LongDataType=ep;this.ContentReferenceDataType=er;this.LinkReferenceDataType=em;this.UuidReferenceDataType=el;this.base=eo;this.string=et;this["boolean"]=eu;this["double"]=eq;this["long"]=ep;this.contentref=er;this.linkref=em;this.uuidref=el});new function(){var eo=function(){return this}(),eE=b$.Class,er=b$.bdom.Namespace,em=b$.bdom.Element,ev=b$.portal.preferences.PreferenceNode,ey=b$.portal.preferences.Preference,et=b$.portal.preferences.Preferences,ew=b$.portal.preferences.datatype.StringDataType,eA=b$.portal.preferences.datatype.BooleanDataType,eC=b$.portal.preferences.datatype.DoubleDataType,eu=b$.portal.preferences.datatype.ContentReferenceDataType,eH=b$.portal.preferences.datatype.UuidReferenceDataType,eF=b$.view.url2state,eJ=b$.document,eD=new er("http://backbase.com/2012/portalModel"),es=b$.bdom.events.MutationEvent;b$.portal.createApplicationModelDocument=function(){var eK=b$.bdom.domImplementation.createDocument("http://backbase.com/2012/portalModel","Application");eK.createPreference=function(eM,eL,eO){var eP=new b$.portal.preferences.PreferenceNode(),eN;eP.name=eM;eL=eL.toLowerCase();eN=b$.portal.preferences.datatype[eL];if(!eN){console.log("dataType for "+eM+" not found "+eL);eN=b$.portal.preferences.datatype.string}eP.dataType=new eN();if(typeof eO==String){eP.value=eP.dataType.parseFromString(eO)}else{eP.value=eO}eP.inputType=new b$.portal.preferences.inputType.text();eP.validType=new b$.portal.preferences.validType.none();return eP};eK.filterPreferences=function(eV){var eQ=b$.portal.preferences.roleScale.length-1,eM="none",eX,eL;function eP(eZ){var eY=b$.portal.preferences.roleScale.indexOf(eZ);return eY!==-1}function eS(eY){var eZ=b$.portal.preferences.roleScale.indexOf(eY);if(eZ<eQ){eQ=eZ;eM=eY;return true}else{return false}}if(b$.portal&&b$.portal.loggedInUserGroup&&b$.portal.loggedInUserGroup.length===0){eM="none"}else{if(b$.portal&&b$.portal.loggedInUserGroup&&b$.portal.loggedInUserGroup.length===1){eM=b$.portal.loggedInUserGroup[0]}else{eX=b$.portal&&b$.portal.loggedInUserGroup&&b$.portal.loggedInUserGroup.filter(eP)||[];eL=eX.filter(eS)}}var eO,eN,eR,eU=[],eW=window.bd&&bd.designMode==="true",eT=function(eZ){var e2=eZ?eZ.split(/,/):[],e0,eY=false,e1=true;for(e0=e2.length-1;e0>=0;e0--){eY=eY||e2[e0]==="designModeOnly";if(b$.portal.preferences.roleScale.indexOf(e2[e0])!==-1){e1=b$.portal.preferences.roleScale.indexOf(e2[e0])<b$.portal.preferences.roleScale.indexOf(eM)}}if(eY&&!eW){return true}return e1};for(eO=0,eN=eV.length;eO<eN;eO++){if(eT(eV[eO].viewHint)){continue}eR=eV[eO];eU.push(eR)}return eU};eK.createAndSaveItemNS=function(eM,eN,eP,eL){eN.contextItemName=b$.portal.portalName;var eO=this;if(!eN.name){eN.name=eN.preferences.TemplateName.value+"-"+window.Math.floor(window.Math.random()*10000000)}if(!eN.extendedItemName){console.log("extendedItemName is required");return}b$.portal.portalServer.saveItemByObject(eN,true,function(eR,eS){if(eR.tag.toLowerCase()=="container"){var eQ=eO.createElementNS(eM,"Container")}else{if(eR.tag.toLowerCase()=="widget"){var eQ=eO.createElementNS(eM,"Widget")}}eQ.setItem(eR,true);var eT=eO.all[eQ.parentItemName];b$.portal.refreshHTML(eQ,null,function(eX,eW){var eV,eU;eT.appendChild(eX);eV=b$.portal.portalView.all[b$.portal.portalReflector.getID(eT)];eU=b$.portal.portalView.all[b$.portal.portalReflector.getID(eX)];eV.insertDisplayChild(eU);if(eP){eP(eQ,eW)}})},function(eQ){if(eL){eL(newItem,eQ)}})};return eK};b$.portal.addPortalModel=function(eN,eL){var eM=eN.documentElement;var eK=eN.createElementNS(eD.namespaceURI,"Portal");eM.appendChild(eK);eK.setConfig(eL);return eK};b$.portal.addPortalModelListeners=function(eK){};var en=eD.registerElement("deprecatedElement",em.extend(function(eM,eL,eK,eN){em.apply(this,arguments)},{namespaceURI:"http://backbase.com/2012/portalModel"}));b$.mixin(en.prototype,b$.bdom.BOldNode);var eI=eD.registerElement("Application",en.extend(function(eM,eL,eK,eN){en.apply(this,arguments);this.tag="application"},{getJSON:function(eL){var eK={tag:this.localName};return eK}}));var ep=eD.registerElement("Item",en.extend(function(eS,eM,eP,eO){en.apply(this,arguments);this.tag="item";this.name=this._jxid;this.contextItemName="";this.extendedItemName="";this.parentItemName="";this.securityProfile="ADMIN";this.preferences=new et(this);this.originalItem={};this.originalItem.preferences={};var eR=this.node.attributes;for(var eQ=0;eQ<eR.length;eQ++){var eK=eR[eQ].name;if(eK!="_jxid"&&eK.indexOf("xmlns")!=0){var eL={};eL.name=eR[eQ].name;eL.value=eR[eQ].nodeValue;this.originalItem.preferences[eL.name]=eL;var eN=eS.createPreference(eL.name,"string");eN.value=eN.dataType.parseFromString(eL.value);eN.label=eR[eQ].name;this.preferences.add(eN)}}},{namespaceURI:"http://backbase.com/2012/portalModel",getJSON:function(eN){var eM={tag:this.localName,name:this.name,contextItemName:this.contextItemName,extendedItemName:this.extendedItemName,parentItemName:this.parentItemName,securityProfile:this.securityProfile,preferences:[],pref:[],tags:this.tags};if(this.preferences.array){for(var eL=0;eL<this.preferences.array.length;eL++){var eO=this.preferences.array[eL];var eK={};eK.name=eO.name;eK.value=eO.value;eK.label=eO.label;eK.dataType=eO.dataType;eK.inputType=eO.inputType;eK.validType=eO.validType;eK.manageable=eO.manageable;eK.viewHint=eO.viewHint;eK.itemName=eO.itemName;eM.preferences.push(eK);eM.pref[eO.name]=eK}}return eM},setItem:function(eS,eK,eL){this.originalItem=JSON.parse(JSON.stringify(eS));eS=JSON.parse(JSON.stringify(eS));this.isNewItem=eK;if(this.name!=eS.name){this.name=eS.name;this.ownerDocument._resetElementId(this,eS.name)}this.contextItemName=eS.contextItemName;this.extendedItemName=eS.extendedItemName;this.parentItemName=eS.parentItemName;this.securityProfile=eS.securityProfile;this.uuid=eS.uuid;this.manageable=eS.manageable;this.tags=eS.tags;this.preferences=new et(this);for(var eN in eS.preferences){var eM=eS.preferences[eN];var eO=this.ownerDocument.createPreference(eM.name,eM.type,undefined,eM.viewHint);var eP=eM.viewHint?eM.viewHint.split(","):[],eQ={"text-input":"text",checkbox:"checkbox","select-one":"select-one"};for(var eN=eP.length;eN--;){if(eQ[eP[eN]]){eO.inputType=new b$.portal.preferences.inputType[eQ[eP[eN]]]()}}eO.value=eO.dataType.parseFromString(eM.value);eO.label=eM.label;eO.viewHint=eM.viewHint;eO.itemName=eM.itemName;eO.manageable=eM.manageable;this.preferences.add(eO);try{this.node.setAttribute(eM.name,eM.value)}catch(eR){console.log(eR)}}if(eS.lastPublicationTimestamp){this.lastPublicationTimestamp=eS.lastPublicationTimestamp}if(eS.publishState){this.publishState=eS.publishState}if(eF){eF.parseStatePreferences(this)}},getPreference:function(eK){var eL=this.preferences.getByName(eK);if(eL){return eL.value}return},getPreferenceNode:function(eK){return this.preferences.getByName(eK)},setPreference:function(eL,eN){var eM=this.preferences.getByName(eL);if(eM&&eM.value==eN){return}var eP;var eO;if(!eM){eM=new ev();eM.name=eL;eM.dataType=new ew();eM.inputType=new b$.portal.preferences.inputType.text();eM.validType=new b$.portal.preferences.validType.none();this.preferences.add(eM);eP=b$.bdom.events.MutationEvent.ADDITION}else{eP=b$.bdom.events.MutationEvent.MODIFICATION;eO=eM.value}eM.value=eN;this.node.setAttribute(eL,eN);var eK=this.ownerDocument.createEvent("MutationEvent");eK.initMutationEvent("PrefModified",true,false,eM,eO,eM.value,eM.name,es.MODIFICATION);this.dispatchEvent(eK,false)},setPreferenceNode:function(eL){var eO=this.preferences.getByName(eL.name);var eN;var eM;if(eO){this.removePreferenceNode(eO);this.preferences.remove(eO);eN=b$.bdom.events.MutationEvent.MODIFICATION;eM=eO.value}else{eN=b$.bdom.events.MutationEvent.ADDITION}this.preferences.add(eL);var eK=this.ownerDocument.createEvent("MutationEvent");eK.initMutationEvent("PrefModified",true,false,eL,eM,eL.value,eL.name,eN);this.dispatchEvent(eK,true)},removePreference:function(eL){var eM=this.preferences.getByName(eL);if(!eM.markedForDeletion){eM.markForDeletion();var eK=this.ownerDocument.createEvent("MutationEvent");eK.initMutationEvent("PrefModified",true,false,eM,null,eM.value,eM.name,es.REMOVAL);this.dispatchEvent(eK,true)}},removePreferenceNode:function(eK){return this.removePreference(eK.name)},createExtendedElement:function(){var eM=this.ownerDocument;var eK=eM.createElementNS("http://backbase.com/2012/portalModel",this.localName);var eL=this.name+"-"+window.Math.floor(window.Math.random()*10000000);eK.setItem({tag:this.tag,contextItemName:this.contextItemName,name:eL},true);eK.extendedItemName=this.name;return eK},createExtendedElementFromJSON:function(eO,eN){var eP=this.ownerDocument;var eK=eO.tag;switch(eK){case"portal":eK="Portal";break;case"page":eK="Page";break;case"container":eK="Container";break;case"widget":eK="Widget";break;case"catalog":eK="Catalog";break}var eL=eP.createElementNS("http://backbase.com/2012/portalModel",eK);var eM=eN?eO.name:eO.name+"-"+window.Math.floor(window.Math.random()*10000000);if(!eO.contextItemName){eL.setItem(eO);eL.name=eM;eL.extendedItemName=eO.name}else{eL.setItem({tag:eO.tag,contextItemName:eO.contextItemName,name:eM,preferences:eO.preferences,parentItemName:eO.parentItemName},true);eL.extendedItemName=eO.name}return eL},refresh:function(eM,eK){var eL=this;b$.portal.portalServer.loadItem(this.originalItem,function(eN){eL.setItem(eN);if(eM){eM()}},eK)},destroyAndSave:function(eM,eK){var eL=this;b$.portal.portalServer.deleteItem(this.originalItem,function(){eL.destroy();if(eM){eM()}},eK)},revert:function(eM,eK){var eL=this;b$.portal.portalServer.revertItem(this.originalItem,function(){if(eM){eM()}},eK)},save:function(eM,eK,eL){if(this.contextItemName){this._savePreferences(eM,eK,eL)}else{if(eM){eM()}}},_savePreferences:function(eZ,eY,eM){var eQ=this.originalItem;var eO={};var eS=false;if(this.manageable!=eQ.manageable){eO.manageable=this.manageable;eQ.manageable=this.manageable;eS=true}if(this.extendedItemName!=eQ.extendedItemName){eO.extendedItemName=this.extendedItemName;eS=true}if(this.parentItemName!=eQ.parentItemName){eO.parentItemName=this.parentItemName;eQ.parentItemName=this.parentItemName;eS=true}if(this.securityProfile!=eQ.securityProfile){eO.securityProfile=this.securityProfile;eS=true}eO.preferences={};for(var eV=0,eR=this.preferences.array.length;eV<eR;eV++){var eN=this.preferences.array[eV];var eU=eN.name;var eT=false;var eL={};eL.name=eU;eL.label=eN.label;eL.type=eN.dataType.name;eL.value=eN.value;eL.manageable=eN.manageable;eL.viewHint=eN.viewHint;if(eN.markedForDeletion){eT=true;eL.deleted=true}else{if(eQ.preferences&&eQ.preferences[eU]){var eX=eQ.preferences[eU];if(eX.label!=eL.label){eX.label=eL.label;eT=1}if(eX.type==="boolean"&&String(eX.value)!=String(eL.value)||eX.type!=="boolean"&&eX.value!=eL.value){eX.value=eL.value;eT=3}if(eX.manageable!=eL.manageable){eX.manageable=eL.manageable;eT=4}}else{eT=true}}if(eT||eM){eS=true;eO.preferences[eU]=eL}}var eP;while(eP in eO.preferences){eS=true;break}if(eS||this.isNewItem){eO.tag=eQ.tag;eO.name=eQ.name;eO.contextItemName=this.contextItemName;var eK=this.isNewItem;this.isNewItem=false;var eW=this;b$.portal.portalServer.saveItemByObject(eO,eK,function(e3){var e4=[];eW.originalItem.name=eO.name;for(var e1=0,e0=eW.preferences.array.length;e1<e0;e1++){var e2=eW.preferences.array[e1];if(!e2.markedForDeletion){e4.push(e2)}}eW.preferences.array=e4;eW.originalItem.preferences=eW.originalItem.preferences||{};for(var e5 in e3.preferences){if(e3.preferences[e5].deleted){delete eW.originalItem.preferences[e5]}else{eW.originalItem.preferences[e5]=e3.preferences[e5]}}if(eZ instanceof Function||eZ instanceof top.Function){eZ.apply(this,arguments)}},eY)}else{if(eZ){eZ()}}}},{handlers:{xDOMNodeInserted:function(eK){if(this==eK.target){console.log("MODEL : DOMNodeInserted",eK.target)}},xDOMNodeInsertedIntoDocument:function(eK){if(this==eK.target){console.log("MODEL : DOMNodeInsertedIntoDocument",eK.target)}}}}));var eG=eD.registerElement("Catalog",ep.extend(function(eM,eL,eK,eN){ep.apply(this,arguments);this.tag="catalog"},{}));var el=eD.registerElement("Portal",ep.extend(function(eM,eL,eK,eN){ep.apply(this,arguments);this.tag="portal"},{setConfig:function(eK){this.ownerDocument.serverURL=eK.serverURL;this.serverURL=eK.serverURL;this.resourceURL=eK.resourceURL;this.portalURN=this.name=eK.portalURN}}));var ex=eD.registerElement("Page",ep.extend(function(eM,eL,eK,eN){ep.apply(this,arguments);this.tag="page"},{}));var eB=eD.registerElement("Container",ep.extend(function(eM,eL,eK,eN){ep.apply(this,arguments);this.tag="container"},{}));var ez=eD.registerElement("Link",ep.extend(function(eM,eL,eK,eN){ep.apply(this,arguments);this.tag="link"},{}));var eq=eD.registerElement("Widget",ep.extend(function(eM,eL,eK,eN){ep.apply(this,arguments);this.tag="widget"},{}))};b$.module("b$.portal._private",function(){var el=b$.Class;var et="0123456789abcdef";var ep=el.extend(function(eu){if(eu){this.serverURL=eu+"/"}},{serverURL:null,itemObject:function(eA,eu,ex,ez,ey,eB,ev,ew){if(!ew){ew={}}ew.contextItemName=eA;ew.tag=eu;ew.name=ex;ew.extendedItemName=ez;ew.parentItemName=ey;ew.securityProfile=eB;ew.preferences=ev;return ew},propertyObject:function(ev,ez,eu,ey,ew,ex){var eA={};eA.name=ev;eA.value=ez;eA.label=eu;eA.type=ey;eA.viewHint=ew;eA.manageable=ex;return eA},simpleRenamer:function(eu){var ew=eu;if(eu.indexOf("::")!=-1){ew=eu.substr(0,eu.indexOf("::"))}ew=ew+"::";for(var ev=0;ev<8;ev++){ew+=et[Math.round(Math.random()*15)]}return ew},copyItem:function(ev,ex,eu){var ew=this;this.loadItem(ev,function(eA,ey){eA.name=ew.simpleRenamer(eA.name);if(ev.parentItemName){eA.parentItemName=ev.parentItemName}delete eA.children;for(var eB in eA.preferences){var ez=eA.preferences[eB];if(ev.name==ez.itemName){ez.itemName=eA.name}}ew.saveItemByObject(eA,true,ex,eu)})},newItem:function(ev,ew,eu){this.saveItemByObject(ev,true,ew,eu)},updateItem:function(ev,ew,eu){this.saveItemByObject(ev,false,ew,eu)},loadItem:function(ew,ez,eu,ev,ey,ex){return this._loadItem(ew,ez,eu,".xml",ev,ey,ex)},loadItemHTML:function(ew,ez,eu,ev,ey,ex){return this._loadItem(ew,ez,eu,".html",ev,ey,ex)},syncLoadItemHTML:function(ew,ez,eu,ev,ey,ex){return this._loadItem(ew,ez,eu,".html",ev,ey,ex,false)},_loadItem:function(eE,eD,eB,ex,eC,eu,ey,ez){if(!eE){return}var ev=this.serverURL;if(eE.tag=="portal"){}else{if(eE.tag=="template"){}else{if(eE.contextItemName=="[BBHOST]"){}else{ev+="portals/"+eE.contextItemName+"/"}}}if(eE.contextItemName=="[BBHOST]"){if(eE.tag=="portal"||eE.tag=="template"||eE.tag=="link"){ev+=eE.tag+"s"}else{ev+="catalog"}}else{if(eE.tag=="catalog"){ev+="catalog"}else{ev+=eE.tag+"s"}}if(eE.name){ev+="/"+eE.name}ev+=ex;if(ev.indexOf("?")==-1){ev+="?"}else{ev+="&"}var eA=window.location.search;if(eA!==""){ev=ev+eA.slice(1,eA.length)+"&"}if(!eC){ev+="pc=false&"}if(eE.tag==="link"&&!eC){ev+="depth=1&"}if(typeof eu!="undefined"){ev+="ps="+eu+"&"}if(ey){ev+="of="+ey+"&"}if(eE.extraParameter){ev+=eE.extraParameter}var ew=this;eq(ev,"","GET",function(eF){if(ex==".xml"){var eG=ew.itemXMLDOC2JSON(eF.responseXML)}else{var eG=eF.responseText}if(eD){eD(eG,{status:eF.status,statusText:eF.statusText,responseHeaders:eF.getAllResponseHeaders()})}},function(eF){if(eB){eB(eE,eF)}},ez!==false)},saveItemByObject:function(ey,ex,eB,eu){var ew=this.serverURL;var ev=this.itemJSON2XML(ey);if(ey.tag=="portal"){}else{if(ey.tag=="template"){}else{if(ey.contextItemName=="[BBHOST]"){}else{ew+="portals/"+ey.contextItemName+"/"}}}if(ey.contextItemName=="[BBHOST]"){if(ey.tag=="portal"){ew+=ey.tag+"s";if(!ex){if(ey.orgName){ew+="/"+ey.orgName}else{ew+="/"+ey.name}}}else{if(ey.tag=="template"){ew+=ey.tag+"s";if(!ex){if(ey.orgName){ew+="/"+ey.orgName}else{ew+="/"+ey.name}}}else{if(ey.tag==="link"){ew+=ey.tag+"s"}else{ew+="catalog";ev="<catalog>"+ev+"</catalog>"}}}}else{if(ey.tag=="catalog"){ew+="catalog";ev="<catalog>"+ev+"</catalog>"}else{if(ex&&!ey.parentItemName){ew+="catalog";ev="<catalog>"+ev+"</catalog>"}else{ew+=ey.tag+"s"}if(!ex){if(ey.orgName){ew+="/"+ey.orgName}else{ew+="/"+ey.name}}}}if(ey.name){}ew+=".xml";ev='<?xml version="1.0" encoding="UTF-8"?>'+ev;var eA=ex?"POST":"PUT";var ez=this;eq(ew,ev,eA,function(eC){if(eC.responseXML&&eC.responseText){var eD=ez.itemXMLDOC2JSON(eC.responseXML);ey.name=eD.name}if(eB){eB(ey,eC)}},function(eC){if(eu){eu(ey,eC)}})},deleteItem:function(ew,ex,eu){var ev;if(ew.tag=="portal"||ew.tag=="template"){ev=this.serverURL}else{ev=this.serverURL+"portals/"+ew.contextItemName+"/"}ev+=ew.tag+"s/"+ew.name+".xml";eq(ev,null,"DELETE",function(){if(ex){ex(ew)}},function(ey){if(eu){eu(ew,ey)}})},revertItem:function(ew,ex,eu){var ev=this.serverURL+"portals/"+ew.contextItemName+"/"+ew.tag+"s/"+ew.name+"/reset.xml";eq(ev,null,"PUT",function(){if(ex){ex(ew)}},function(ey){if(eu){eu(ew,ey)}})},clearCache:function(ew,eu){var ev=this.serverURL;ev+="/caches/globalModelCache";eq(ev,null,"DELETE",function(){if(ew){ew(itemObj)}},function(ex){if(eu){eu(itemObj,ex)}})},doRecursiveSave:function(ev,eu){this._doRecursiveSave([ev],eu)},_doRecursiveSave:function(ew,eu){var ev=ew.pop();if(ev){if(ev.children){ev.children.forEach(function(ey){ew.push(ey)},this)}var ex=this;ev.OLDparentItemName=true;portalServer.saveItemByObject(ev,eu,function(){ex._doRecursiveSave(ew,eu)},function(ey){})}},itemJSON2XML:function(ev){var eu="";eu+="<"+ev.tag+">";eu+="<name>"+ev.name+"</name>";if(ev.contextItemName){eu+="<contextItemName>"+ev.contextItemName+"</contextItemName>"}if(ev.extendedItemName){eu+="<extendedItemName>"+ev.extendedItemName+"</extendedItemName>"}if(ev.parentItemName){eu+="<parentItemName>"+ev.parentItemName+"</parentItemName>"}if(ev.securityProfile){eu+="<securityProfile>"+ev.securityProfile+"</securityProfile>"}if(ev.type){eu+="<type>"+ev.type+"</type>"}if(ev.manageable){eu+="<manageable>"+ev.manageable+"</manageable>"}if(ev.preferences){eu+="<properties>";for(var ex in ev.preferences){if(ev.preferences.hasOwnProperty(ex)){var ew=ev.preferences[ex];if((!ew.itemName||ew.itemName==ev.name)&&ew.name&&ew.type){if(ew.type==="boolean"){ew.value=ew.value!==null&&ew.value!==undefined?ew.value:false}else{if(ew.type==="double"){ew.value=(ew.value==="")?"":parseFloat(ew.value)}else{ew.value=ew.value||((ew.type==="string"||ew.type==="contentRef"||ew.type==="linkRef")&&ew.value!==0?"":0)}}eu+='<property name="'+ew.name+'"';if(ew.viewHint){eu+=' viewHint="'+ew.viewHint+'"'}if(ew.manageable){eu+=' manageable="'+ew.manageable+'"'}if(ew.label){eu+=' label="'+ew.label+'"'}if(ew.deleted){eu+=' markedForDeletion="true"'}eu+=">";eu+="<value";eu+=' type="'+ew.type+'"';eu+=">"+this.encodeXML(ew.value)+"</value>";eu+="</property>"}}}eu+="</properties>"}eu+="</"+ev.tag+">";return eu},itemXMLDOC2JSON:function(eu){var ew=eu.documentElement;var ev=this.itemXML2JSON(ew);return ev},itemChildrenXML2JSON:function(ew,eu){ew.children=[];var ev=eu.firstChild;while(ev){if(ev.nodeType==1){ew.children.push(this.itemXML2JSON(ev))}ev=ev.nextSibling}},itemXML2JSON:function(ex){var eC={tag:ex.tagName};if(eC.tag=="links"){eC=this.itemXML2JSON(ex.firstChild);this.itemChildrenXML2JSON(eC,ex);return eC}if(eC.tag=="portals"||eC.tag=="catalog"){if(eC.tag=="portals"){eC.tag="host"}this.itemChildrenXML2JSON(eC,ex);return eC}eC.contextItemName="";eC.extendedItemName="";eC.parentItemName="";var eA=ex.firstChild;while(eA){var eu=(eA.tagName||eA.baseName);switch(eu){case"name":eC.name=eA.textContent||eA.text;break;case"contextItemName":eC.contextItemName=eA.textContent||eA.text;break;case"extendedItemName":eC.extendedItemName=eA.textContent||eA.text;break;case"parentItemName":eC.parentItemName=eA.textContent||eA.text;break;case"securityProfile":eC.securityProfile=eA.textContent||eA.text;break;case"uuid":eC.uuid=eA.textContent||eA.text;break;case"finalUrl":eC.finalUrl=eA.textContent||eA.text;break;case"properties":eC.preferences={};var ew=eA.firstChild;while(ew){var ez=(ew.tagName||ew.baseName);switch(ez){case"property":var eB={};eB.name=ew.getAttribute("name");eB.itemName=ew.getAttribute("itemName");eB.label=ew.getAttribute("label");if(!eB.label){eB.label=""}eB.manageable=ew.getAttribute("manageable")&&ew.getAttribute("manageable")==="true";eB.viewHint="";if(ew.getAttribute("viewHint")){eB.viewHint=ew.getAttribute("viewHint")}var ev=ew.firstChild;while(ev){var ey=(ev.tagName||ev.baseName);switch(ey){case"value":eB.value=ev.textContent||ev.text||"";eB.value=this.decodeXML(eB.value);eB.type=ev.getAttribute("type");break}ev=ev.nextSibling}eC.preferences[eB.name]=eB;break}ew=ew.nextSibling}break;case"children":eC.children=[];var ew=eA.firstChild;while(ew){if(ew.nodeType==1){eC.children.push(this.itemXML2JSON(ew))}ew=ew.nextSibling}break;case"manageable":eC.manageable=eA.textContent||eA.text;break;case"tags":eC.tags=[];var ew=eA.firstChild,ez;while(ew){ez=(ew.tagName||ew.baseName);switch(ez){case"tag":if(ew.textContent!==""||ew.text!==""){eC.tags.push({type:ew.getAttribute("type")||"",manageable:ew.getAttribute("manageable")||"",value:ew.textContent||ew.text})}break}ew=ew.nextSibling}break;case"lastPublicationTimestamp":eC.lastPublicationTimestamp=eA.textContent||eA.text;break;case"publishState":eC.publishState=eA.textContent||eA.text;break}eA=eA.nextSibling}return eC},encodeXML:function(eu){return typeof eu==="string"?eu.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):eu},decodeXML:function(eu){return typeof eu==="string"?eu.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"):eu}});var eo="BBXSRF";var er="X-BBXSRF";function em(eu){var ev=typeof eu==="string"?eu.toUpperCase():null;return ev==="POST"||ev==="PUT"||ev==="PATCH"||ev==="DELETE"}function es(ev){var ex=ev+"=";var eu=document.cookie.split(";");for(var ew=0;ew<eu.length;ew++){var ey=eu[ew];while(ey.charAt(0)==" "){ey=ey.substring(1,ey.length)}if(ey.indexOf(ex)==0){return ey.substring(ex.length,ey.length)}}return null}function en(){return es(eo)}function eq(ev,ez,eu,eB,eA,ey){var ew=new XMLHttpRequest(),eC=b$.require("b$.utils.xsrf");ew.onreadystatechange=function(){if(this.readyState==4){var eE=(this.status+"").charAt(0);if(eE=="0"||eE=="2"||eE=="3"){eB(this)}else{var eF=this;var eD={readyState:eF.readyState,responseText:eF.responseText,status:eF.status,statusText:eF.statusText};eA(eD)}}};ew.open(eu,encodeURI(ev),ey!==false);ew.setRequestHeader("Content-Type","application/xml");ew.setRequestHeader("BB-Link",b$._private.format.base64.encode(window.location.href));if(eC.isMethodUnsafe(eu)){var ex=eC.getXSRFCookie();if(ex){ew.setRequestHeader(eC.getXSRFRequestHeaderName(),ex)}}ew.send(ez)}this.PortalServer=ep});b$.module("b$.portal",function(){var eq=b$._private.htmlAPI;var el=b$.Class;this.controllers={};this.setController=function(ew,ev){this.controllers[ew]=ev};this.loadCatalog=function(){var ez=b$.portal.portalModel;var ev=this.createVirtualWidget(ez,"static/backbase.com.2012.sabre/widgets/CatalogBrowser/index.html");var ex=ez.documentElement.firstChild;ex.appendChild(ev);var ey=b$.portal.portalView;var ex=ey.documentElement.firstChild;var ew=b$.portal.portalReflector.reflect(ev,ey,null,ex)};this.createVirtualWidget=function(ey,ew){var ev=ey.createElementNS("http://backbase.com/2012/portalModel","Widget");var ex="generated-"+window.Math.floor(window.Math.random()*10000000);ew=ey.serverURL+"/"+ew;ev.setItem({tag:"widget",contextItemName:"null",name:ex,preferences:{TemplateName:{name:"TemplateName",itemName:ex,label:"",viewHint:"",manageable:"true",value:"Standard_Widget",type:"string"},title:{name:"title",itemName:ex,label:"",viewHint:"text-input",manageable:"true",value:"title",type:"string"},src:{name:"src",itemName:ex,label:"URI",viewHint:"",manageable:"true",value:ew,type:"string"}},securityProfile:"ADMIN"});return ev};var em=this;this.startup=function(ev,ey){var ex=false;try{window.top.bd}catch(ew){ex=true}if(!ex&&window.top.bd&&self!=top&&!window.top.bd.previewWindow&&!window.top.bd.Versions.previewMode){b$.portal.fnDelayStartup=function(){em.startup2(ev,ey)}}else{em.startup2(ev,ey)}};this.startup2=function(ew,ex){var ev={};if(ev){ev={serverURL:b$.portal.config.serverRoot,resourceURL:b$.portal.config.resourceRoot,portalURN:b$.portal.portalName}}this.pageStartup(ew,ev,function(eD,ez){var ey=document.getElementsByTagName("script"),eB;for(var eC=ey.length-1;eC>=0;eC--){if(ey[eC].type&&ey[eC].type==="text/backbase-xml"){eB=ey[eC].firstChild||ey[eC];break}}if(eB){var eA=b$.bdom.util.processTools.parseFromString(eB.wholeText||eB.textContent||eB.innerHTML||eB.text||"");b$.portal.importPortalModel(eA,eD,ez)}else{console.log("Model not found...")}},ex)};this.pageStartup=function(eD,eE,eA,ey){b$.boot();if(!eE){eE={}}if(!eE.serverURL){eE.serverURL=b$.portal.config.serverRoot}this.portalServer=new b$.portal._private.PortalServer(eE.serverURL);if(window.gadgets){gadgets.config.proxyUrl=eE.serverURL+"/proxy"}var ev=b$.portal.createApplicationModelDocument();b$.portal.portalModel=ev;var ew=this.createPortalView();b$.portal.portalView=ew;var ex=new b$.view.bdom.dd.DnDnR();ex.initialize(document,ew);var eB=b$.portal.addPortalModel(ev,eE);ew.appendChild=function(eG){b$.bdom.Document.prototype.appendChild.call(this,eG);return eG};var ez=ev.documentElement;var eC=document.getElementById(eD);en=eC;b$._private.ssrRootElement=eC;this.controllers.portal.reflectDeep(ez,ew,document.body,ew);if(window.DBG){console.log("________________________________pageStartup fnImport________________________________")}if(eA){eA(ev,eB)}var eF=ev.createEvent("CustomEvent");eF.initCustomEvent("DOMReady",false,false);ev.dispatchEvent(eF,false);if(ey){ey(ew)}if(window.DBG){console.log("________________________________pageStartup END________________________________")}return};this.getCurrentPage=function(){return{name:b$.portal.pageName}};this.getCurrentPortal=function(){return{name:b$.portal.portalName}};this.defaultDragHandlers={dragStart:function(ey){if(top.bd&&top.bd.Versions&&top.bd.Versions.previewMode){return}var ew=this.ownerDocument.dragManager;var ez=eq.hasClassUpwards(ey.htmlTarget,ew.cqs_resizeGrip);if(ez){window.event.preventDefault();var ev=eq.hasClassUpwards(ey.htmlTarget,ew.cqs_dragRoot);ew.dragOptions.target=ez;ew.dragOptions.viewController=this.ownerDocument.getViewControllerFromHtml(ez);ew.doDrag(this);ey.stopPropagation()}else{ez=eq.hasClassUpwards(ey.htmlTarget,ew.cqs_dragGrip);if(ez){var ev=eq.hasClassUpwards(ey.htmlTarget,ew.cqs_dragRoot);ew.dragOptions.htmlNode=ev;ey.dataTransfer.setData("x-bb-nodelist",[ey.target]);var ex=eq.getBoxObject(ev,"border");ew.dragOptions.offsetLeft=ex.x-ey.clientX;ew.dragOptions.offsetTop=ex.y-ey.clientY;ew.setDragSymbol(ev,"icon",ey.clientX,ey.clientY);var ev=this.ownerDocument.documentElement;ew.dragOptions.dragTargets=ew.getDragTargetsFilter([ey.target],ev,function(eA){if(eA.dragIsTarget){return eA.dragIsTarget()}});ew.doDrag(this,ey.dataTransfer);ey.stopPropagation()}}},dragEnter:function(ew){var ev=this.ownerDocument.dragManager;if(eq.hasClassUpwards(ev.dragOptions.target,ev.cqs_resizeGrip)){eq.addClass(ew.target.htmlNode,"bp-resize");return}if(ew.target.m_dragEnter){ew.target.m_dragEnter(ew,ev)}ew.stopPropagation()},drag:function(ew){var ev=this.ownerDocument.dragManager;if(eq.hasClassUpwards(ev.dragOptions.target,ev.cqs_resizeGrip)){if(ew.target.m_resize){ew.target.m_resize(ew,ev)}else{if(ev.dragOptions.target.parentNode.viewController&&ev.dragOptions.target.parentNode.viewController.m_resize){ev.dragOptions.target.parentNode.viewController.m_resize(ew,ev)}}}else{if(ew.target.m_dragMove){ew.target.m_dragMove(ew,ev)}}ew.stopPropagation()},dragLeave:function(ew){var ev=this.ownerDocument.dragManager;if(eq.hasClassUpwards(ev.dragOptions.target,ev.cqs_resizeGrip)){eq.removeClass(ew.target.htmlNode,"bp-resize");return}if(ew.target.m_dragOut){ew.target.m_dragOut(ew,ev)}ew.stopPropagation()},dragDrop:function(ew){var ev=this.ownerDocument.dragManager;if(eq.hasClassUpwards(ev.dragOptions.target,ev.cqs_resizeGrip)||top.bd&&top.bd.Versions&&top.bd.Versions.previewMode){return}if(ew.target.m_dragDrop){var ex=ew.dataTransfer.getData("x-bb-nodelist");if(ex[0]){ew.target.m_dragDrop(ew,ev,ex[0])}}ew.stopPropagation()},dragend:function(ew){var ev=this.ownerDocument.dragManager;ew.stopPropagation()}};this.createPortalView=function(ex){var ev=new b$.bdom.DOMConfiguration();ev.registerNamespace(b$.bdom.namespaces["http://backbase.com/2012/view"]);ev.registerNamespace(b$.bdom.namespaces["http://backbase.com/2012/portalView"]);if(window.DBG){console.log("________________________________createPortalView________________________________")}var ew=b$.bdom.domImplementation.createDocument();ew.insertDisplayChild=function(ez){};ew.bMoveDisplayChildren=true;var ey=document.createElement("div");document.body.appendChild(ey);ey.appendChild(document.createElement("div"));ew.htmlAbsolutePool=ey;ew.htmlAbsolutePool.className="absolutePool";ew.getViewControllerFromHtml=b$.getVC;ew.defaultDragHandlers=this.defaultDragHandlers;ew.dragIndicator=ew.createElementNS("http://backbase.com/2012/portalView","dragIndicator");if(window.DBG){console.log("________________________________createPortalView________________________________")}return ew};this.importPortalModel=function(ez,eA,ex,ew){var ey=this.portalServer.itemXMLDOC2JSON(ez);var ev=er(eA,ey);if(ew){b$._private.ssrRootElement=ew}b$._private.attachSSR(ev,b$._private.ssrRootElement);if(ev.localName=="Page"){this.controllers.portal.connectToModel(ev,b$.portal.portalView)}else{}if(ex){ex.appendChild(ev)}return ev};this.importFromXML=function(ew,ey,ev){var ex=bdomDocument.importNode(ew,true);b$._private.attachSSR(ex,ev);bdomTarget.appendChild(ex)};var en=null;function es(ev,ew){if(ew&&ew.getAttribute("data-pid")==ev._jxid){et(ev,ew)}}b$._private.attachSSR=es;function et(ew,ey){ew._ssr=ey;var ev=ew.firstChild;var ex=null;while(ev){if(ev.nodeType==1){if(!ex){ex={};ep(ey,ex)}if(ex[ev._jxid]){et(ev,ex[ev._jxid])}}ev=ev.nextSibling}}function ep(ev,ex){var ew=null;var ey=ev.firstChild;while(ey){if(ey.nodeType==1){if(ew=ey.getAttribute("data-pid")){ex[ew]=ey}else{ep(ey,ex)}}ey=ey.nextSibling}}var eu="http://backbase.com/2012/portalModel";function er(ez,eF,eD){if(ez.all[eF.name]){var eE=ez.all[eF.name];console.log("Update "+eE.name);var ew=eE.childNodes;for(var eB=0;eB<ew.length;eB++){var eG=false;for(var eA=0;eA<eF.children.length;eA++){if(ew[eB].name==eF.children[eA].name){eG=true;break}}if(!eG){ew[eB].destroy()}}for(var eB=0;eB<eF.preferences.length;eB++){var ev=eF.preferences[eB];eE.setPreference(ev.name,ev.value)}}else{var eC=eo(eF.tag);ez._newIDhack=eF.name;var eE=ez.createElementNS(eu,eC);eE.setItem(eF);if(eD){eD.appendChild(eE)}}if(eF.children){for(var eB=0;eB<eF.children.length;eB++){if(eF.preferences.loadChildren&&eF.preferences.loadChildren.value==="false"){var ey=eE._children||[];var ex=er(ez,eF.children[eB]);ey.push(ex);eE._children=ey}else{er(ez,eF.children[eB],eE)}}}return eE}this._buildModelFromJSON=er;function eo(ev){switch(ev){case"portal":return"Portal";case"link":return"Link";case"page":return"Page";case"container":return"Container";case"widget":return"Widget";case"catalog":return"Catalog"}}return this})};